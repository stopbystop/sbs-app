{"version":3,"file":"appBundle.js","sourceRoot":"","sources":["../../client/scripts/Telemetry.ts","../../client/scripts/Utils.ts","../../client/scripts/stopbystop-interfaces.ts","../../client/scripts/AppState.ts","../../client/scripts/InitUrls.ts","../../client/scripts/InitHome.ts","../../client/scripts/ViewModels/PoiTypeFilterViewModel.ts","../../client/scripts/ViewModels/FilterViewModel.ts","../../client/scripts/ViewModels/LocationViewModel.ts","../../client/scripts/ViewModels/ReviewGroupViewModel.ts","../../client/scripts/ViewModels/PoiViewModel.ts","../../client/scripts/ViewModels/IStopPlace.ts","../../client/scripts/ViewModels/PoiOnJunctionViewModel.ts","../../client/scripts/ViewModels/RouteStopViewModel.ts","../../client/scripts/ViewModels/JunctionViewModel.ts","../../client/scripts/ViewModels/RouteJunctionPoiTypeViewModel.ts","../../client/scripts/ViewModels/RouteJunctionViewModel.ts","../../client/scripts/ViewModels/RoutePlanViewModel.ts","../../client/scripts/ViewModels/IAppViewModel.ts","../../client/scripts/ViewModels/RouteSegmentViewModel.ts","../../client/scripts/ViewModels/SideBarViewModel.ts","../../client/scripts/ViewModels/RouteViewModel.ts","../../client/scripts/ViewModels/AppViewModel.ts","../../client/scripts/extensions.ts","../../client/scripts/ViewModels/JunctionMapViewModel.ts","../../client/scripts/ViewModels/JunctionAppViewModel.ts","../../client/scripts/Init.ts","../../cordova/scripts/index.ts"],"names":[],"mappings":"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","sourcesContent":["/// <reference path=\"tsdef/jquery.d.ts\"/>\r\n/// <reference path=\"tsdef/knockout-3.3.d.ts\"/>\r\n/// <reference path=\"tsdef/ai.d.ts\"/>\r\n\r\nmodule StopByStop {\r\n    export enum TelemetryEvent {\r\n        Add5MinToStop,\r\n        AddStopToRoute,\r\n        CityDropdownClick,\r\n        FilterButtonClick,\r\n        FilterButtonInlineExitPageClick,\r\n        FilterMaxDistanceFromJunctionChanged,\r\n        FilterShowGasStationsChanged,\r\n        FilterShowRestaurantsChanged,\r\n        LocationIN,\r\n        LocationOUT,\r\n        LocationOUTPopupDisplayed,\r\n        NonBounce,\r\n        POIGroupPageScroll,\r\n        POIGroupSwitchList,\r\n        POIGroupSwitchMap,\r\n        Remove5MinFromStop,\r\n        RemoveStopFromRoute,\r\n        RoutePageScroll,\r\n        RoutePlanNavigateClick,\r\n        RoutePlanNavigateBeforeDirect,\r\n        ShowStopSettingsPopup,\r\n        SideBarThumbTouch,\r\n        SocialButtonClick,\r\n        StopPopupNavigateClick,\r\n        StopPopupNavigateBeforeDirect,\r\n        TelLinkClick,\r\n        ViewTripButtonClick,\r\n        YelpLinkClick,\r\n    }\r\n\r\n    export enum TelemetryProperty {\r\n        FilterVisibility,\r\n        LoadStopsFromCache,\r\n        PageName,\r\n        StopCount,\r\n        NavigationUrl\r\n    }\r\n\r\n    export enum TelemetryMeasurement {\r\n    }\r\n\r\n    export class Telemetry {\r\n        public static _appInsights: Microsoft.ApplicationInsights.IAppInsights = window[\"appInsights\"];\r\n\r\n        public static trackPageView(\r\n            pageName: string,\r\n            url: string,\r\n            duration?: number,\r\n            telemetryProperties: [{ k: TelemetryProperty, v: string }] = null,\r\n            telemetryMeasurements: [{ k: TelemetryMeasurement, v: number }] = null,\r\n            flush: boolean = false\r\n        ): void {\r\n\r\n            try {\r\n                var aiProps = Telemetry.getAIProperties(telemetryProperties);\r\n                var aiMeasurements = Telemetry.getAIMeasurements(telemetryMeasurements);\r\n                Telemetry._appInsights.trackPageView(pageName, url, aiProps, aiMeasurements, duration);\r\n\r\n                if (flush) {\r\n                    Telemetry._appInsights.flush();\r\n                }\r\n            }\r\n            catch (ex) {\r\n                Telemetry.logFatal(ex);\r\n            }\r\n        }\r\n\r\n        public static trackEvent(\r\n            telemetryEvent: TelemetryEvent,\r\n            telemetryProperties: [{ k: TelemetryProperty, v: string }] = null,\r\n            telemetryMeasurements: [{ k: TelemetryMeasurement, v: number }] = null,\r\n            flush: boolean = false\r\n        ): void {\r\n\r\n            try {\r\n                var aiProps = Telemetry.getAIProperties(telemetryProperties);\r\n                var aiMeasurements = Telemetry.getAIMeasurements(telemetryMeasurements);\r\n                Telemetry._appInsights.trackEvent(TelemetryEvent[telemetryEvent], aiProps, aiMeasurements);\r\n\r\n                if (flush) {\r\n                    Telemetry._appInsights.flush();\r\n                }\r\n            }\r\n            catch (ex) {\r\n                Telemetry.logFatal(ex);\r\n            }\r\n        }\r\n\r\n        public static trackError(\r\n            error: Error,\r\n            telemetryProperties: [{ k: TelemetryProperty, v: string }] = null,\r\n            telemetryMeasurements: [{ k: TelemetryMeasurement, v: number }] = null,\r\n            flush: boolean = false\r\n        ): void {\r\n            try {\r\n                var aiProps = Telemetry.getAIProperties(telemetryProperties);\r\n                var aiMeasurements = Telemetry.getAIMeasurements(telemetryMeasurements);\r\n                Telemetry.logFatal(error);\r\n                Telemetry._appInsights.trackException(error, \"\", aiProps, aiMeasurements);\r\n                if (flush) {\r\n                    Telemetry._appInsights.flush();\r\n                }\r\n            }\r\n            catch (ex) {\r\n                Telemetry.logFatal(ex);\r\n            }\r\n        }\r\n\r\n        public static logToConsole(message: string) {\r\n            if (window.console) {\r\n                window.console.log(message);\r\n            }\r\n        }\r\n\r\n        private static getAIProperties(telemetryProperties: [{ k: TelemetryProperty, v: string }]): { [name: string]: string; } {\r\n            var aiProps: { [name: string]: string; } = {\r\n            };\r\n            aiProps[TelemetryProperty[TelemetryProperty.PageName]] = AppState.current.pageInfo.telemetryPageName;\r\n            if (telemetryProperties) {\r\n                $.each(telemetryProperties, (i, v) => { aiProps[TelemetryProperty[v.k]] = v.v; });\r\n            }\r\n            return aiProps;\r\n        }\r\n\r\n        private static getAIMeasurements(telemetryMeasurements: [{ k: TelemetryMeasurement, v: number }]): { [name: string]: number; } {\r\n            var aiMeasurements: { [name: string]: number; } = {};\r\n            if (telemetryMeasurements) {\r\n                $.each(telemetryMeasurements, (i, v) => { aiMeasurements[TelemetryMeasurement[v.k]] = v.v; });\r\n            }\r\n            return aiMeasurements;\r\n        }\r\n\r\n        private static logFatal(message: any) {\r\n            Telemetry.logErrorToConsole(\"ERROR-TO-TELEMETRY:\" + message);\r\n        }\r\n\r\n       \r\n        private static logErrorToConsole(err: any) {\r\n            if (window.console && window.console.error) {\r\n                if (err.message) {\r\n                    window.console.error(err.message);\r\n                } else {\r\n                    window.console.error(err);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}","/// <reference path=\"tsdef/jquery.d.ts\"/>\r\n/// <reference path=\"tsdef/jquerymobile.d.ts\"/>\r\n/// <reference path=\"tsdef/knockout-3.3.d.ts\"/>\r\n\r\nmodule StopByStop {\r\n    export const PAGENAME_HOME = \"sbs-homePG\";\r\n    export const PAGENAME_Route = \"route-page\";\r\n    export const PAGENAME_POIGroup = \"poigroup-page\";\r\n    export const PAGENAME_Exit = \"exit-page\";\r\n    export const PAGENAME_About = \"about-page\";\r\n    export const N_LAT_BOUNDARY = 50.00;\r\n    export const S_LAT_BOUNDARY = 25.00;\r\n    export const W_LON_BOUNDARY = -125.00;\r\n    export const E_LON_BOUNDARY = -66.00;\r\n    export const ROUTE_PLAN_STORAGE_KEY = \"sbsroutes\";\r\n\r\n    export class Utils {\r\n        public static updateNavigationLocation(hash: string, navigationLocation: ISBSNavigationLocation): void {\r\n            if (!hash) {\r\n                hash = \"#home\";\r\n            }\r\n            hash = hash.toLowerCase();\r\n            var hashIndex = hash.indexOf(\"#\");\r\n            var queryStringPart: string = null;\r\n\r\n            if (hashIndex < 0) {\r\n                hash = \"#home\";\r\n                hashIndex = 0;\r\n            }\r\n\r\n            if (hashIndex >= 0) {\r\n                var indexOfPageNameEnd = hash.indexOf(\"&\", hashIndex) - 1;\r\n                if (indexOfPageNameEnd < 0) {\r\n                    indexOfPageNameEnd = hash.length - 1;\r\n                } else {\r\n                    queryStringPart = hash.substr(indexOfPageNameEnd + 1);\r\n                }\r\n                var pageName = hash.substr(hashIndex + 1, indexOfPageNameEnd - hashIndex);\r\n                if (SBSPage[pageName] !== undefined) {\r\n                    navigationLocation.page = SBSPage[pageName];\r\n                }\r\n\r\n                if (queryStringPart) {\r\n                    var queryStringParameterPairs: string[] = queryStringPart.split(\"&\");\r\n                    for (var i = 0; i < queryStringParameterPairs.length; i++) {\r\n                        var qsParts = queryStringParameterPairs[i].split(\"=\");\r\n                        if (qsParts.length === 2) {\r\n                            var parameter = qsParts[0];\r\n                            var val = qsParts[1];\r\n                            switch (parameter) {\r\n                                case \"routeid\":\r\n                                    navigationLocation.routeId = val;\r\n                                    navigationLocation.poiType = undefined;\r\n                                    break;\r\n                                case \"exitid\":\r\n                                    navigationLocation.exitId = val;\r\n                                    break;\r\n                                case \"poitype\":\r\n                                    navigationLocation.poiType = PoiType.all;\r\n                                    if (val) {\r\n                                        navigationLocation.poiType = PoiType[val];\r\n                                    }\r\n                                    break;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        public static getHashFromNavigationLocation(navigationLocation: ISBSNavigationLocation): string {\r\n            var loc = \"#\";\r\n\r\n            if (SBSPage[navigationLocation.page]) {\r\n                loc += SBSPage[navigationLocation.page];\r\n            } else {\r\n                loc += \"home\";\r\n            }\r\n\r\n            if (navigationLocation.routeId) {\r\n                loc += (\"&routeid=\" + navigationLocation.routeId);\r\n            }\r\n\r\n            if (navigationLocation.exitId && navigationLocation.page === SBSPage.exit) {\r\n                loc += (\"&exitid=\" + navigationLocation.exitId);\r\n            }\r\n\r\n            if (navigationLocation.poiType && navigationLocation.page === SBSPage.exit && PoiType[navigationLocation.poiType]) {\r\n                loc += (\"&poitype=\" + PoiType[navigationLocation.poiType]);\r\n            }\r\n\r\n            return loc.toLowerCase();\r\n        }\r\n\r\n        public static getMileString(distance: number): string {\r\n            if (distance < 0.1) {\r\n                return \"<0.1mi\";\r\n            }\r\n\r\n            return distance.toString() + \"mi\";\r\n        }\r\n\r\n        public static getHours(seconds: number): number {\r\n            return Math.floor(((seconds % 31536000) % 86400) / 3600);\r\n        }\r\n\r\n        public static getMinutes(seconds: number): number {\r\n            return Math.floor((((seconds % 31536000) % 86400) % 3600) / 60);\r\n        }\r\n\r\n        public static getTimeString(time: Date, msOffset: number = 0): string {\r\n            time = new Date(time.getTime() + msOffset);\r\n            return Utils.formatTime(time);\r\n        }\r\n\r\n        public static formatTime(date: Date) {\r\n            var hours = date.getHours();\r\n            var minutes = date.getMinutes();\r\n            var minutesString: string = minutes.toString();\r\n            var ampm = hours >= 12 ? \"pm\" : \"am\";\r\n            hours = hours % 12;\r\n            if (hours === 0) {\r\n                hours = 12;\r\n            }\r\n\r\n            if (minutes < 10) {\r\n                minutesString = \"0\" + minutesString;\r\n            }\r\n            return hours.toString() + \":\" + minutesString + \" \" + ampm;\r\n\r\n        }\r\n\r\n        // http://stackoverflow.com/questions/3219758/detect-changes-in-the-dom\r\n        public static observeDOM: (obj: Element, callback: () => void) => void = (() => {\r\n            var MutationObserver = (<any>window).MutationObserver || (<any>window).WebKitMutationObserver,\r\n                eventListenerSupported = window.addEventListener;\r\n\r\n            return function (obj, callback) {\r\n                if (MutationObserver) {\r\n                    // define a new observer\r\n                    var obs = new MutationObserver(function (mutations, observer) {\r\n                        if (mutations[0].addedNodes.length || mutations[0].removedNodes.length)\r\n                            callback();\r\n                    });\r\n                    // have the observer observe foo for changes in children\r\n                    obs.observe(obj, { childList: true, subtree: true });\r\n                }\r\n                else if (eventListenerSupported) {\r\n                    obj.addEventListener('DOMNodeInserted', callback, false);\r\n                    obj.addEventListener('DOMNodeRemoved', callback, false);\r\n                }\r\n            }\r\n        })();\r\n\r\n        public static hasAnyOwnProperties(obj: Object): boolean {\r\n            for (var prop in obj) {\r\n                if (obj.hasOwnProperty(prop)) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n\r\n        public static runOnce<T>(func: (...args: any[]) => T): (...args: any[]) => T {\r\n            var ran = false;\r\n            var memo: T;\r\n            return function (...args: any[]) {\r\n                if (!ran) {\r\n                    ran = true;\r\n                    memo = func.apply(this, arguments);\r\n                }\r\n                return memo;\r\n            };\r\n        };\r\n\r\n        public static spaPageNavigate(page: SBSPage, routeId?: string, exitId?: string, poiType?: PoiType, changeHash: boolean = true): void {\r\n            var pageId = \"#home\";\r\n            switch (page) {\r\n                case SBSPage.about:\r\n                    pageId = \"#about\";\r\n                    break;\r\n                case SBSPage.exit:\r\n                    pageId = \"#exit\";\r\n                    break;\r\n                case SBSPage.route:\r\n                    pageId = \"#route\";\r\n                    break;\r\n            }\r\n\r\n            var dataUrl = pageId;\r\n            if (routeId) {\r\n                dataUrl += \"&routeid=\" + routeId;\r\n            }\r\n            if (exitId) {\r\n                dataUrl += \"&exitid=\" + exitId;\r\n            }\r\n            if (poiType) {\r\n                dataUrl += \"&poitype=\" + PoiType[poiType].toLowerCase();\r\n            }\r\n\r\n            var reverse = (AppState.current.navigationLocation && AppState.current.navigationLocation.page > page);\r\n\r\n            AppState.current.knownHashChangeInProgress = true;\r\n\r\n            $.mobile.pageContainer.pagecontainer(\r\n                \"change\",\r\n                pageId, { dataUrl: dataUrl, changeHash: changeHash, transition: \"slide\", reverse: reverse });\r\n        }\r\n\r\n        public static getShareUrl(hostName: string, navLocation: ISBSNavigationLocation) {\r\n            var shareUrl = hostName;\r\n            if (shareUrl.substr(shareUrl.length - 1) !== \"/\") {\r\n                shareUrl += \"/\";\r\n            }\r\n\r\n            switch (navLocation.page) {\r\n                case SBSPage.route:\r\n                case SBSPage.exit:\r\n                    shareUrl += \"route/\" + navLocation.routeId;\r\n\r\n                    if (navLocation.page === SBSPage.exit) {\r\n                        shareUrl += \"/exit/osm-\" + navLocation.exitId;\r\n                    }\r\n                    break;\r\n            }\r\n\r\n            return shareUrl;\r\n        }\r\n\r\n        public static getRouteTitleFromRouteId(routeId: string): string {\r\n            var routeTitle = \"\";\r\n\r\n            if (routeId && routeId.indexOf(\"-to-\") > 1) {\r\n                var fromAndTo = routeId.split(\"-to-\");\r\n                var fromString = fromAndTo[0];\r\n                var toString = fromAndTo[1];\r\n\r\n                if (fromString.length > 1 && toString.length > 1) {\r\n                    if ($.isNumeric(fromString[0])) {\r\n                        fromString = \"your location\";\r\n                    } else {\r\n                        fromString = Utils.getPlaceNameFromPlaceId(fromString);\r\n                    }\r\n                }\r\n\r\n                toString = Utils.getPlaceNameFromPlaceId(toString);\r\n                if (fromString && toString) {\r\n                    routeTitle = \"from \" + fromString + \" to \" + toString;\r\n                } else {\r\n                    routeTitle = \"\";\r\n                }\r\n            }\r\n\r\n            return routeTitle;\r\n        }\r\n\r\n        public static isHistoryAPISupported(): boolean {\r\n            return !!(window.history && history.pushState);\r\n        }\r\n\r\n        public static windowOpen(url: string) {\r\n            if (AppState.current.windowOpenTarget === \"_blank\") {\r\n                window.location.assign(url);\r\n            } else {\r\n                window.open(url, AppState.current.windowOpenTarget, \"location=yes\");\r\n            }\r\n        }\r\n\r\n        public static getPoiIconUrl(poiType: PoiType, iconFormat: PoiIconFormat, baseImageUrl: string) {\r\n            var poiTypeString = PoiType[poiType].toLowerCase();\r\n            return baseImageUrl + \"poi/\" + poiTypeString + \"/\" + poiTypeString + \"_\" + iconFormat.toString() + \".png\";\r\n        }\r\n\r\n        private static getPlaceNameFromPlaceId(placeId: string) {\r\n            var placeName = \"\";\r\n            var usIndex = placeId.indexOf(\"-united-states\");\r\n            if (usIndex > 0) {\r\n                placeId = placeId.substr(0, usIndex);\r\n\r\n                var state = placeId.substr(placeId.length - 2, 2).toUpperCase();\r\n                placeId = placeId.substr(0, placeId.length - 3);\r\n                placeId = placeId.replace(/-/g, ' ');\r\n                placeName = placeId.replace(/([^ \\t]+)/g, (_, word: string) => {\r\n                    return word[0].toUpperCase() + word.substr(1);\r\n                }) + \", \" + state;\r\n            }\r\n\r\n            return placeName;\r\n        }\r\n\r\n\r\n    }\r\n}","/// <reference path=\"tsdef/jquery.d.ts\"/>\r\n\r\n\"use strict\";\r\n\r\nmodule StopByStop {\r\n\r\n    export enum SBSApp {\r\n        Web = 0,\r\n        SPA = 1\r\n    }\r\n\r\n    export interface IInitUrls {\r\n        BaseUrl: string;\r\n        BaseImageUrl: string;\r\n        RouteUrl: string;\r\n\r\n        RouteDataUrlV2: string;\r\n        PlacesUrlV2: string;\r\n        PoiUrlV2: string;\r\n        PlacesNearbyUrlV2: string;\r\n        CityImagesUrl: string;\r\n    }\r\n\r\n    export interface IAppState {\r\n        baseDataUrl: string;\r\n        baseImageUrl: string;\r\n        windowOpenTarget: string;\r\n        app: SBSApp;\r\n        urls?: IInitUrls;\r\n        pageInfo?: IPageInfo;\r\n        navigationLocation?: ISBSNavigationLocation;\r\n        knownHashChangeInProgress?: boolean;\r\n        historyDisabled?: boolean;\r\n        metadata: IMetadata;\r\n    }\r\n\r\n    export interface IWebInitData {\r\n        /** page */\r\n        p: SBSPage;\r\n        /** route id */\r\n        rid: string;\r\n        /** route */\r\n        r: IRoute;\r\n        /** exit id */\r\n        exd: string;\r\n        /** poi type */\r\n        pt: PoiType;\r\n        /** base data url */\r\n        durl: string;\r\n        /** base image url */\r\n        iurl: string;\r\n        /** metadata */\r\n        m: IMetadata;\r\n\r\n    }\r\n\r\n    export interface ILocation {\r\n        /** latitude */\r\n        a: number;\r\n        /** longitude */\r\n        o: number;\r\n        /** place description */\r\n        pd?: string;\r\n    };\r\n\r\n    export interface IRouteSegment {\r\n        /** highway name */\r\n        hn: string;\r\n        /* ref */\r\n        r: string;\r\n        /** start */\r\n        s: ILocation;\r\n        /** end */\r\n        e: ILocation;\r\n        /** distance */\r\n        d: number;\r\n        /** portion completed */\r\n        pc: number;\r\n        /** start index */\r\n        si: number;\r\n        /** end index */\r\n        ei: number;\r\n        /** maneuver */\r\n        m: string;\r\n        /** instructions */\r\n        i: string;\r\n        /** junction */\r\n        j: IRouteJunction[];\r\n    }\r\n\r\n    export interface IReviewGroup {\r\n        /** id */\r\n        id: string;\r\n        /** name */\r\n        n: string;\r\n        /** image url */\r\n        iu: string;\r\n        /** icon */\r\n        i: string;\r\n        /** review count */\r\n        rc: number;\r\n        /** review page url */\r\n        u: string;\r\n        /** rating image url */\r\n        riu: string;\r\n        /** rating */\r\n        r: number;\r\n    }\r\n\r\n    export interface IPoi {\r\n        /** sbsid */\r\n        id: string;\r\n        /** poi category ids */\r\n        c: number[];\r\n        /** poi type */\r\n        t: PoiType;\r\n        /** name */\r\n        n: string;\r\n        /** description */\r\n        d: string;\r\n        /** poi location */\r\n        l: ILocation;\r\n        /** phone number */\r\n        p: string;\r\n        /** open hours */\r\n        oh: number[];\r\n        /** primary properties */\r\n        pp: { [id: string]: any }\r\n        /** secondary properties */\r\n        sp: { [id: string]: any }\r\n    }\r\n\r\n    export interface IPoiCategory {\r\n        /** sbsid */\r\n        id: number;\r\n        /** name */\r\n        n: string;\r\n        /** poi type */\r\n        pt: PoiType;\r\n    }\r\n\r\n    export interface IPoiCategoryOccurrence {\r\n        /** category */\r\n        cat: IPoiCategory;\r\n        /** count of occurrences */\r\n        c: number;\r\n    }\r\n\r\n    export interface IPoiOnJunction {\r\n        /** sbsid */\r\n        id: string;\r\n        /** distance from junction */\r\n        dfj: number;\r\n        /** poi */\r\n        p: IPoi;\r\n        /** visibility flag */\r\n        v: boolean;\r\n\r\n    }\r\n\r\n    export interface IJunction {\r\n        /** name */\r\n        n: string;\r\n        /** index */\r\n        i: number;\r\n        /** osmid */\r\n        oid: number;\r\n        /** highway name */\r\n        hn: string;\r\n        /** ref */\r\n        r: string;\r\n        /** location */\r\n        l: ILocation;\r\n        /** exit to */\r\n        et: string;\r\n        /** exit to left */\r\n        etl: string;\r\n        /** exit to right */\r\n        etr: string;\r\n        /** pois */\r\n        p: IPoiOnJunction[];\r\n    }\r\n\r\n    export interface IRouteJunction {\r\n        /** distance from route start */\r\n        dfrs: number;\r\n        /** time from rout start */\r\n        tfrs: number;\r\n        /** junction */\r\n        j: IJunction;\r\n    }\r\n\r\n    export enum PoiType {\r\n        restaurants = 1,\r\n        gasstations = 2,\r\n        hotels = 4,\r\n        sights = 8,\r\n        all = restaurants | gasstations | hotels | sights\r\n    }\r\n\r\n    export interface IRoute {\r\n        /** from location */\r\n        fl: ILocation;\r\n        /** to location */\r\n        tl: ILocation;\r\n        /** current location */\r\n        cl: ILocation;\r\n        /** route id */\r\n        rid: string;\r\n        /** distance */\r\n        d: number;\r\n        /** time */\r\n        t: number;\r\n        /** route segments */\r\n        s: IRouteSegment[];\r\n        /** metadata */\r\n        m: IMetadata;\r\n    }\r\n\r\n    export enum SBSPage {\r\n        home = 0,\r\n        route = 1,\r\n        exit = 2,\r\n        about = 3\r\n    }\r\n\r\n    export interface IPageInfo {\r\n        /** page name */\r\n        pageName: string;\r\n        /** telemetry page name */\r\n        telemetryPageName: string;\r\n    }\r\n\r\n    export interface ISBSNavigationLocation {\r\n        /** page */\r\n        page: SBSPage,\r\n        /** route id */\r\n        routeId?: string;\r\n        /** exit id */\r\n        exitId?: string;\r\n        /** POI type */\r\n        poiType?: PoiType;\r\n    }\r\n\r\n    export interface IPoiPropertyMetadata {\r\n        id?: string;\r\n        /** name */\r\n        n: string;\r\n        /** values by id */\r\n        v?: { [id: number]: IPoiPropertyValueMetadata };\r\n        /** is primary property */\r\n        fp?: boolean;\r\n    }\r\n\r\n    export interface IPoiPropertyValueMetadata {\r\n        /** id */\r\n        id: number;\r\n        /** name */\r\n        n: string;\r\n    }\r\n\r\n    export interface IRootPoiCategory {\r\n        /** poi type */\r\n        t: PoiType;\r\n\r\n        /** category id */\r\n        c: number;\r\n\r\n        /** show subcategories in filters */\r\n        scf: boolean;\r\n\r\n        /** name */\r\n        n: string;\r\n\r\n        /** property metadata */\r\n        p: IPoiPropertyMetadata[];\r\n    }\r\n\r\n    export interface IMetadata {\r\n        /** category metadata */\r\n        c: { [id: number]: IPoiCategory };\r\n        /** root categories by type id */\r\n        rpc: { [id: number]: IRootPoiCategory };\r\n        /** all properties by id */\r\n        ppm: { [id: string]: IPoiPropertyMetadata };\r\n    }\r\n\r\n    export enum PoiIconFormat {\r\n        Light = 1,\r\n        Dark = 2,\r\n        Map = 4\r\n    }\r\n\r\n}","/// <reference path=\"tsdef/jquery.d.ts\"/>\r\n/// <reference path=\"tsdef/jquerymobile.d.ts\"/>\r\n/// <reference path=\"tsdef/knockout-3.3.d.ts\"/>\r\n/// <reference path=\"Telemetry.ts\"/>\r\n/// <reference path=\"Utils.ts\"/>\r\n/// <reference path=\"stopbystop-interfaces.ts\"/>\r\n\r\nmodule StopByStop {\r\n\r\n    export class AppState {\r\n        public static current: IAppState = {\r\n            baseDataUrl: null,\r\n            baseImageUrl: null,\r\n            app: null,\r\n            windowOpenTarget: \"_system\",\r\n            metadata: null\r\n        };\r\n    }\r\n}","/// <reference path=\"stopbystop-interfaces.ts\"/>\r\n\r\nmodule StopByStop {\r\n    export class InitUrls implements IInitUrls {\r\n        constructor(baseUrl: string, baseImageUrl: string) {\r\n            if (typeof baseUrl !== \"string\") {\r\n                baseUrl = \"/\";\r\n            } else if (!/\\/$/.test(baseUrl)) {\r\n                baseUrl += \"/\";\r\n            }\r\n\r\n            this.BaseImageUrl = baseImageUrl;\r\n            this.BaseUrl = baseUrl;\r\n            this.RouteUrl = baseUrl + \"route/\";\r\n\r\n            this.PlacesUrl = baseUrl + \"place/\";\r\n            this.RouteDataUrl = baseUrl + \"routedata/\";\r\n            this.PoiUrl = baseUrl + \"poi/\";\r\n            this.PlacesNearbyUrl = baseUrl + \"placesnearby/\";\r\n\r\n            this.PlacesUrlV2 = baseUrl + \"placev2/\";\r\n            this.RouteDataUrlV2 = baseUrl + \"routedatav2/\";\r\n            this.PoiUrlV2 = baseUrl + \"poiv2/\";\r\n            this.PlacesNearbyUrlV2 = baseUrl + \"placesnearbyv2/\";\r\n\r\n            this.CityImagesUrl = \"https://az804061.vo.msecnd.net/client/content/city_images/\";\r\n        }\r\n\r\n        public BaseUrl: string;\r\n        public BaseImageUrl: string;\r\n        public RouteUrl: string;\r\n\r\n        public RouteDataUrl: string;\r\n        public PlacesUrl: string;\r\n        public PoiUrl: string;\r\n        public PlacesNearbyUrl: string;\r\n\r\n        public RouteDataUrlV2: string;\r\n        public PlacesUrlV2: string;\r\n        public PoiUrlV2: string;\r\n        public PlacesNearbyUrlV2: string;\r\n        public CityImagesUrl: string;\r\n    }\r\n}","/// <reference path=\"tsdef/jquery.d.ts\"/>\r\n/// <reference path=\"tsdef/jquerymobile.d.ts\"/>\r\n/// <reference path=\"tsdef/knockout-3.3.d.ts\"/>\r\n/// <reference path=\"AppState.ts\" />\r\n/// <reference path=\"Telemetry.ts\"/>\r\n/// <reference path=\"Utils.ts\"/>\r\n/// <reference path=\"stopbystop-interfaces.ts\"/>\r\n/// <reference path=\"InitUrls.ts\"/>\r\n\r\nmodule StopByStop {\r\n\r\n    export class InitHome {\r\n        static yIncrement: number = -100; \r\n\r\n        /*\r\n        The functionality below pulls the image url based on lat long\r\n        And populates the images inside a div\r\n        If an image is not available, it is shown as a blank div\r\n        */\r\n        public static addImagesDynamically(prevPlace,currentLocationString) {\r\n            if (StopByStop.AppState.current.app !== StopByStop.SBSApp.Web) {\r\n                var prevPlace = $('#Images').data('prevPlace');                \r\n                var place = $('#from').data('place');\r\n                if (place === null) {\r\n                    return true;\r\n                }\r\n                if (prevPlace && prevPlace.n === place.n) {\r\n                    // Dont proceed further as the same place is being selected\r\n                    return true;\r\n                }\r\n                // Continue with the processing if the previous place doesnt match with the current returned place\r\n                $('#Images').data('prevPlace',place);\r\n                //Remove any div contents from the previous population before adding new divs\r\n                $(\"#Images\").empty();\r\n                var placesNearbyUrl = \"\";\r\n                //If the place returned is the current location, the processing should be different, \r\n                //should be picked up from place.i\r\n                if (place.n === currentLocationString) {\r\n                    var modifiedCurrentLocation = place.i.replace(\",\", \"/\");\r\n                    placesNearbyUrl = AppState.current.urls.PlacesNearbyUrlV2 + modifiedCurrentLocation;\r\n                }\r\n                else {\r\n                    placesNearbyUrl = AppState.current.urls.PlacesNearbyUrlV2 + place.l.a + '/' + place.l.o;\r\n                }\r\n                $.ajax({\r\n                    url: placesNearbyUrl,\r\n                    dataType: 'json',\r\n                    method: 'GET',\r\n                    success: function (result) {\r\n                        var imageDiv = $(\"#Images\"), myDivs = [], divIndex = 0, numOfDivs = result.length;\r\n                        if (numOfDivs > 10 && window.screen.width > 480) {\r\n                            numOfDivs = 10; //Restrict results to 10 for a desktop screen\r\n                        }\r\n                        if (numOfDivs > 6 && window.screen.width < 480) {\r\n                            numOfDivs = 6; //Restrict results to 6 for a mobile screen\r\n                        }\r\n                        for (divIndex; divIndex < numOfDivs; divIndex += 1) {\r\n                            var divId = \"appendedImagediv\" + divIndex;\r\n                            var imageId = \"appendedImageId\" + divIndex;\r\n                            myDivs.push(InitHome.createDiv(divIndex, result[divIndex]));\r\n                            $(myDivs[divIndex]).data('place', result[divIndex]);\r\n                            $(\"#Images\").append(myDivs[divIndex]);\r\n                            $(myDivs[divIndex]).on('click', function () {\r\n\r\n                                $(\"#to\").val($(this).data('place').n);\r\n                                var placeData = { n: $(this).data('place').n, i: $(this).data('place').i };\r\n                                $(\"#to\").data('place', placeData);\r\n                                $(\"#view_trip\").removeClass(\"ui-disabled\");\r\n\r\n                            });\r\n                            \r\n                            var imgurl=StopByStop.AppState.current.urls.CityImagesUrl + result[divIndex].i + '.jpg';\r\n                            $('#appendedImagediv' + divIndex).css('background-image','url(' + imgurl + ')');                            \r\n                            \r\n                        }\r\n                        \r\n                        InitHome.moveImageInBackground();\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        \r\n        public static moveImageInBackground(){\r\n            InitHome.yIncrement=InitHome.yIncrement+1;\r\n            var divIndexCount=0;\r\n            var requestID = null;\r\n            for(divIndexCount=0;divIndexCount<10;divIndexCount++){\r\n                var appendedImagediv = $('#appendedImagediv'+divIndexCount);\r\n                if(appendedImagediv){\r\n                    $(appendedImagediv).css('background-position','0px ' + InitHome.yIncrement + 'px');\r\n                }\r\n            }\r\n            requestID=requestAnimationFrame(InitHome.moveImageInBackground);\r\n            if(InitHome.yIncrement>=0)\r\n            {\r\n                cancelAnimationFrame(requestID); \r\n                InitHome.yIncrement=-100;\r\n            }\r\n            \r\n        }        \r\n\r\n        public static createDiv(divIndex,data) {\r\n            var imageDiv = document.createElement(\"div\");\r\n            imageDiv.id = 'appendedImagediv' + divIndex;\r\n            imageDiv.className = \"imageholder\";\r\n            var innerDiv = document.createElement(\"div\");\r\n            innerDiv.id = 'appendedInnerdiv' + divIndex;\r\n            innerDiv.className = \"childdiv\";\r\n            innerDiv.innerHTML = data.sn;\r\n            imageDiv.appendChild(innerDiv);\r\n            innerDiv.onclick = function () {\r\n                $(\"#to\").val($(this).parent('div').data('place').n);\r\n                var placeData = { n: $(this).parent('div').data('place').n, i: $(this).parent('div').data('place').i };\r\n                $(\"#to\").data('place', placeData);\r\n                $(\"#view_trip\").removeClass(\"ui-disabled\");\r\n            };\r\n            return imageDiv;\r\n        }\r\n        \r\n        public static wireup() {\r\n            var currentLocationString = \"Current location\";\r\n            var fromCityListData = null;\r\n            var prevPlace = null;\r\n            \r\n            // populate from with 'current location'\r\n            var currentLocationData = null;\r\n            var setCurrentLocation = function () {\r\n                if (navigator && navigator.geolocation) {\r\n                    navigator.geolocation.getCurrentPosition(\r\n                        (position: Position) => {\r\n                            var srcLat = position.coords.latitude;\r\n                            var srcLon = position.coords.longitude;\r\n                            if (srcLat > S_LAT_BOUNDARY && srcLat < N_LAT_BOUNDARY && srcLon > W_LON_BOUNDARY && srcLon < E_LON_BOUNDARY) {\r\n                                currentLocationData = { n: currentLocationString, i: srcLat.toFixed(5) + \",\" + srcLon.toFixed(5) };\r\n\r\n                                $(\"#from\").val(currentLocationString);\r\n                                $(\"#from\").data({ place: currentLocationData });\r\n                                \r\n                                if($(\"#from\").data('place'))\r\n                                {\r\n                                    InitHome.addImagesDynamically(prevPlace,currentLocationString);\r\n                                }\r\n\r\n                                Telemetry.trackEvent(TelemetryEvent.LocationIN);\r\n                            }\r\n                            else {\r\n                                Telemetry.trackEvent(TelemetryEvent.LocationOUT);\r\n                            }\r\n                        },\r\n                        (positionError: PositionError) => {\r\n                            var positionErrorReason = \"UNAVAILABLE\";\r\n                            switch (positionError.code) {\r\n                                case positionError.PERMISSION_DENIED:\r\n                                    positionErrorReason = \"PERMISSION_DENIED\";\r\n                                    break;\r\n                                case positionError.POSITION_UNAVAILABLE:\r\n                                    positionErrorReason = \"POSITION_UNAVAILABLE\";\r\n                                    break;\r\n                                case positionError.TIMEOUT:\r\n                                    positionErrorReason = \"TIMEOUT\";\r\n                                    break;\r\n                            }\r\n\r\n                            Telemetry.trackError(new Error(\"getCurrentPositionErrorHomePage-\" + positionErrorReason));\r\n                        },\r\n                        {\r\n                            maximumAge: 60000,\r\n                            timeout: 5000,\r\n                            enableHighAccuracy: true,\r\n                        }\r\n                    );\r\n                }\r\n            };\r\n            setCurrentLocation();\r\n\r\n            $(\".input-wrapper input\").on(\"keyup\", function (e, data) {\r\n                var $wrapper = $(this).closest('.input-wrapper');\r\n                var that = this;\r\n                var $ul = $wrapper.find('ul'),\r\n                    $input = $(this),\r\n                    value = $input.val();\r\n               \r\n                if (value) {\r\n                   \r\n                    $wrapper.append(\"<div class='ui-loader'><span class='ui-icon ui-icon-loading'></span></div>\");\r\n                  \r\n\r\n\r\n                    $.ajax({\r\n                        url: AppState.current.urls.PlacesUrlV2 + value,\r\n                        dataType: 'json',\r\n                        method: 'GET',\r\n                        success: function (data) {\r\n                            fromCityListData = data;\r\n                            $wrapper.find('.ui-loader').remove();\r\n                            $ul.empty();\r\n                            var otherDropDown = $(that).attr('id') === 'from' ? $('#to') : $('#from');\r\n                            var otherDropDownSelectedID = null;\r\n                            if (otherDropDown.data('place')) {\r\n                                otherDropDownSelectedID = otherDropDown.data('place').i;\r\n                            }\r\n\r\n                            if ($(that).attr('id') === 'from' && currentLocationData) {\r\n                                var $li = $('<li data-icon=\"false\"><a href=\"#\">' + currentLocationString + '</a></li>');\r\n                                $li.data('place', currentLocationData);\r\n                                $ul.append($li);\r\n                            }\r\n\r\n                            for (var i = 0; i < data.length; i++) {\r\n                                if (data[i].i !== otherDropDownSelectedID) {\r\n                                    var $li = $('<li data-icon=\"false\"><a href=\"#\">' + data[i].n + '</a></li>');\r\n                                    $li.data('place', data[i]);\r\n                                    $ul.append($li);\r\n                                }\r\n                            }\r\n                            $ul.listview(\"refresh\");\r\n                            $ul.trigger(\"updatelayout\");\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n\r\n            $(\".autocomplete\").on('click', 'li', function (event) {\r\n\r\n                var $input = $(this).closest('div').find('input');\r\n                var place = $(this).data('place');\r\n                \r\n                if (place) {\r\n                    $input.val(place.n).data('place', place);\r\n                    $(this).closest('ul').empty();\r\n\r\n                    if ($(\"#from\").data('place') && $(\"#to\").data('place')) {\r\n                        $(\"#view_trip\").removeClass(\"ui-disabled\");\r\n                    }\r\n                    \r\n                    InitHome.addImagesDynamically(prevPlace,currentLocationString);\r\n                }\r\n\r\n                Telemetry.trackEvent(TelemetryEvent.CityDropdownClick);\r\n            });\r\n\r\n            $('.input-wrapper input').on('focus', function (event) {\r\n\r\n                var that = $(this);\r\n                window.setTimeout(function () {\r\n                    that.select();\r\n                }, 100);\r\n\r\n                var $wrapper = $(this).closest('.input-wrapper');\r\n                $wrapper.find('ul').show();\r\n                $wrapper.find('.input-tip').hide();\r\n            });\r\n\r\n            $('.view-trip').on('click', function (event) {\r\n                Telemetry.trackEvent(TelemetryEvent.ViewTripButtonClick, null, null, true);\r\n\r\n\r\n                var $from = $('#from');\r\n                var $to = $('#to');\r\n                var startlocation = $from.data('place');\r\n                var endlocation = $to.data('place');\r\n                if (startlocation != undefined && endlocation != undefined) {\r\n                    if (AppState.current.app === SBSApp.Web) {\r\n                        var url = AppState.current.urls.RouteUrl + startlocation.i + '-to-' + endlocation.i;\r\n\r\n                        $(\"#view_trip\").addClass(\"ui-disabled\");\r\n\r\n                        /* navigate without using AJAX navigation */\r\n                        window.location.assign(url);\r\n                    } else {\r\n\r\n                        Utils.spaPageNavigate(SBSPage.route, startlocation.i + '-to-' + endlocation.i);\r\n                    }\r\n                }\r\n            });\r\n\r\n            if ($(\"#from\").data('place') && $(\"#to\").data('place')) {\r\n                $(\"#view_trip\").removeClass(\"ui-disabled\");\r\n            }\r\n            \r\n         }\r\n    }\r\n}","/// <reference path=\"../tsdef/jquery.d.ts\"/>\r\n/// <reference path=\"../tsdef/jquerymobile.d.ts\"/>\r\n/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\r\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\r\n/// <reference path=\"../Telemetry.ts\"/>\r\n\r\n\"use strict\";\r\n\r\nmodule StopByStop {\r\n    export class PoiTypeFilterViewModel {\r\n        private _metadata: IMetadata;\r\n        private _pois: IPoiOnJunction[];\r\n        private _maxDistanceFromJunction: number;\r\n        private _filter: FilterViewModel;\r\n        private _tempCount: number;\r\n\r\n        constructor(poiType: PoiType, metadata: IMetadata, filter: FilterViewModel) {\r\n            this._metadata = metadata;\r\n            this.rootCategory = metadata.rpc[PoiType[poiType]];\r\n            this.categoryName = this.rootCategory.n;\r\n            this.typeName = PoiType[poiType].toLowerCase();\r\n            this.isOn = ko.observable(true);\r\n            this.type = poiType;\r\n\r\n            this.categoryFilter = new MultiValueFilterViewModel({ n: \"Categories\", id: \"categories\" }, this);\r\n            this.propertyEnablementLookup = {};\r\n            this.propertyList = [];\r\n            this._pois = [];\r\n            this.filteredCount = ko.observable<number>(0);\r\n            this.filteredCountWithFeatures = ko.observable<number>(0);\r\n\r\n            this._maxDistanceFromJunction = 3;\r\n            this._filter = filter;\r\n\r\n            this.isOn.subscribe((newValue) => this.updatePoisVisibility());\r\n        }\r\n\r\n        public updatePoisVisibility(maxDistanceFromJunction?: number, notifyParentFilter: boolean = true): void {\r\n            this._maxDistanceFromJunction = maxDistanceFromJunction || this._maxDistanceFromJunction;\r\n\r\n            var filteredWithFeatures = 0;\r\n            $.each(this._pois, (i, poi) => {\r\n\r\n                var v = this.isOn();\r\n\r\n                if (v) {\r\n                    if (poi.dfj > this._maxDistanceFromJunction) {\r\n                        v = false;\r\n                    } else if (this.rootCategory.scf && !this.categoryFilter.isOn(poi.p.c)) {\r\n                        v = false;\r\n                    } else {\r\n                        $.each(this.propertyList, (i2, prop) => {\r\n                            if (!prop.isOn(<number[]>poi.p.pp[prop.id])) {\r\n                                v = false;\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n\r\n                poi.v = v;\r\n                if (v) {\r\n                    filteredWithFeatures++;\r\n                }\r\n            });\r\n\r\n            this.filteredCountWithFeatures(filteredWithFeatures);\r\n\r\n            if (notifyParentFilter) {\r\n                this._filter.onFilterUpdated();\r\n            }\r\n        }\r\n\r\n        public initWithPoi(poiOnJuntion: IPoiOnJunction): void {\r\n            this._pois.push(poiOnJuntion);\r\n\r\n            var poi = poiOnJuntion.p;\r\n\r\n            if (this.rootCategory.scf) {\r\n                var categoryValues = poi.c;\r\n                for (var i = 0; i < categoryValues.length; i++) {\r\n                    var category = this._metadata.c[categoryValues[i]];\r\n                    var categoryName = (category.id === this.rootCategory.c) ? \"All other\" : category.n;\r\n\r\n                    var valueMetadata: IPoiPropertyValueMetadata = { id: category.id, n: categoryName };\r\n                    var categoryValue = this.categoryFilter.addValue(valueMetadata);\r\n                    categoryValue.tempCount++;\r\n\r\n                }\r\n            }\r\n\r\n\r\n            // add property\r\n            for (var prop in poi.pp) {\r\n                // is it a property described in metadata?\r\n                if (this._metadata.ppm[prop]) {\r\n                    if (!this.propertyEnablementLookup[prop]) {\r\n                        var propertyFilterViewModel = new MultiValueFilterViewModel(this._metadata.ppm[prop], this);\r\n                        this.propertyEnablementLookup[prop] = propertyFilterViewModel;\r\n                        this.propertyList.push(propertyFilterViewModel);\r\n                    }\r\n                    $.each(poi.pp[prop], (i, propertyValue) => {\r\n                        var valueViewModel = this.propertyEnablementLookup[prop].addValue(this._metadata.ppm[prop].v[propertyValue]);\r\n                        valueViewModel.tempCount++;\r\n                    });\r\n                }\r\n            }\r\n        }\r\n\r\n        public sortValuesByOccurrence(): void {\r\n            this.categoryFilter.sortByOccurrence();\r\n            $.each(this.propertyList, (i, item) => { item.sortByOccurrence(); });\r\n        }\r\n\r\n\r\n        public typeName: string;\r\n        public rootCategory: IRootPoiCategory;\r\n        public categoryName: string;\r\n        public type: PoiType;\r\n        public filteredCount: KnockoutObservable<number>;\r\n        public filteredCountWithFeatures: KnockoutObservable<number>;\r\n        public isOn: KnockoutObservable<boolean>;\r\n        public categoryFilter: MultiValueFilterViewModel;\r\n        public propertyEnablementLookup: { [id: string]: MultiValueFilterViewModel };\r\n        public propertyList: MultiValueFilterViewModel[];\r\n\r\n        public getCategoriesEnablement(): { [id: number]: boolean } {\r\n            return this.categoryFilter.getValuesEnablement();\r\n        }\r\n\r\n        public setCategoriesEnablement(enablement: { [id: number]: boolean }): void {\r\n            this.categoryFilter.setValuesEnablement(enablement);\r\n        }\r\n\r\n        public getPropertiesEnablement(): { [id: string]: { [id: number]: boolean } } {\r\n            var propertiesEnablement: { [id: string]: { [id: number]: boolean } } = {};\r\n            $.each(this.propertyList, (i, item) => { propertiesEnablement[item.id] = item.getValuesEnablement(); });\r\n            return propertiesEnablement;\r\n        }\r\n\r\n        public setPropertiesEnablement(enablement: { [id: string]: { [id: number]: boolean } }): void {\r\n            $.each(this.propertyList, (i, item) => { item.setValuesEnablement(enablement[item.id]); });\r\n        }\r\n\r\n        public resetTempCount(): void {\r\n            this._tempCount = 0;\r\n            this.categoryFilter.resetTempCount();\r\n            $.each(this.propertyList, (i, item) => { item.resetTempCount(); });\r\n        }\r\n\r\n        public applyTempCount(): void {\r\n            this.filteredCount(this._tempCount);\r\n            this.categoryFilter.applyTempCount();\r\n            $.each(this.propertyList, (i, item) => { item.applyTempCount(); });\r\n        }\r\n\r\n        public incrementTempCountForPoi(poi: IPoi) {\r\n            this._tempCount++;\r\n            this.categoryFilter.incrementTempCount(poi.c);\r\n            for (var prop in poi.pp) {\r\n                if (this.propertyEnablementLookup[prop]) {\r\n                    var values: number[] = <number[]>poi.pp[prop];\r\n                    this.propertyEnablementLookup[prop].incrementTempCount(values);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    export class MultiValueFilterViewModel {\r\n        \r\n\r\n        constructor(p: IPoiPropertyMetadata, filter: PoiTypeFilterViewModel) {\r\n            this.valueEnablementLookup = {};\r\n            this.valueList = [];\r\n            this.name = p.n;\r\n            this.id = p.id;\r\n            this.filter = filter;\r\n        }\r\n\r\n        public addValue(pv: IPoiPropertyValueMetadata): ValueFilterViewModel {\r\n            if (!this.valueEnablementLookup[pv.id]) {\r\n                var valueFilterViewModel = new ValueFilterViewModel(pv.id, pv.n, this, this.filter);\r\n                this.valueEnablementLookup[pv.id] = valueFilterViewModel;\r\n                this.valueList.push(valueFilterViewModel);\r\n            }\r\n\r\n            return this.valueEnablementLookup[pv.id];\r\n        }\r\n\r\n        public sortByOccurrence(): void {\r\n            this.valueList.sort((a, b) => b.tempCount - a.tempCount);\r\n        }\r\n\r\n        public filter: PoiTypeFilterViewModel;\r\n        public id: string;\r\n        public name: string;\r\n        public isCollapsed: KnockoutObservable<boolean> = ko.observable(true);\r\n        public valueEnablementLookup: { [id: number]: ValueFilterViewModel };\r\n        public valueList: ValueFilterViewModel[];\r\n\r\n        public expand(): void {\r\n            this.isCollapsed(false);\r\n        }\r\n\r\n        public collapse(): void {\r\n            this.isCollapsed(true);\r\n        }\r\n\r\n        public isOn(values: number[]): boolean {\r\n            var on: boolean = false;\r\n\r\n            $.each(values, (i, val) => {\r\n                if (this.valueEnablementLookup[val].isOn()) {\r\n                    on = true;\r\n                }\r\n            });\r\n\r\n            return on;\r\n        }\r\n\r\n        public getValuesEnablement(): { [id: number]: boolean } {\r\n            var valuesEnablement: { [id: number]: boolean } = {};\r\n            $.each(this.valueList, (i, item) => {\r\n                valuesEnablement[item.id] = item.isOn();\r\n            });\r\n            return valuesEnablement;\r\n        }\r\n\r\n        public setValuesEnablement(enablement: { [id: number]: boolean }): void {\r\n            $.each(this.valueList, (i, item) => {\r\n                item.isOn(enablement[item.id]);\r\n            });\r\n        }\r\n\r\n        public selectAll(): void {\r\n            \r\n            $.each(this.valueList, (i, item) => {\r\n                item.processingBulkUpdate = true;\r\n                try {\r\n                    item.isOn(true);\r\n                }\r\n                finally {\r\n                    item.processingBulkUpdate = false;\r\n                }\r\n            });\r\n\r\n            this.filter.updatePoisVisibility();\r\n        }\r\n\r\n        public unselectAll(): void {\r\n\r\n            $.each(this.valueList, (i, item) => {\r\n                item.processingBulkUpdate = true;\r\n                try {\r\n                    item.isOn(false);\r\n                }\r\n                finally {\r\n                    item.processingBulkUpdate = false;\r\n                }\r\n            });\r\n\r\n            this.filter.updatePoisVisibility();\r\n        }\r\n\r\n        public resetTempCount(): void {\r\n            $.each(this.valueList, (i, item) => { item.tempCount = 0; });\r\n        }\r\n\r\n        public applyTempCount(): void {\r\n            $.each(this.valueList, (i, item) => { item.count(item.tempCount); });\r\n        }\r\n\r\n        public incrementTempCount(propertyValues: number[]): void {\r\n            $.each(this.valueList, (i, item) => {\r\n                if (propertyValues.indexOf(item.id) > -1) {\r\n                    item.tempCount++;\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    export class ValueFilterViewModel {\r\n\r\n        private _filter: PoiTypeFilterViewModel;\r\n\r\n        constructor(id: number, name: string, parentCategory: MultiValueFilterViewModel, filterViewModel: PoiTypeFilterViewModel) {\r\n            this.parentCategory = parentCategory;\r\n            this.id = id;\r\n            this.isOn = ko.observable(true);\r\n            this.count = ko.observable(0);\r\n            this.tempCount = 0;\r\n            this.name = name;\r\n            this._filter = filterViewModel;\r\n            this.processingBulkUpdate = false;\r\n\r\n            this.isOn.subscribe((newValue) => {\r\n                if (!this.processingBulkUpdate) {\r\n                    this._filter.updatePoisVisibility();\r\n                }\r\n            })\r\n        }\r\n\r\n        public parentCategory: MultiValueFilterViewModel;\r\n        public id: number;\r\n        public isOn: KnockoutObservable<boolean>;\r\n        public count: KnockoutObservable<number>;\r\n        public tempCount: number;\r\n        public name: string;\r\n        public processingBulkUpdate: boolean;\r\n    }\r\n}","/// <reference path=\"../tsdef/jquery.d.ts\"/>\r\n/// <reference path=\"../tsdef/jquerymobile.d.ts\"/>\r\n/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\r\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\r\n/// <reference path=\"../Telemetry.ts\"/>\r\n/// <reference path=\"PoiTypeFilterViewModel.ts\"/>\r\n\r\n\"use strict\";\r\n\r\nmodule StopByStop {\r\n\r\n    export class FilterViewModel {\r\n        private routeJunctions: IRouteJunction[];\r\n\r\n        public routeId: string;\r\n        public typeFiltersList: PoiTypeFilterViewModel[];\r\n        public typeFiltersLookup: {[id:number]: PoiTypeFilterViewModel};\r\n        public onFilterUpdated:()=>void;\r\n\r\n        // this setting is necessary because for Exit page we are not preserving showRestaurants and showGasStations to storage, while for route page we are\r\n        public preserveShowAllSettings: boolean;\r\n\r\n        constructor(routeId: string, rjs: IRouteJunction[], metadata: IMetadata, preserveShowAllSettings: boolean = true) {\r\n            this.routeId = routeId;\r\n            this.routeJunctions = rjs;\r\n            this.preserveShowAllSettings = preserveShowAllSettings;\r\n        \r\n\r\n            this.typeFiltersList = [];\r\n            this.typeFiltersLookup = {};\r\n\r\n            this.maxDistanceFromJunction = ko.observable(\"3\");\r\n            this.maxDistanceFromJunctionIs1 = ko.observable(false);\r\n            this.maxDistanceFromJunctionIs2 = ko.observable(false);\r\n            this.maxDistanceFromJunctionIs3 = ko.observable(true);\r\n            this.maxDistanceFromJunctionIs4 = ko.observable(false);\r\n            this.maxDistanceFromJunctionIs5 = ko.observable(false);\r\n\r\n            var mdarr = [\r\n                [this.maxDistanceFromJunctionIs1, \"1\"],\r\n                [this.maxDistanceFromJunctionIs2, \"2\"],\r\n                [this.maxDistanceFromJunctionIs3, \"3\"],\r\n                [this.maxDistanceFromJunctionIs4, \"4\"],\r\n                [this.maxDistanceFromJunctionIs5, \"5\"]\r\n            ];\r\n\r\n            for (var i = 0; i < mdarr.length; i++) {\r\n\r\n                var selectedmdpair = mdarr[i];\r\n\r\n                (<KnockoutObservable<boolean>>selectedmdpair[0]).subscribe((function (newValue) {\r\n                    var pair = arguments[0];\r\n                    var val = arguments[1];\r\n                    if (val) {\r\n                        this.maxDistanceFromJunction(<string>pair[1]);\r\n                        for (var j = 0; j < mdarr.length; j++) {\r\n                            if (mdarr[j][1] !== pair[1]) {\r\n                                (<KnockoutObservable<boolean>>mdarr[j][0])(false);\r\n                            }\r\n                        }\r\n                    }\r\n                }).bind(this, selectedmdpair));\r\n            }\r\n\r\n            this.populate(metadata);\r\n            $.each(this.typeFiltersList, (i, item) => { item.updatePoisVisibility(parseInt(this.maxDistanceFromJunction()), false); });\r\n            this.updateCounts();\r\n\r\n            this.maxDistanceFromJunction.subscribe((newValue) => {\r\n                $.each(this.typeFiltersList, (i, item) => { item.updatePoisVisibility(parseInt(newValue), false); });\r\n                this.updateCounts();\r\n                this.onFilterUpdated();\r\n            });\r\n        }\r\n\r\n\r\n        public maxDistanceFromJunction: KnockoutObservable<string>;\r\n\r\n        public maxDistanceFromJunctionIs1: KnockoutObservable<boolean>;\r\n        public maxDistanceFromJunctionIs2: KnockoutObservable<boolean>;\r\n        public maxDistanceFromJunctionIs3: KnockoutObservable<boolean>;\r\n        public maxDistanceFromJunctionIs4: KnockoutObservable<boolean>;\r\n        public maxDistanceFromJunctionIs5: KnockoutObservable<boolean>;\r\n\r\n        public copyEnablement(filter: FilterViewModel) {\r\n            for (var i = 0; i < filter.typeFiltersList.length; i++) {\r\n                var categoriesEnablement = filter.typeFiltersList[i].getCategoriesEnablement();\r\n                var propertyEnablement = filter.typeFiltersList[i].getPropertiesEnablement();\r\n\r\n                if (this.typeFiltersLookup[filter.typeFiltersList[i].type]) {\r\n                    this.typeFiltersLookup[filter.typeFiltersList[i].type].setCategoriesEnablement(categoriesEnablement);\r\n                    this.typeFiltersLookup[filter.typeFiltersList[i].type].setPropertiesEnablement(propertyEnablement);\r\n                }\r\n            }\r\n        }\r\n\r\n        private populate(metadata: IMetadata): void {\r\n            for (var i = 0; i < this.routeJunctions.length; i++) {\r\n                var rj = this.routeJunctions[i];\r\n                for (var j = 0; j < rj.j.p.length; j++) {\r\n                    var poiOnJunction = rj.j.p[j];\r\n\r\n                    var poi = poiOnJunction.p;\r\n                    if (!this.typeFiltersLookup[poi.t]) {\r\n                        var typeFilterViewModel = new PoiTypeFilterViewModel(poi.t, metadata, this);\r\n                        this.typeFiltersList.push(typeFilterViewModel);\r\n                        this.typeFiltersLookup[poi.t] = typeFilterViewModel;\r\n                    }\r\n\r\n                    this.typeFiltersLookup[poi.t].initWithPoi(poiOnJunction);\r\n\r\n                }\r\n            }\r\n\r\n            $.each(this.typeFiltersList, (i, item) => { item.sortValuesByOccurrence(); });\r\n        }\r\n\r\n\r\n\r\n        private updateCounts():void {\r\n            var distance = parseInt(this.maxDistanceFromJunction());\r\n            $.each(this.typeFiltersList, (i, item) => { item.resetTempCount(); });\r\n            for (var i = 0; i < this.routeJunctions.length; i++) {\r\n                var rj = this.routeJunctions[i];\r\n                for (var j = 0; j < rj.j.p.length; j++) {\r\n                    var poiOnJunction = rj.j.p[j];\r\n                    if (poiOnJunction.dfj <= distance) {\r\n                        var poi = poiOnJunction.p;\r\n                        this.typeFiltersLookup[poi.t].incrementTempCountForPoi(poi);\r\n                    }\r\n                }\r\n            }\r\n            $.each(this.typeFiltersList, (i, item) => { item.applyTempCount(); });\r\n\r\n        };\r\n    }\r\n}","/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\r\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\r\n\r\n\"use strict\";\r\nmodule StopByStop {\r\n    export class LocationViewModel {\r\n        constructor(obj: ILocation) {\r\n            this.lat = obj.a;\r\n            this.lon = obj.o;\r\n            this.placeDescription = obj.pd || \"\";\r\n        }\r\n\r\n        public lat: number;\r\n        public lon: number;\r\n        public placeDescription: string;\r\n\r\n        private static GRAIN: number = 0.1;\r\n        public static getGridLocations(location: ILocation): LocationViewModel[]\r\n        {\r\n            var mainLocation = new LocationViewModel(\r\n                {\r\n                    a: LocationViewModel.roundToNLat(location.a),\r\n                    o: LocationViewModel.roundToWLon(location.o)\r\n                });\r\n            \r\n\r\n            // n locations\r\n            var nwLocation = new LocationViewModel({\r\n                a: mainLocation.lat + LocationViewModel.GRAIN,\r\n                o: mainLocation.lon - LocationViewModel.GRAIN\r\n            });\r\n            var nLocation = new LocationViewModel({\r\n                a: mainLocation.lat + LocationViewModel.GRAIN,\r\n                o: mainLocation.lon\r\n            });\r\n            var neLocation = new LocationViewModel({\r\n                a: mainLocation.lat + LocationViewModel.GRAIN,\r\n                o: mainLocation.lon + LocationViewModel.GRAIN\r\n            });\r\n\r\n          \r\n\r\n            // e locations\r\n            var eLocation = new LocationViewModel({\r\n                a: mainLocation.lat,\r\n                o: mainLocation.lon + LocationViewModel.GRAIN\r\n            });\r\n            var seLocation = new LocationViewModel({\r\n                a: mainLocation.lat - LocationViewModel.GRAIN,\r\n                o: mainLocation.lon + LocationViewModel.GRAIN\r\n            });\r\n\r\n\r\n            // s locations\r\n            var sLocation = new LocationViewModel({\r\n                a: mainLocation.lat - LocationViewModel.GRAIN,\r\n                o: mainLocation.lon\r\n            });\r\n            var swLocation = new LocationViewModel({\r\n                a: mainLocation.lat - LocationViewModel.GRAIN,\r\n                o: mainLocation.lon - LocationViewModel.GRAIN\r\n            });\r\n            \r\n\r\n            // w location\r\n            var wLocation = new LocationViewModel({\r\n                a: mainLocation.lat,\r\n                o: mainLocation.lon - LocationViewModel.GRAIN\r\n            });\r\n\r\n            return [\r\n                mainLocation,\r\n                nwLocation,\r\n                nLocation,\r\n                neLocation,\r\n                eLocation,\r\n                seLocation,\r\n                sLocation,\r\n                swLocation,\r\n                wLocation\r\n            ];\r\n        }\r\n        private static roundToNLat(lat: number): number {\r\n\r\n            var roundedLat = LocationViewModel.round1DecimalDigit(lat);\r\n            if (roundedLat < lat) {\r\n                roundedLat += 0.1;\r\n            }\r\n            return roundedLat;\r\n        }\r\n        private static roundToWLon(lon: number): number {\r\n            var roundedLon = LocationViewModel.round1DecimalDigit(lon);\r\n            if (roundedLon > lon) {\r\n                roundedLon -= 0.1;\r\n            }\r\n            return roundedLon;\r\n        }\r\n        private static round1DecimalDigit(n: number): number {\r\n            return Math.round(n * 10) / 10\r\n        }\r\n    }\r\n}","/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\r\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\r\n\r\n\"use strict\";\r\nmodule StopByStop {\r\n    export class ReviewGroupViewModel {\r\n        private _obj: IReviewGroup;\r\n\r\n        constructor(obj: IReviewGroup) {\r\n            this._obj = obj;\r\n            this.name = ko.observable(this._obj.n);\r\n            this.icon = ko.observable(this._obj.i);\r\n            this.reviewCount = ko.observable(this._obj.rc);\r\n            this.reviewPageUrl = ko.observable(this._obj.u);\r\n            this.ratingImageUrl = ko.observable(this._obj.riu);\r\n            this.rating = ko.observable(this._obj.r);\r\n        }\r\n\r\n        public name: KnockoutObservable<string>;\r\n        public icon: KnockoutObservable<string>;\r\n        public reviewCount: KnockoutObservable<number>;\r\n        public reviewPageUrl: KnockoutObservable<string>;\r\n        public ratingImageUrl: KnockoutObservable<string>;\r\n        public rating: KnockoutObservable<number>;\r\n    }\r\n}","/// <reference path=\"../tsdef/jquery.d.ts\"/>\r\n/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\r\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\r\n/// <reference path=\"LocationViewModel.ts\"/>\r\n/// <reference path=\"ReviewGroupViewModel.ts\"/>\r\n/// <reference path=\"FilterViewModel.ts\"/>\r\n\r\n\"use strict\";\r\nmodule StopByStop {\r\n    export class PoiViewModel {\r\n        private _obj: IPoi;\r\n        private _reviewDataItem: IReviewGroup;\r\n\r\n        constructor(obj: IPoi) {\r\n            this._obj = obj;\r\n\r\n            this.id = this._obj.id;\r\n            this.categories = this._obj.c.map((value, index, arr) => AppState.current.metadata.c[value]);\r\n            this.poiType = this._obj.t;\r\n            this.name = this._obj.n;\r\n            this.description = ko.observable(this._obj.d);\r\n            this.location = new LocationViewModel(this._obj.l);\r\n            this.visible = ko.observable(true);\r\n\r\n            this.telPhoneString = this._obj.p;\r\n\r\n            this.isYInfoLoading = ko.observable(true);\r\n            this.isYInfoVisible = ko.observable(true);\r\n            this.yUrl = ko.observable(\"#\");\r\n            this.yStarClass = ko.observable(\"stars_0\");\r\n            this.yReviewCountString = ko.observable(\"\");\r\n        }\r\n\r\n\r\n        public updateYInfo(reviewDataItem: IReviewGroup): void {\r\n            if (reviewDataItem) {\r\n                this.yUrl(reviewDataItem.u);\r\n                this.yStarClass(PoiViewModel.getYStarClass(reviewDataItem.r));\r\n                this.yReviewCountString(PoiViewModel.getReviewsString(reviewDataItem.rc));\r\n                this.isYInfoLoading(false);\r\n                this._reviewDataItem = reviewDataItem;\r\n            } else if (!this._reviewDataItem) {\r\n                this.isYInfoVisible(false);\r\n            }\r\n        }\r\n\r\n\r\n        public categories: IPoiCategory[];\r\n        public id: string;\r\n        public poiType: PoiType;\r\n        public name: string;\r\n        public description: KnockoutObservable<string>;\r\n        public location: LocationViewModel;\r\n        public visible: KnockoutObservable<boolean>;\r\n        public telPhoneString: string;\r\n        public isYInfoLoading: KnockoutObservable<boolean>;\r\n        public isYInfoVisible: KnockoutObservable<boolean>;\r\n\r\n        public yUrl: KnockoutObservable<string>;\r\n        public yStarClass: KnockoutObservable<string>;\r\n        public yReviewCountString: KnockoutObservable<string>;\r\n\r\n\r\n        private static getReviewsString(reviewCount: number): string {\r\n            if (reviewCount === 0) {\r\n                return \"no reviews\";\r\n            } else if (reviewCount === 1) {\r\n                return \"1 review\";\r\n            }\r\n            return reviewCount.toString() + \" reviews\";\r\n        };\r\n\r\n        private static getYStarClass(rating: number): string {\r\n            var starClassName: string = null;\r\n            switch (rating.toString()) {\r\n                case \"5\":\r\n                    starClassName = \"stars_5\";\r\n                    break;\r\n                case \"4.5\":\r\n                    starClassName = \"stars_4_half\";\r\n                    break;\r\n                case \"4\":\r\n                    starClassName = \"stars_4\";\r\n                    break;\r\n                case \"3.5\":\r\n                    starClassName = \"stars_3_half\";\r\n                    break;\r\n                case \"3\":\r\n                    starClassName = \"stars_3\";\r\n                    break;\r\n                case \"2.5\":\r\n                    starClassName = \"stars_2_half\";\r\n                    break;\r\n                case \"2\":\r\n                    starClassName = \"stars_2\";\r\n                    break;\r\n                case \"1.5\":\r\n                    starClassName = \"stars_1_half\";\r\n                    break;\r\n                case \"1\":\r\n                    starClassName = \"stars_1\";\r\n                    break;\r\n                case \"0\":\r\n                    starClassName = \"stars_0\";\r\n                    break;\r\n            }\r\n\r\n            return starClassName;\r\n        }\r\n    }\r\n}   ","/// <reference path=\"../tsdef/jquery.d.ts\"/>\r\n/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\r\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\r\n\r\n\"use strict\";\r\nmodule StopByStop {\r\n    export interface IStopPlace {\r\n        id: string;\r\n        exitId: string;\r\n        name: string;\r\n        lat: number;\r\n        lon: number;\r\n        duration: number;\r\n        /** distance to exit from route start */\r\n        dtefrs: number;\r\n        /** distance from exit */\r\n        dfe: number;\r\n        type: PoiType;\r\n    }\r\n}","/// <reference path=\"../tsdef/jquery.d.ts\"/>\r\n/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\r\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\r\n/// <reference path=\"LocationViewModel.ts\"/>\r\n/// <reference path=\"ReviewGroupViewModel.ts\"/>\r\n/// <reference path=\"PoiViewModel.ts\"/>\r\n/// <reference path=\"IStopPlace.ts\"/>\r\n/// <reference path=\"../Utils.ts\"/>\r\n\r\n\"use strict\";\r\nmodule StopByStop {\r\n    export class PoiOnJunctionViewModel implements IStopPlace {\r\n        private _app: IAppViewModel;\r\n\r\n        constructor(obj: IPoiOnJunction, exit: IRouteJunction, app: IAppViewModel) {\r\n            this.obj = obj;\r\n            this._app = app;\r\n            this.id = this.obj.id;\r\n            this.dfe = this.obj.dfj;\r\n            this.dtefrs = exit.dfrs;\r\n            this.exitId = exit.j.oid.toString();\r\n            this.distanceFromJunctionText = Utils.getMileString(this.dfe) + \" miles from exit\";\r\n            this.poi = new PoiViewModel(this.obj.p);\r\n            this.name = this.poi.name;\r\n            this.lat = this.poi.location.lat;\r\n            this.lon = this.poi.location.lon;\r\n            this.type = obj.p.t;\r\n            this.poiTypeString = PoiType[this.type].toLowerCase();\r\n        }\r\n\r\n        public poiTypeString:string;\r\n        public obj: IPoiOnJunction;\r\n        public id: string;\r\n        public exitId: string;\r\n        public name: string;\r\n        public location: LocationViewModel;\r\n        public dfe: number;\r\n        public dtefrs: number;\r\n        public distanceFromJunctionText: string;\r\n        public poi: PoiViewModel;\r\n        public duration: number;\r\n        public lat: number;\r\n        public lon: number;\r\n        public type: PoiType;\r\n\r\n\r\n        public addToRouteOptionsClick(): void {\r\n            var plannedStop = this._app.routePlan.getOrCreateStop(this);\r\n            this._app.routePlan.showStopSettings(plannedStop);\r\n        }\r\n    }\r\n}   ","/// <reference path=\"../tsdef/jquery.d.ts\"/>\r\n/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\r\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\r\n/// <reference path=\"../Utils.ts\"/>\r\n/// <reference path=\"../Telemetry.ts\"/>\r\n\r\n/// <reference path=\"PoiOnJunctionViewModel.ts\"/>\r\n\r\n\r\n\"use strict\";\r\nmodule StopByStop {\r\n    export class RouteStopViewModel {\r\n\r\n        constructor(stopPlace: IStopPlace) {\r\n            this.stopPlace = stopPlace;\r\n            this.sbsid = stopPlace.id;\r\n            this.location = new LocationViewModel({ a: stopPlace.lat, o: stopPlace.lon });\r\n            this.name = stopPlace.name;\r\n\r\n            this.stopDurationFastUpdate = ko.observable(stopPlace.duration || 15); //default stop time is 15 minutes\r\n\r\n            this.stopDuration = ko.observable(stopPlace.duration || 15); //default stop time is 15 minutes\r\n            \r\n            this.stopDuration.extend({ rateLimit: { timeout: 1000, method: \"notifyWhenChangesStop\" } });\r\n\r\n\r\n            this.exitEta = ko.observable(new Date());\r\n            this.etaString = ko.computed(() => {\r\n                var drivingTimeToPlaceInSeconds = this.getDrivingTimeToPlaceInSeconds();\r\n                var stopEta = new Date(this.exitEta().getTime() + drivingTimeToPlaceInSeconds * 1000);\r\n                var stopEtd = new Date(stopEta.getTime() + this.stopDuration() * 60 * 1000);\r\n                return Utils.getTimeString(stopEta) + \"-\" + Utils.getTimeString(stopEtd);\r\n            });\r\n            this.stopDurationHours = ko.computed(() => {\r\n                var n = (Math.floor(this.stopDurationFastUpdate() / 60)).toString();\r\n                if (n.length === 1) {\r\n                    n = \"0\" + n;\r\n                }\r\n                return n;\r\n            });\r\n\r\n            this.stopDurationMinutes = ko.computed(() => {\r\n                var n = (this.stopDurationFastUpdate() % 60).toString();\r\n                if (n.length === 1) {\r\n                    n = \"0\" + n;\r\n                }\r\n                return n;\r\n            });\r\n\r\n            this.detourDuration = ko.computed(() => {\r\n                var drivigTimeToPlaceInSeconds = this.getDrivingTimeToPlaceInSeconds() * 2;\r\n                var stopDurationInSeconds = this.stopDuration() * 60;\r\n                return drivigTimeToPlaceInSeconds + stopDurationInSeconds;\r\n            });\r\n        }\r\n\r\n        private getDrivingTimeToPlaceInSeconds(): number {\r\n            // for now let's assume 20mph non-highway speed\r\n            return this.stopPlace.dfe / 20 * 3600;\r\n        }\r\n\r\n        public add5MinutesToDuration(): void {\r\n            Telemetry.trackEvent(TelemetryEvent.Add5MinToStop);\r\n            this.stopDurationFastUpdate(this.stopDurationFastUpdate() + 5);\r\n            this.stopDuration(this.stopDurationFastUpdate());\r\n        }\r\n\r\n        public subtract5MinutesFromDuration(): void {\r\n            Telemetry.trackEvent(TelemetryEvent.Remove5MinFromStop);\r\n            this.stopDurationFastUpdate(Math.max(0, this.stopDurationFastUpdate() - 5));\r\n            this.stopDuration(this.stopDurationFastUpdate());\r\n        }\r\n\r\n        public navigate(): void {\r\n            Telemetry.trackEvent(TelemetryEvent.StopPopupNavigateClick, null, null, true);\r\n            if (navigator && navigator.geolocation) {\r\n                navigator.geolocation.getCurrentPosition(\r\n                    (position: Position) => {\r\n\r\n                        var srcLat = position.coords.latitude;\r\n                        var srcLon = position.coords.longitude;\r\n                        var navigationUrl = \"https://maps.google.com/maps?saddr=\"\r\n                            + srcLat + \",\"\r\n                            + srcLon + \"&daddr=\"\r\n                            + this.location.lat.toString() + \",\"\r\n                            + this.location.lon.toString();\r\n\r\n\r\n                        Telemetry.trackEvent(\r\n                            TelemetryEvent.StopPopupNavigateBeforeDirect,\r\n                            [\r\n                                { k: TelemetryProperty.NavigationUrl, v: navigationUrl }\r\n                            ],\r\n                            null,\r\n                            true);\r\n\r\n                        Utils.windowOpen(navigationUrl);\r\n                    },\r\n                    (positionError: PositionError) => {\r\n                        try {\r\n                            Telemetry.trackError(new Error(\"getCurrentPositionError\"));\r\n                        }\r\n                        catch (ex) { }\r\n                        window.alert(\"Please allow StopByStop.com to share your location.\");\r\n                    });\r\n            }\r\n        };\r\n\r\n        public stopDuration: KnockoutObservable<number>;\r\n        public stopDurationFastUpdate: KnockoutObservable<number>;\r\n        public stopDurationHours: KnockoutComputed<string>;\r\n        public stopDurationMinutes: KnockoutComputed<string>;\r\n        public visible: KnockoutComputed<boolean>;\r\n        public roadlineTopOffsetPart: KnockoutComputed<number>;\r\n\r\n\r\n        /** total detour duration in seconds */\r\n        public detourDuration: KnockoutComputed<number>;\r\n        public exitEta: KnockoutObservable<Date>;\r\n        public etaString: KnockoutComputed<string>;\r\n        public sbsid: string;\r\n        public location: LocationViewModel;\r\n        public name: string;\r\n        public stopPlace: IStopPlace;\r\n\r\n    }\r\n}","/// <reference path=\"../tsdef/jquery.d.ts\"/>\r\n/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\r\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\r\n/// <reference path=\"LocationViewModel.ts\"/>\r\n/// <reference path=\"PoiOnJunctionViewModel.ts\"/>\r\n\r\n\"use strict\";\r\nmodule StopByStop {\r\n    export class JunctionViewModel {\r\n        private _obj: IJunction;\r\n        private _app: IAppViewModel;\r\n\r\n        constructor(robj: IRouteJunction, app: IAppViewModel) {\r\n            this._obj = robj.j;\r\n            this._app = app;\r\n\r\n            this.name = this._obj.n;\r\n            this.index = this._obj.i;\r\n            this.osmid = this._obj.oid;\r\n            this.highwayName = this._obj.hn;\r\n            this.ref = this._obj.r;\r\n            this.location = new LocationViewModel(this._obj.l);\r\n            this.exitTo = this._obj.et;\r\n            this.exitToLeft = this._obj.etl;\r\n            this.exitToRight = this._obj.etr;\r\n\r\n            if (this._obj.p) {\r\n                this.pois = ko.observableArray<PoiOnJunctionViewModel>();\r\n\r\n                for (var i = 0; i < this._obj.p.length; i++) {\r\n                    var poiOnJunctionViewModel = new PoiOnJunctionViewModel(this._obj.p[i], robj, this._app);\r\n                    this.pois.push(poiOnJunctionViewModel);\r\n                    //if (poiOnJunctionViewModel.poi.telPhoneString) {\r\n                    //var normalizedPhoneNumberString = JunctionViewModel.normalizePhoneNumber(poiOnJunctionViewModel.poi.telPhoneString);\r\n                    this.poiLookup[this._obj.p[i].id] = poiOnJunctionViewModel;\r\n                    //}\r\n                }\r\n            }\r\n\r\n            this.pois.sort((l, r) => l.dfe - r.dfe);\r\n\r\n            \r\n        }\r\n\r\n        public name: string;\r\n        public index: number;\r\n        public osmid: number;\r\n        public highwayName: string;\r\n        public ref: string;\r\n        public location: LocationViewModel;\r\n        public exitTo: string;\r\n        public exitToLeft: string;\r\n        public exitToRight: string;\r\n        public pois: KnockoutObservableArray<PoiOnJunctionViewModel>;\r\n        public exitName: KnockoutComputed<string>;\r\n        public poiLookup: { [id: string]: PoiOnJunctionViewModel } = {};\r\n        public completeYDataLoad() {\r\n            for (var i = 0; i < this._obj.p.length; i++) {\r\n                this.poiLookup[this._obj.p[i].id].poi.updateYInfo(null);\r\n            }\r\n        }\r\n\r\n        private static normalizePhoneNumber(phoneNumberString) {\r\n            phoneNumberString = phoneNumberString.replace(/[^0-9]/g, \"\");\r\n            phoneNumberString = phoneNumberString.substr(phoneNumberString.length - 10);\r\n            return phoneNumberString;\r\n        }\r\n    }\r\n}","/// <reference path=\"../tsdef/jquery.d.ts\"/>\r\n/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\r\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\r\n/// <reference path=\"JunctionViewModel.ts\"/>\r\n/// <reference path=\"FilterViewModel.ts\"/>\r\n/// <reference path=\"../Utils.ts\"/>\r\n/// <reference path=\"../AppState.ts\"/>\r\n\r\n\"use strict\";\r\nmodule StopByStop {\r\n    export class RouteJunctionPoiTypeViewModel {\r\n        private _rpc: IRootPoiCategory;\r\n        private _junctionViewModel:JunctionViewModel;\r\n\r\n        constructor(rootPoiCategory: IRootPoiCategory, junctionViewModel:JunctionViewModel) {\r\n            this._rpc = rootPoiCategory;\r\n            this.visiblePois = ko.observableArray([]);\r\n            this.closestPoiDistance = ko.observable(\"\");\r\n            this.poiCountString = ko.observable(\"\");\r\n            this._junctionViewModel = junctionViewModel;\r\n            this.poiTypeString = PoiType[rootPoiCategory.t].toLowerCase();\r\n\r\n            this.poiCountStringWithLabel = ko.computed(()=>\r\n            {\r\n                return this.poiCountString()+ \" \" + this._rpc.n + \"(s)\";\r\n            });\r\n        }\r\n\r\n        public poiTypeString: string;\r\n        public visiblePois: KnockoutObservableArray<PoiOnJunctionViewModel>;\r\n        public closestPoiDistance: KnockoutObservable<string>;\r\n        public poiCountString: KnockoutObservable<string>;\r\n        public poiCountStringWithLabel: KnockoutObservable<string>;\r\n\r\n        public update(): void {\r\n\r\n            this.visiblePois.sort((a,b)=>a.dfe-b.dfe);\r\n            this.closestPoiDistance(this.visiblePois().length > 0 ? Utils.getMileString(this.visiblePois()[0].dfe) : \"\");          \r\n            this.poiCountString(this.visiblePois().length > 9 ? \"9+\" : this.visiblePois().length.toString());\r\n        }\r\n\r\n        public navigateToExitPage(): void {\r\n            Utils.spaPageNavigate(\r\n                SBSPage.exit, \r\n                AppState.current.navigationLocation.routeId, \r\n                this._junctionViewModel.osmid.toString(), \r\n                this._rpc.t);\r\n        }\r\n    }\r\n}","/// <reference path=\"../tsdef/jquery.d.ts\"/>\r\n/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\r\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\r\n/// <reference path=\"JunctionViewModel.ts\"/>\r\n/// <reference path=\"FilterViewModel.ts\"/>\r\n/// <reference path=\"RouteJunctionPoiTypeViewModel.ts\"/>\r\n/// <reference path=\"../Utils.ts\"/>\r\n/// <reference path=\"../AppState.ts\"/>\r\n\r\n\"use strict\";\r\nmodule StopByStop {\r\n    export class RouteJunctionViewModel {\r\n\r\n        private _obj: IRouteJunction;\r\n        private _poiTypeViewModelLookup: { [id: number]: RouteJunctionPoiTypeViewModel };\r\n\r\n        constructor(obj: IRouteJunction, routeStartTime: Date, app: IAppViewModel) {\r\n            this._obj = this.routeJunction = obj;\r\n            this.distanceFromRouteStartText = ko.observable(Utils.getMileString(this._obj.dfrs));\r\n            this.junction = new JunctionViewModel(this._obj, app);\r\n            this.visible = ko.observable(true);\r\n            this.top = ko.observable(\"\");\r\n            this.stops = ko.observableArray<RouteStopViewModel>();\r\n            this.poiTypeViewModels = ko.observableArray<RouteJunctionPoiTypeViewModel>();\r\n            this._poiTypeViewModelLookup = {};\r\n\r\n\r\n            this.etaWithoutStops = new Date(routeStartTime.getTime() + this._obj.tfrs * 1000);\r\n            this.eta = ko.observable(this.etaWithoutStops);\r\n            this.hasStops = ko.computed(() => this.stops().length > 0);\r\n\r\n            if ((<AppViewModel>app).title && (<AppViewModel>app).title()) {\r\n                var routeTitle = (<AppViewModel>app).title();\r\n                routeTitle = (routeTitle.substr(0, 1).toLowerCase() + routeTitle.substr(1));\r\n                this.title = this.junction.name + \" on the way from \" + routeTitle;\r\n            }\r\n\r\n            var rootPoiCategories = AppState.current.metadata.rpc;\r\n            for (var rpcId in rootPoiCategories) {\r\n                var rpc = rootPoiCategories[rpcId];\r\n                var vm = new RouteJunctionPoiTypeViewModel(rpc, this.junction);\r\n                this.poiTypeViewModels.push(vm);\r\n                this._poiTypeViewModelLookup[rpc.t] = vm;\r\n            }\r\n\r\n            this.description = ko.computed(() => {\r\n                var d = this.junction.name + \". \";\r\n                $.each(this.poiTypeViewModels(), (i, item) => {\r\n                    d += \" \" + item.poiCountStringWithLabel();\r\n                });\r\n                d += \" within 5 mile travel distance\";\r\n                return d;\r\n            });\r\n\r\n            this.etaString = ko.computed(() => {\r\n                var s = Utils.getTimeString(this.eta());\r\n                if (this.hasStops()) {\r\n                    s = Utils.getTimeString(this.eta()) + \"-\" + Utils.getTimeString(this.etd());\r\n                }\r\n                return s;\r\n            });\r\n\r\n            this.etd = ko.computed(() => {\r\n                var totalDetourTime = 0;\r\n                for (var i = 0; i < this.stops().length; i++) {\r\n                    totalDetourTime += this.stops()[i].detourDuration();\r\n                }\r\n                return new Date(this.eta().getTime() + totalDetourTime * 1000);\r\n            });\r\n        }\r\n\r\n        public poiTypeViewModels: KnockoutObservableArray<RouteJunctionPoiTypeViewModel>;\r\n        public routeJunction: IRouteJunction;\r\n        public distanceFromRouteStartText: KnockoutObservable<string>;\r\n        public junction: JunctionViewModel;\r\n        public visible: KnockoutObservable<boolean>;\r\n        public top: KnockoutObservable<string>;\r\n        public title: string;\r\n        public stops: KnockoutObservableArray<RouteStopViewModel>;\r\n\r\n        public etaWithoutStops: Date;\r\n        public eta: KnockoutObservable<Date>;\r\n        public etaString: KnockoutComputed<string>;\r\n        public etd: KnockoutComputed<Date>;\r\n        public hasStops: KnockoutComputed<boolean>;\r\n        public description: KnockoutComputed<string>;\r\n\r\n        public onPoiVisibilityUpdated(): boolean {\r\n            $.each(this.poiTypeViewModels(), (i, item) => { item.visiblePois.removeAll(); });\r\n            var junctionVisibilityChanged = false;\r\n            var visible = false;\r\n            for (var i = 0; i < this.junction.pois().length; i++) {\r\n                var poi = this.junction.pois()[i];\r\n                if (poi.obj.v === undefined || poi.obj.v === true) {\r\n                    this._poiTypeViewModelLookup[poi.type].visiblePois.push(poi);\r\n                    visible = true;\r\n                }\r\n            }\r\n\r\n            $.each(this.poiTypeViewModels(), (i, item) => { item.update(); });\r\n            junctionVisibilityChanged =  this.visible() !== visible;\r\n            this.visible(visible);\r\n            return junctionVisibilityChanged;\r\n        }\r\n\r\n        public navigateToExitPage(): void {\r\n            Utils.spaPageNavigate(SBSPage.exit, AppState.current.navigationLocation.routeId, this.junction.osmid.toString());\r\n        }\r\n    }\r\n}","/// <reference path=\"../tsdef/jquery.d.ts\"/>\r\n/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\r\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\r\n/// <reference path=\"../Utils.ts\"/>\r\n/// <reference path=\"../Telemetry.ts\"/>\r\n/// <reference path=\"../AppState.ts\"/>\r\n\r\n/// <reference path=\"RouteStopViewModel.ts\"/>\r\n/// <reference path=\"RouteJunctionViewModel.ts\"/>\r\n\r\n\r\n\"use strict\";\r\nmodule StopByStop {\r\n\r\n    export interface IRoutePlan {\r\n        stops: { [id: string]: IStopPlace };\r\n    };\r\n\r\n    export class RoutePlanViewModel {\r\n        private _stopDictionary: { [id: string]: RouteStopViewModel } = {};\r\n        private _storage: Storage = window.sessionStorage;\r\n        private _storageItem: { [id: string]: IRoutePlan } = {};\r\n        private _routeId: string;\r\n        private _destination: LocationViewModel;\r\n\r\n        constructor(routeId: string, routeDistance: number, destination: LocationViewModel, storageOverride: Storage = null) {\r\n            this.routeDistance = routeDistance;\r\n            this._storage = storageOverride || window.sessionStorage;\r\n            this._routeId = routeId;\r\n            this.stops = ko.observableArray([]);\r\n            this.editedStop = ko.observable<RouteStopViewModel>(null);\r\n            this._stopDictionary = {};\r\n            this._destination = destination;\r\n        }\r\n\r\n        public loadStopsFromStorage(): void {\r\n            this.stops([]);\r\n            this._stopDictionary = {};\r\n            if (this._storage.getItem(ROUTE_PLAN_STORAGE_KEY)) {\r\n                this._storageItem = JSON.parse(this._storage.getItem(ROUTE_PLAN_STORAGE_KEY));\r\n            } else {\r\n                this._storageItem = {};\r\n            }\r\n\r\n            if (!this._storageItem[this._routeId]) {\r\n                this._storageItem[this._routeId] = { stops: {} };\r\n            } else {\r\n                var stops = this._storageItem[this._routeId].stops;\r\n\r\n                for (var id in stops) {\r\n                    var routeStopViewModel = this.getOrCreateStop(stops[id]);\r\n                    this.addStopToRoute(routeStopViewModel, true);\r\n                }\r\n            }\r\n\r\n            this.saveRouteToStorage();\r\n        }\r\n\r\n        public junctionMap: { [id: string]: RouteJunctionViewModel } = {};\r\n        public routeDistance: number;\r\n        public stops: KnockoutObservableArray<RouteStopViewModel>;\r\n        public editedStop: KnockoutObservable<RouteStopViewModel>;\r\n\r\n        public getOrCreateStop(placeObj: IStopPlace, reloadFromCache: boolean = false): RouteStopViewModel {\r\n            \r\n            /* Ensure that object only contains members that are part of IStopPlace interface,\r\n               as this is about to be serialized. Is there a better way to do it? */\r\n\r\n            var place: IStopPlace = {\r\n                dfe: placeObj.dfe,\r\n                dtefrs: placeObj.dtefrs,\r\n                duration: placeObj.duration,\r\n                exitId: placeObj.exitId,\r\n                id: placeObj.id,\r\n                lat: placeObj.lat,\r\n                lon: placeObj.lon,\r\n                name: placeObj.name,\r\n                type: placeObj.type\r\n            };\r\n\r\n            var sbsid = place.id;\r\n\r\n            if (!this._stopDictionary[sbsid]) {\r\n                var routeStopViewModel = new RouteStopViewModel(place);\r\n                this._stopDictionary[sbsid] = routeStopViewModel;\r\n            }\r\n\r\n            var stop = this._stopDictionary[sbsid];\r\n            return stop;\r\n        }\r\n\r\n        public addEditedStopToRoute():void {\r\n            this.addStopToRoute(this.editedStop());\r\n            Utils.spaPageNavigate(\r\n                SBSPage.route,\r\n                AppState.current.navigationLocation.routeId);\r\n        }\r\n\r\n        public removeEditedStop():void {\r\n            this.removeStop(this.editedStop());\r\n            this.closeStopSettings();\r\n        }\r\n\r\n        public navigateToEditedStop(): void {\r\n            this.editedStop().navigate();\r\n        }\r\n\r\n        public addStopToRoute(routeStopViewModel: RouteStopViewModel, reloadFromCache: boolean = false): void {\r\n            Telemetry.trackEvent(TelemetryEvent.AddStopToRoute, [{ k: TelemetryProperty.LoadStopsFromCache, v: reloadFromCache.toString() }]);\r\n\r\n\r\n            var place = routeStopViewModel.stopPlace;\r\n\r\n            // only add it to stops if it is not already in the collection\r\n            var alreadyAdded = false;\r\n            $.each(this.stops(), (index: number, value: RouteStopViewModel) => {\r\n                if (value.sbsid === place.id) {\r\n                    alreadyAdded = true;\r\n                }\r\n            });\r\n\r\n            if (!alreadyAdded) {\r\n                this.stops.push(this._stopDictionary[place.id]);   \r\n                var routeJunctionViewModel = this.junctionMap[place.exitId];\r\n\r\n                if (routeJunctionViewModel) {\r\n                    routeJunctionViewModel.stops.push(routeStopViewModel);\r\n                } else {\r\n                    Telemetry.trackError(new Error(\"RouteStopViewModel.addStopToRoute.0\"), null, null);                      \r\n                }\r\n\r\n                              \r\n                if (AppState.current.app === SBSApp.Web) {\r\n                    // legacy path: we'll remove it completely, once fully migrated to SPA mode\r\n                    // add to stop collection bound to UI\r\n                    if (AppState.current.pageInfo.pageName === \"route-page\") {\r\n                        var routeJunctionViewModel = this.junctionMap[place.exitId];\r\n                        if (routeJunctionViewModel) {\r\n                            routeJunctionViewModel.stops.push(routeStopViewModel);\r\n                        }\r\n                        else {\r\n                            alert(\"Couldn't find routeJunctionViewModel\");\r\n                        }\r\n                    }\r\n\r\n                    // update storage item for persistence\r\n                    place.duration = routeStopViewModel.stopDuration();\r\n\r\n                    this._storageItem[this._routeId].stops[place.id] = place;\r\n              \r\n                    // subscribe for duration updates\r\n                    routeStopViewModel.stopDuration.subscribe((newValue: number) => {\r\n                        this._storageItem[this._routeId].stops[place.id].duration = newValue;\r\n                        this.saveRouteToStorage();\r\n\r\n                    });\r\n\r\n                    this.saveRouteToStorage();\r\n                }\r\n            }\r\n        }\r\n\r\n        public removeStop(stop: RouteStopViewModel) {\r\n            Telemetry.trackEvent(TelemetryEvent.RemoveStopFromRoute);\r\n            var sbsid = stop.sbsid;\r\n\r\n            if (this._stopDictionary[sbsid]) {\r\n                var stop = this._stopDictionary[sbsid];\r\n                this.stops.remove(stop);\r\n\r\n                var routeJunctionViewModel = this.junctionMap[stop.stopPlace.exitId];\r\n                if (routeJunctionViewModel) {\r\n                    routeJunctionViewModel.stops.remove(stop);\r\n                }\r\n\r\n                delete this._stopDictionary[sbsid];\r\n\r\n                if (AppState.current.app === SBSApp.Web) {\r\n                    delete this._storageItem[this._routeId].stops[sbsid];\r\n                    this.saveRouteToStorage();\r\n                }\r\n            }\r\n        }\r\n\r\n        public showStopSettings(plannedStop: RouteStopViewModel): void {\r\n            Telemetry.trackEvent(TelemetryEvent.ShowStopSettingsPopup);\r\n            this.editedStop(plannedStop);\r\n\r\n            var stopSettingsDialog = AppState.current.app === SBSApp.SPA ?\r\n                $(\".\" + AppState.current.pageInfo.pageName + \" .stop-settings-dialog\") :\r\n                $(\"#stopSettingsDialog\");\r\n\r\n            stopSettingsDialog.on('popupafteropen', function () {\r\n                var hCenter = ($(window).width() - stopSettingsDialog.width()) / 2;\r\n                var vCenter = ($(window).height() - stopSettingsDialog.height()) / 2;\r\n                $('.ui-popup-container').css({\r\n                    top: vCenter,\r\n                    left: hCenter,\r\n                    position: \"fixed\"\r\n                });\r\n            });\r\n\r\n\r\n            stopSettingsDialog.popup({\r\n                transition: \"slidedown\",\r\n                corners: true\r\n            });\r\n\r\n            (<any>ko).tasks.runEarly();\r\n\r\n            stopSettingsDialog.trigger(\"create\");\r\n            stopSettingsDialog.popup(\"open\");\r\n        }\r\n\r\n        private closeStopSettings() {\r\n            var stopSettingsDialog = AppState.current.app === SBSApp.SPA ?\r\n                $(\".\" + AppState.current.pageInfo.pageName + \" .stop-settings-dialog\") :\r\n                $(\"#stopSettingsDialog\");\r\n            stopSettingsDialog.popup(\"close\");\r\n        }\r\n\r\n        public navigate(): void {\r\n            Telemetry.trackEvent(TelemetryEvent.RoutePlanNavigateClick, null, null, true);\r\n            if (this._destination && navigator && navigator.geolocation) {\r\n                navigator.geolocation.getCurrentPosition(\r\n                    (position: Position) => {\r\n\r\n                        var srcLat = position.coords.latitude;\r\n                        var srcLon = position.coords.longitude;\r\n\r\n                        var daddrStr = \"\";\r\n                        for (var i = 0; i < this.stops().length; i++) {\r\n                            if (i > 0) {\r\n                                daddrStr += \"+to:\";\r\n                            }\r\n                            daddrStr += (this.stops()[i].location.lat + \",\" + this.stops()[i].location.lon);\r\n                        }\r\n\r\n                        if (daddrStr !== \"\") {\r\n                            daddrStr += \"+to:\";\r\n                        }\r\n\r\n                        daddrStr += this._destination.lat + \",\" + this._destination.lon;\r\n                        var navigationUrl = \"https://maps.google.com/maps?saddr=\"\r\n                            + srcLat + \",\"\r\n                            + srcLon + \"&daddr=\"\r\n                            + daddrStr;\r\n\r\n                        Telemetry.trackEvent(\r\n                            TelemetryEvent.RoutePlanNavigateBeforeDirect,\r\n                            [\r\n                                { k: TelemetryProperty.StopCount, v: this.stops().length.toString() },\r\n                                { k: TelemetryProperty.NavigationUrl, v: navigationUrl }\r\n                            ],\r\n                            null,\r\n                            true);\r\n\r\n                        Utils.windowOpen(navigationUrl);\r\n\r\n                    },\r\n                    (positionError: PositionError) => {\r\n                        Telemetry.trackError(new Error(\"getCurrentPositionError\"));\r\n                        window.alert(\"Please allow StopByStop.com to share your location.\");\r\n                    });\r\n            }\r\n        };\r\n\r\n        private saveRouteToStorage(): void {\r\n            if (AppState.current.app === SBSApp.Web) {\r\n                this._storage.setItem(ROUTE_PLAN_STORAGE_KEY, JSON.stringify(this._storageItem));\r\n            }\r\n        }\r\n    }\r\n}","/// <reference path=\"../tsdef/jquery.d.ts\"/>\r\n/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\r\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\r\n\r\n/// <reference path=\"FilterViewModel.ts\"/>\r\n/// <reference path=\"RouteStopViewModel.ts\"/>\r\n/// <reference path=\"RoutePlanViewModel.ts\"/>\r\n\r\n\"use strict\";\r\nmodule StopByStop {\r\n    export interface IAppViewModel {\r\n        filter: FilterViewModel;\r\n        routePlan: RoutePlanViewModel;\r\n    }\r\n}","/// <reference path=\"../tsdef/jquery.d.ts\"/>\r\n/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\r\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\r\n/// <reference path=\"JunctionViewModel.ts\"/>\r\n/// <reference path=\"LocationViewModel.ts\"/>\r\n/// <reference path=\"../Utils.ts\"/>\r\n\r\n\"use strict\";\r\nmodule StopByStop {\r\n    export class RouteSegmentViewModel {\r\n        private static SEGMENT_INITIAL_SPACE = 7;\r\n        private static SPACE_FOR_JUNCTION = 8;\r\n\r\n        private _obj: IRouteSegment;\r\n        private _app: IAppViewModel;\r\n\r\n        constructor(obj: IRouteSegment, routeStartTime: Date, app: IAppViewModel) {\r\n            this._obj = obj;\r\n            this._app = app;\r\n\r\n            this.highwayNameText = ko.observable(\"\");\r\n\r\n            if (this._obj.r) {\r\n                this.highwayNameText(this._obj.r);\r\n                if (this._obj.hn && this._obj.hn !== this._obj.r) {\r\n                    this.highwayNameText(this._obj.r + \" - \" + this._obj.hn);\r\n                }\r\n            }\r\n            else {\r\n                if (this._obj.hn) {\r\n                    this.highwayNameText(this._obj.hn);\r\n                } else {\r\n                    /* this was setting it to \"unnamed highway\" before */\r\n                    this.highwayNameText(\"\");\r\n                }\r\n            }\r\n\r\n            this.start = ko.observable(new LocationViewModel(this._obj.s));\r\n            this.end = ko.observable(new LocationViewModel(this._obj.e));\r\n            this.distance = ko.observable(this._obj.d);\r\n            this.routeJunctions = [];\r\n\r\n            if (this._obj.j) {\r\n                for (var i = 0; i < this._obj.j.length; i++) {\r\n                    var routeJunctionViewModel = new RouteJunctionViewModel(this._obj.j[i], routeStartTime, this._app);\r\n                    this._app.routePlan.junctionMap[routeJunctionViewModel.junction.osmid.toString()] = routeJunctionViewModel;\r\n                    this.routeJunctions.push(routeJunctionViewModel);\r\n                }\r\n            }\r\n\r\n            this.routeVisibleJunctions = ko.observableArray([]);\r\n            this.portionCompleted = ko.observable(this._obj.pc);\r\n            this.startIndex = ko.observable(this._obj.si);\r\n            this.endIndex = ko.observable(this._obj.ei);\r\n\r\n\r\n            this.height = ko.computed(() => {\r\n                return (this.routeVisibleJunctions().length *\r\n                    RouteSegmentViewModel.SPACE_FOR_JUNCTION +\r\n                    RouteSegmentViewModel.SEGMENT_INITIAL_SPACE).toString() + \"em\";\r\n            });\r\n\r\n            this.distanceText = ko.computed(() => {\r\n                return Utils.getMileString(this.distance());\r\n            });\r\n\r\n            this.maneuver = this._obj.m;\r\n            this.instructions = this._obj.i || \"\";\r\n            this.instructionsTip = this.instructions.replace(/(<([^>]+)>)/ig, \"\");\r\n        }\r\n\r\n\r\n\r\n        public highwayName: KnockoutObservable<string>;\r\n        public ref: KnockoutObservable<string>;\r\n        public start: KnockoutObservable<LocationViewModel>;\r\n        public end: KnockoutObservable<LocationViewModel>;\r\n        public distance: KnockoutObservable<number>;\r\n        public routeJunctions: RouteJunctionViewModel[];\r\n        public routeVisibleJunctions: KnockoutObservableArray<RouteJunctionViewModel>;\r\n        public portionCompleted: KnockoutObservable<number>;\r\n        public startIndex: KnockoutObservable<number>;\r\n        public endIndex: KnockoutObservable<number>;\r\n        public height: KnockoutComputed<string>;\r\n        public distanceText: KnockoutComputed<string>;\r\n        public highwayNameText: KnockoutObservable<string>;\r\n        public maneuver: string;\r\n        public instructions: string;\r\n        public instructionsTip: string;\r\n\r\n        public onJunctionVisibilityUpdated(): void {\r\n            this.routeVisibleJunctions.removeAll();\r\n            var visibleJunctionIndex = 0;\r\n            for (var i = 0; i < this.routeJunctions.length; i++) {\r\n                var junction = this.routeJunctions[i];\r\n\r\n                if (junction.visible()) {\r\n                    this.routeVisibleJunctions.push(junction);\r\n                    junction.top((RouteSegmentViewModel.SEGMENT_INITIAL_SPACE + visibleJunctionIndex\r\n                        * RouteSegmentViewModel.SPACE_FOR_JUNCTION).toString() + \"em\");\r\n                    visibleJunctionIndex++;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}","/// <reference path=\"../tsdef/jquery.d.ts\"/>\r\n/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\r\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\r\n/// <reference path=\"../Telemetry.ts\"/>\r\n\r\n/// <reference path=\"LocationViewModel.ts\"/>\r\n/// <reference path=\"RouteSegmentViewModel.ts\" />\r\n/// <reference path=\"FilterViewModel.ts\" />\r\n/// <reference path=\"RoutePlanViewModel.ts\" />\r\n\r\n\r\n\"use strict\";\r\n\r\nmodule StopByStop {\r\n    export class SideBarStopViewModel {\r\n        public stop: RouteStopViewModel;\r\n        public top: KnockoutObservable<string>;\r\n        public left: KnockoutObservable<string>;\r\n        public poiTypeClass: string;\r\n        public routePlan: RoutePlanViewModel;\r\n\r\n        constructor(stop: RouteStopViewModel, routePlan: RoutePlanViewModel) {\r\n            this.stop = stop;\r\n            this.routePlan = routePlan;\r\n            this.poiTypeClass = PoiType[stop.stopPlace.type];\r\n            this.top = ko.observable(\"\");\r\n            this.left = ko.observable(\"\");\r\n        }\r\n\r\n        public click(): void {\r\n            this.routePlan.showStopSettings(this.stop);\r\n        }\r\n    }\r\n\r\n    export class SideBarViewModel {\r\n        private _headerHeight: number = 0;\r\n        private _footerHeight: number = 0;\r\n        private _thumbHeight: number = 0;\r\n        private _scrollProcessingScheduled: boolean = false;\r\n        private _thumbPageY: number = null;\r\n        private _thumbTopAtDragStart = 0;\r\n        private _self: SideBarViewModel;\r\n        private _routePlanViewModel: RoutePlanViewModel;\r\n        private _portionOfRouteScrolled: number;\r\n        private _routeViewModel: RouteViewModel;\r\n        private _routeContentSelector = \".route-page .ui-content\";\r\n\r\n        private _sideBarInit = Utils.runOnce(() => {\r\n            $(\"#sidebar-thumb\").unbind();\r\n            $(this._routeContentSelector).unbind();\r\n\r\n            $(\"#sidebar-thumb\").bind(\"touchstart mousedown\", (e) => {\r\n                this.onTouchStart(e);\r\n            });\r\n\r\n            $(\"#sidebar-thumb\").bind(\"touchend mouseup\", (e) => {\r\n                this.onTouchEnd(e);\r\n            });\r\n\r\n            $(this._routeContentSelector).bind(\"mousemove\", (e) => {\r\n                this.onTouchMove(e, e.pageY);\r\n            });\r\n\r\n            $(this._routeContentSelector).bind(\"touchmove\", (e) => {\r\n                this.onTouchMove(e, e.originalEvent[\"touches\"][0].pageY);\r\n            });\r\n\r\n\r\n            if (AppState.current.app === SBSApp.Web) {\r\n                this._headerHeight = $(\".ui-header\").outerHeight();\r\n                this._footerHeight = $(\".ui-footer\").outerHeight();\r\n            } else {\r\n                // we have multiple copies of header and footer on SPA app\r\n                this._headerHeight = $(\".\" + AppState.current.pageInfo.pageName + \" .ui-header\").outerHeight();\r\n                this._footerHeight = $(\".\" + AppState.current.pageInfo.pageName + \" .ui-footer\").outerHeight();\r\n            }\r\n\r\n            this.sideBarHeight($(window).height());\r\n            this.sideBarInnerHeight($(window).height());\r\n            this.sideBarInnerTop($(\".sidebar-top\").outerHeight());\r\n        });\r\n\r\n        private _sideBarFirstScrollInit = Utils.runOnce(this.sideBarFirstScrollInit.bind(this));\r\n        private static _recalcOnWindowResize;\r\n\r\n        public sideBarHeight: KnockoutObservable<number> = ko.observable(0);\r\n        public sideBarInnerHeight: KnockoutObservable<number> = ko.observable(0);\r\n        public sideBarInnerTop: KnockoutObservable<number> = ko.observable(0);\r\n        public sideBarPosition: KnockoutObservable<string> = ko.observable(\"absolute\");\r\n        public sideBarTop: KnockoutObservable<string> = ko.observable(\"40px\");\r\n        public sideBarBottom: KnockoutObservable<string> = ko.observable(\"\");\r\n        public sideBarThumbTop: KnockoutObservable<string> = ko.observable(\"0px\");\r\n        public isDraggingThumb: KnockoutObservable<boolean> = ko.observable(false);\r\n        public stops: KnockoutObservableArray<SideBarStopViewModel>;\r\n\r\n\r\n\r\n        constructor(routePlan: RoutePlanViewModel, routeViewModel: RouteViewModel, initSettings: IAppState) {\r\n            this.stops = ko.observableArray<SideBarStopViewModel>([]);\r\n            this._routePlanViewModel = routePlan;\r\n            this._routeViewModel = routeViewModel;\r\n\r\n\r\n            $(document).scroll(() => {\r\n\r\n                if (!this._scrollProcessingScheduled) {\r\n                    window.setTimeout(() => {\r\n                        this.onScroll();\r\n                        this._scrollProcessingScheduled = false;\r\n                    }, 20);\r\n                    this._scrollProcessingScheduled = true;\r\n                }\r\n\r\n            });\r\n\r\n            // in web app, run postInit, right away\r\n            // in Cordova app it will be called in postRender\r\n            if (initSettings.app === SBSApp.Web) {\r\n                this.postInit();\r\n            }\r\n        }\r\n\r\n        public postInit() {\r\n            this._sideBarInit();\r\n        }\r\n\r\n        public recalculatePosition() {\r\n            SideBarViewModel.recalculateSideBarPosition(this);\r\n        }\r\n\r\n        private onTouchStart(eventObject: JQueryMouseEventObject) {\r\n            Telemetry.trackEvent(TelemetryEvent.SideBarThumbTouch);\r\n            this.isDraggingThumb(true);\r\n            this._thumbTopAtDragStart = parseInt(this.sideBarThumbTop());;\r\n            eventObject.preventDefault();\r\n        };\r\n\r\n        private onTouchEnd(eventObject: JQueryMouseEventObject): void {\r\n            if (this.isDraggingThumb()) {\r\n                this._thumbPageY = null;\r\n                this.isDraggingThumb(false);\r\n                var thumbTop = parseInt(this.sideBarThumbTop());\r\n                var pixelsScrolled = thumbTop - this._thumbTopAtDragStart;\r\n                var routePixelsScrolled = ($(\".route\").innerHeight() / (this.sideBarInnerHeight() - this._thumbHeight)) * pixelsScrolled;\r\n\r\n                window.scrollBy(0, routePixelsScrolled);\r\n                eventObject.preventDefault();\r\n            }\r\n        };\r\n\r\n        private onTouchMove(e: JQueryMouseEventObject, pageY: number): void {\r\n            if (this.isDraggingThumb()) {\r\n                if (this._thumbPageY) {\r\n                    var oldThumbTop = parseInt(this.sideBarThumbTop());\r\n                    var newThumbTop = oldThumbTop + (pageY - this._thumbPageY);\r\n                    newThumbTop = Math.max(0, newThumbTop);\r\n                    newThumbTop = Math.min(this.sideBarInnerHeight() - this._thumbHeight, newThumbTop);\r\n\r\n                    this.sideBarThumbTop(newThumbTop.toString() + \"px\");\r\n\r\n                }\r\n                this._thumbPageY = pageY;\r\n                e.preventDefault();\r\n\r\n            }\r\n        }\r\n\r\n        private onScroll(): void {\r\n            this._sideBarFirstScrollInit();\r\n            var documentScrollTop = $(document).scrollTop();\r\n            var routeOffsetTop = $(this._routeContentSelector).offset().top;\r\n\r\n            if (documentScrollTop > routeOffsetTop) {\r\n                this.sideBarPosition(\"fixed\");\r\n\r\n                this.sideBarTop(\"\");\r\n                this.sideBarBottom((this._footerHeight + 1).toString() + \"px\");\r\n\r\n                this._portionOfRouteScrolled = Math.min(1.0, (documentScrollTop - routeOffsetTop) /\r\n                    ($(\".route\").innerHeight() - $(window).height() - this._footerHeight));\r\n\r\n                this.recalcThumbPosition();\r\n\r\n            } else {\r\n                this.sideBarPosition(\"absolute\");\r\n                this.sideBarTop(\"40px\");\r\n                this.sideBarBottom(\"\");\r\n                this.sideBarThumbTop(\"0px\");\r\n            }\r\n\r\n            (<any>ko).tasks.runEarly();\r\n        }\r\n\r\n        private recalcThumbPosition(): void {\r\n            this.sideBarThumbTop(((this.sideBarInnerHeight() - this._thumbHeight) * this._portionOfRouteScrolled).toString() + \"px\");\r\n        }\r\n\r\n        private sideBarFirstScrollInit(): void {\r\n            Telemetry.trackEvent(TelemetryEvent.RoutePageScroll);\r\n            SideBarViewModel.recalculateSideBarPosition(this);\r\n\r\n            // check if there's already a resize handle attached from the previous instance of SideBarViewModel\r\n            // if so, detach it\r\n            if (SideBarViewModel._recalcOnWindowResize) {\r\n                $(window).off(\"resize\", SideBarViewModel._recalcOnWindowResize);\r\n            }\r\n\r\n            SideBarViewModel._recalcOnWindowResize = SideBarViewModel.recalculateSideBarPosition.bind(null, this);\r\n            $(window).on(\"resize\", SideBarViewModel._recalcOnWindowResize);\r\n\r\n\r\n\r\n            this._routePlanViewModel.stops.subscribe(() => this.updateStopsOnSidebar());\r\n            this._routeViewModel.roadLineHeight.subscribe(() => this.updateStopsOnSidebar());\r\n        }\r\n\r\n\r\n\r\n        private updateStopsOnSidebar(): void {\r\n            this.stops.removeAll();\r\n\r\n            var sideBarStopItems = $.map(this._routePlanViewModel.stops(),\r\n                (elementOfArray: RouteStopViewModel, indexInArray: number) => new SideBarStopViewModel(elementOfArray, this._routePlanViewModel));\r\n\r\n            if (sideBarStopItems.length > 0 && Utils.hasAnyOwnProperties(this._routeViewModel.routeJunctionElementLookup)) {\r\n                // sort by distance to exit from route start. This is so that we can render exits belonging to the same exit\r\n                // next to each other\r\n                sideBarStopItems.sort((a, b) => a.stop.stopPlace.dtefrs - b.stop.stopPlace.dtefrs);\r\n\r\n                var currentExitId = \"\";\r\n                var currentIndexOnThisExit = 0;\r\n\r\n                for (var i = 0; i < sideBarStopItems.length; i++) {\r\n                    var sideBarStopViewModel = sideBarStopItems[i];\r\n                    var poiExitId = sideBarStopViewModel.stop.stopPlace.exitId;\r\n\r\n                    if (!this._routeViewModel.routeJunctionElementLookup[poiExitId]) {\r\n                        continue;\r\n                    }\r\n\r\n                    if (poiExitId === currentExitId) {\r\n                        currentIndexOnThisExit++;\r\n                    }\r\n                    else {\r\n                        currentIndexOnThisExit = 0;\r\n                        currentExitId = poiExitId;\r\n                    }\r\n\r\n                    /*\r\n                    routeDistance    sideBarInnerHeight\r\n                    -------------- = ---------------------  =>\r\n                    distanceToExit          x\r\n                          sideBarInnerHeight*distanceToExit\r\n                    x = --------------------------------------------\r\n                          routeDistance\r\n                    */\r\n\r\n\r\n                    /* available height is slightly smaller because we don't want POI to overlap with ETA time */\r\n                    /* this is to address Bug 126: Sidebar - location of chosen POIs on the sidebar */\r\n                    var sideBarAvailableHeight = this.sideBarInnerHeight() - 32;\r\n\r\n                    var distanceToExitInPixels =\r\n                        (sideBarAvailableHeight * this._routeViewModel.routeJunctionElementLookup[poiExitId].top * 1.15 /\r\n                            this._routeViewModel.roadLineHeight());\r\n\r\n                    sideBarStopViewModel.top((distanceToExitInPixels).toString() + \"px\");\r\n\r\n\r\n\r\n                    sideBarStopViewModel.left((-28 + currentIndexOnThisExit * 8).toString() + \"px\"); /* 28 is another magic constant */\r\n                    this.stops.push(sideBarStopViewModel);\r\n                }\r\n\r\n\r\n            }\r\n            // Telemetry.logToConsole(sideBarStopItems.length.toString() + \" stops on sidebar updated\");\r\n        }\r\n\r\n        private static recalculateSideBarPosition(sbvm: SideBarViewModel): void {\r\n\r\n\r\n            if (AppState.current.app === SBSApp.Web) {\r\n                sbvm._headerHeight = $(\".ui-header\").outerHeight();\r\n                sbvm._footerHeight = $(\".ui-footer\").outerHeight();\r\n            } else {\r\n                // we have multiple copies of header and footer on SPA app\r\n                sbvm._headerHeight = $(\".\" + AppState.current.pageInfo.pageName + \" .ui-header\").outerHeight();\r\n                sbvm._footerHeight = $(\".\" + AppState.current.pageInfo.pageName + \" .ui-footer\").outerHeight();\r\n            }\r\n\r\n\r\n            sbvm._thumbHeight = $(\"#sidebar-thumb\").outerHeight();\r\n\r\n            var sidebarTopInfoHeight = $(\".sidebar-top\").outerHeight();\r\n            var sidebarBottomInfoHeight = $(\".sidebar-bottom\").outerHeight();\r\n\r\n            var windowHeight = window.innerHeight ? window.innerHeight : $(window).height();;\r\n            var sideBarHeightPixels = windowHeight - sbvm._headerHeight - sbvm._footerHeight;\r\n            var sideBarInnerHeightPixels = sideBarHeightPixels - sidebarBottomInfoHeight - sidebarTopInfoHeight;\r\n\r\n            sbvm.sideBarHeight(sideBarHeightPixels);\r\n            sbvm.sideBarInnerHeight(sideBarInnerHeightPixels);\r\n            sbvm.sideBarInnerTop(sidebarTopInfoHeight);\r\n            sbvm.recalcThumbPosition();\r\n            sbvm.updateStopsOnSidebar();\r\n        }\r\n    }\r\n}","/// <reference path=\"../tsdef/jquery.d.ts\"/>\r\n/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\r\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\r\n\r\n/// <reference path=\"LocationViewModel.ts\"/>\r\n/// <reference path=\"RouteSegmentViewModel.ts\" />\r\n/// <reference path=\"FilterViewModel.ts\" />\r\n/// <reference path=\"SideBarViewModel.ts\" />\r\n\r\n\"use strict\";\r\nmodule StopByStop {\r\n    export class RouteViewModel {\r\n        private _route: IRoute;\r\n        private _app: IAppViewModel;\r\n        private _routeStartTime: Date;\r\n        private _stopDurationSubscriptions: KnockoutSubscription[] = [];\r\n        private _routeInitializationComplete: () => void;\r\n        private _filter: FilterViewModel;\r\n        private _junctionElementCount: number = 0;\r\n        private _subscribedForBoundElement: boolean = false;\r\n\r\n        public routeJunctionElementLookup: { [id: string]: { top: number } } = {};\r\n        public roadLineHeight: KnockoutObservable<number> = ko.observable(0);\r\n\r\n\r\n        constructor(route: IRoute, app: IAppViewModel, initSettings: IAppState, routeInitializationComplete: () => void) {\r\n            this._route = this.route = route;\r\n            this._app = app;\r\n            this._routeInitializationComplete = routeInitializationComplete;\r\n\r\n\r\n            this.sideBar = new SideBarViewModel(app.routePlan, this, initSettings);\r\n            this.fromLocation = new LocationViewModel(this._route.fl);\r\n            this.toLocation = new LocationViewModel(this._route.tl);\r\n\r\n\r\n            this.currentLocation = ko.observable(new LocationViewModel(this._route.cl));\r\n            this._routeStartTime = new Date();\r\n\r\n            this.startTimeString = ko.observable(Utils.getTimeString(this._routeStartTime));\r\n            this.etaString = ko.observable(Utils.getTimeString(this._routeStartTime, this._route.t * 1000));\r\n            this.tripTimeHours = ko.observable(Utils.getHours(this._route.t));\r\n            this.tripTimeMinutes = ko.observable(Utils.getMinutes(this._route.t));\r\n            this.routeId = this._route.rid;\r\n            this.distance = this._route.d;\r\n\r\n            if (this.fromLocation.placeDescription.indexOf(\"Start location (\") === 0) {\r\n                this.fromLocation.placeDescription = \"Your location\";\r\n            }\r\n\r\n            this.title = this.fromLocation.placeDescription + \" to \" + this.toLocation.placeDescription;\r\n\r\n            var exitCount = 0;\r\n            $.each(route.s, (i, v: IRouteSegment) => { exitCount += v.j.length; });\r\n\r\n            this.description =\r\n                \"Traveling by car from \"\r\n                + this.fromLocation.placeDescription.toString()\r\n                + \" to \"\r\n                + this.toLocation.placeDescription.toString()\r\n                + \" and looking for best place to stop for food or gas? This route is \"\r\n                + this.distance.toString()\r\n                + \" miles and has \"\r\n                + exitCount.toString()\r\n                + \" exits.Check this out. \";\r\n\r\n            this.shortDescription = \"Distance \" + this.distance.toString() + \". \" + exitCount.toString() + \" exits\";\r\n\r\n            this.routeSegments = ko.observableArray([]);\r\n\r\n            this.createSegmentFirstTime(0);\r\n\r\n            this.boundElement = ko.observable(null);\r\n\r\n\r\n            this.boundElement.subscribe((newElement: Element) => {\r\n                if (newElement && !this._subscribedForBoundElement) {\r\n                    this._subscribedForBoundElement = true;\r\n\r\n                    this.recalcRoadLine(newElement);\r\n\r\n                    Utils.observeDOM(newElement, () => {\r\n                        this.recalcRoadLine(newElement);\r\n                    });\r\n                }\r\n            });\r\n        }\r\n\r\n       \r\n\r\n        public recalcRoadLine(roadLineElement: Element): void {\r\n           \r\n\r\n            var junctionElements = $(roadLineElement).find(\".junction-wrapper\");\r\n            var junctionCount = junctionElements.length;\r\n            var lastJunctionTop = \"\";\r\n            var newRoadLineHeight = $(this.boundElement()).height();\r\n\r\n\r\n            // recalculate positions if roadline height changes or if junction count changes\r\n            // no point recalculating if roadLineHeight is 0\r\n            if (newRoadLineHeight !== 0 && (junctionCount !== this._junctionElementCount || this.roadLineHeight() !== newRoadLineHeight)) {\r\n                this.roadLineHeight(newRoadLineHeight);     \r\n                this._junctionElementCount = junctionCount;\r\n\r\n                this.routeJunctionElementLookup = {};\r\n                \r\n                junctionElements.each((index: number, elem: Element) => {\r\n                    lastJunctionTop = $(roadLineElement).offset().top.toString();\r\n                    this.routeJunctionElementLookup[elem.getAttribute(\"osmid\")] = { top: $(elem).offset().top - $(roadLineElement).offset().top };\r\n                });\r\n\r\n                // Telemetry.logToConsole(\"recaldRoadLine: \" + this.roadLineHeight() + \". last junction top: \" + lastJunctionTop);\r\n            }        \r\n        }\r\n\r\n\r\n\r\n        public route: IRoute;\r\n        public fromLocation: LocationViewModel;\r\n        public toLocation: LocationViewModel;\r\n        public currentLocation: KnockoutObservable<LocationViewModel>;\r\n        public routeSegments: KnockoutObservableArray<RouteSegmentViewModel>;\r\n        public routeId: string;\r\n        public title: string;\r\n        public description: string;\r\n        public shortDescription: string;\r\n        public distance: number;\r\n        public etaString: KnockoutObservable<string>;\r\n        public startTimeString: KnockoutObservable<string>;\r\n        public tripTimeHours: KnockoutObservable<number>;\r\n        public tripTimeMinutes: KnockoutObservable<number>;\r\n\r\n        public sideBar: SideBarViewModel;\r\n        public routeHeightPx: KnockoutObservable<number> = ko.observable(0);\r\n        public boundElement: KnockoutObservable<Element> = ko.observable(null);\r\n\r\n        private createSegmentFirstTime(segmentIndex: number) {\r\n\r\n            var segmentViewModel = new RouteSegmentViewModel(this._route.s[segmentIndex], this._routeStartTime, this._app);\r\n            this.routeSegments.push(segmentViewModel);\r\n\r\n\r\n            segmentIndex++;\r\n\r\n            if (this._route.s.length > segmentIndex) {\r\n                window.setTimeout(() => this.createSegmentFirstTime(segmentIndex), 100);\r\n            }\r\n            else {\r\n                this._routeInitializationComplete();\r\n                this.initializeEtaTimes();\r\n            }\r\n        }\r\n\r\n        private initializeEtaTimes(): void {\r\n            this.updateEtaTimes();\r\n            this.updateStopDurationChangeSubscriptions();\r\n\r\n            this._app.routePlan.stops.subscribe(() => {\r\n                this.updateEtaTimes();\r\n                this.updateStopDurationChangeSubscriptions();\r\n\r\n            });\r\n        }\r\n\r\n\r\n\r\n        private updateStopDurationChangeSubscriptions(): void {\r\n            $.each(this._stopDurationSubscriptions, (i, s: KnockoutSubscription) => {\r\n                s.dispose();\r\n            });\r\n\r\n            $.each(this._app.routePlan.stops(), (i, stop: RouteStopViewModel) => {\r\n                this._stopDurationSubscriptions.push(stop.stopDuration.subscribe(() => this.updateEtaTimes()));\r\n            });\r\n        }\r\n\r\n        private updateEtaTimes(): void {\r\n            var t = this._routeStartTime;\r\n            var totalDelaysSoFarInMs = 0;\r\n            for (var i = 0; i < this.routeSegments().length; i++) {\r\n                for (var k = 0; k < this.routeSegments()[i].routeJunctions.length; k++) {\r\n                    var routeJunction = this.routeSegments()[i].routeJunctions[k];\r\n                    routeJunction.eta(new Date(routeJunction.etaWithoutStops.getTime() + totalDelaysSoFarInMs));\r\n                    var delaysForThisJunctionMs = 0;\r\n\r\n                    for (var l = 0; l < routeJunction.stops().length; l++) {\r\n                        var stop = routeJunction.stops()[l];\r\n                        delaysForThisJunctionMs += (stop.detourDuration() * 1000);\r\n                        stop.exitEta(routeJunction.eta());\r\n                    }\r\n\r\n                    totalDelaysSoFarInMs += delaysForThisJunctionMs;\r\n                }\r\n            }\r\n\r\n            this.etaString(Utils.getTimeString(this._routeStartTime, this._route.t * 1000 + totalDelaysSoFarInMs));\r\n            this.tripTimeHours = ko.observable(Utils.getHours(this._route.t + totalDelaysSoFarInMs / 1000));\r\n            this.tripTimeMinutes = ko.observable(Utils.getMinutes(this._route.t + totalDelaysSoFarInMs / 1000));\r\n        }\r\n    }\r\n}","/// <reference path=\"../tsdef/jquery.d.ts\"/>\r\n/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\r\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\r\n/// <reference path=\"RouteViewModel.ts\"/>\r\n/// <reference path=\"FilterViewModel.ts\"/>\r\n/// <reference path=\"IAppViewModel.ts\"/>\r\n\r\n\"use strict\";\r\nmodule StopByStop {\r\n    export class AppViewModel implements IAppViewModel {\r\n\r\n\r\n        private _route: IRoute;\r\n\r\n        constructor(route: IRoute, initSettings: IAppState, routeTitle: string, routeInitializationComplete: () => void = null) {\r\n            this.isRouteLoading(true);\r\n            this.routeLoadingMessage(\"Loading route \" + routeTitle + \" ...\");\r\n            this.url(Utils.getShareUrl(initSettings.baseDataUrl, initSettings.navigationLocation));\r\n\r\n            if (route) {\r\n                this._route = route;\r\n                var rjs: IRouteJunction[] = [];\r\n\r\n                $.each(route.s, (i, v: IRouteSegment) => { rjs.push(...v.j); });\r\n\r\n                this.filter = new FilterViewModel(route.rid, rjs, AppState.current.metadata);\r\n                this.filter.onFilterUpdated = this.onPoiFilterUpdated.bind(this);\r\n                this.routePlan = new RoutePlanViewModel(this._route.rid, this._route.d, new LocationViewModel(route.tl));\r\n\r\n                this.isRouteLoading(false);\r\n                this.route = new RouteViewModel(this._route, this, initSettings, () => {\r\n\r\n                    /*\r\n                    if (initSettings.app === SBSApp.Web) {\r\n                        this.routePlan.loadStopsFromStorage();\r\n                    }\r\n                    */\r\n\r\n                    $.each(this.route.routeSegments(), (i, rs) => {\r\n                        $.each(rs.routeJunctions, (i2, rj) => {\r\n                            rj.onPoiVisibilityUpdated();\r\n                        });\r\n                        rs.onJunctionVisibilityUpdated();\r\n                    });\r\n\r\n                    if (routeInitializationComplete) {\r\n                        routeInitializationComplete();\r\n                    }\r\n                });\r\n\r\n\r\n                this.title(this.route.title + \" - Stop by Stop\");\r\n            } else {\r\n                this.title(\"See best places to stop on the way to your destination - Stop by Stop\");\r\n            }\r\n\r\n            window.document.title = this.title();\r\n        }\r\n\r\n        public route: RouteViewModel = null;\r\n        public url: KnockoutObservable<string> = ko.observable(\"\");\r\n        public title: KnockoutObservable<string> = ko.observable(\"\");\r\n        // initialize filter to an empty object, so that it doesn't require IFs which would require delayed jqm initialization\r\n        public filter: FilterViewModel = <FilterViewModel>{};\r\n        public routePlan: RoutePlanViewModel = null;\r\n        public isRouteLoading: KnockoutObservable<boolean> = ko.observable(false);\r\n        public routeLoadingMessage: KnockoutObservable<string> = ko.observable(\"\");\r\n        public selectedJunction: KnockoutObservable<JunctionAppBaseViewModel> = ko.observable(null);\r\n\r\n        public initSideBar(): void {\r\n            if (this.route && this.route.sideBar) {\r\n                this.route.sideBar.postInit();\r\n            }\r\n        }\r\n\r\n        public onPoiFilterUpdated(): void {\r\n            $.each(this.route.routeSegments(), (i, rs) => {\r\n                var atLeastOneJunctionVisibilityChanged = false;\r\n                $.each(rs.routeJunctions, (i2, rj) => {\r\n                    var junctionVisibilityChanged = rj.onPoiVisibilityUpdated();\r\n                    if (junctionVisibilityChanged) {\r\n                        atLeastOneJunctionVisibilityChanged = true;\r\n                    }\r\n                });\r\n\r\n                if (atLeastOneJunctionVisibilityChanged) {\r\n                    rs.onJunctionVisibilityUpdated();\r\n                }\r\n            });\r\n        }\r\n    }\r\n}","\"use strict\";\r\n\r\ninterface String {\r\n    f(...args: string[]);\r\n}\r\n\r\nString.prototype.f = function (...args) {\r\n    var s = this,\r\n        i = args.length;\r\n\r\n    while (i--) {\r\n        s = s.replace(new RegExp('\\\\{' + i + '\\\\}', 'gm'), args[i]);\r\n    }\r\n    return s;\r\n};","/// <reference path=\"../tsdef/jquery.d.ts\"/>\r\n/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\r\n/// <reference path=\"../tsdef/google.maps.d.ts\"/>\r\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\r\n/// <reference path=\"JunctionViewModel.ts\"/>\r\n\r\n\"use strict\";\r\nmodule StopByStop {\r\n    export class JunctionMapViewModel {\r\n        private mapDiv: Element;\r\n        private mapContainerDiv: Element;\r\n        private junction: RouteJunctionViewModel;\r\n        private poiInfoWindow: google.maps.InfoWindow;\r\n        private map: google.maps.Map;\r\n        private urls: IInitUrls;\r\n        private mapDivInitialized: boolean = false;\r\n\r\n        constructor(mapDiv: Element, mapContainerDiv: Element, junction: RouteJunctionViewModel, urls: IInitUrls) {\r\n\r\n            this.junction = junction;\r\n            this.mapDiv = mapDiv;\r\n            this.mapContainerDiv = mapContainerDiv;\r\n            this.urls = urls;\r\n\r\n            if (AppState.current.app === SBSApp.Web) {\r\n                if (this.mapDiv && this.mapContainerDiv) {\r\n                    window.setTimeout(() => {\r\n                        this.initMapDiv();\r\n                        window.setTimeout(() => {\r\n                            $(this.mapContainerDiv).hide();\r\n                        }, 500);\r\n                    }, 300);\r\n                }\r\n            }\r\n        }\r\n\r\n        public initMapDiv(): void {\r\n            if (!this.mapDivInitialized) {\r\n                $(this.mapDiv).css({ 'height': $(this.mapDiv).width() + 'px' });\r\n                this.onMapReady();\r\n                this.mapDivInitialized = true;\r\n            }\r\n        }\r\n\r\n        private onMapReady(): void {\r\n            var junctionPoint = new google.maps.LatLng(this.junction.junction.location.lat, this.junction.junction.location.lon);\r\n            this.map = new google.maps.Map(this.mapDiv,\r\n                {\r\n                    zoom: 14,\r\n                    center: junctionPoint,\r\n                    disableDefaultUI: false\r\n                });\r\n\r\n            var junctionMarker = new google.maps.Marker({\r\n                position: junctionPoint,\r\n                map: this.map,\r\n                icon: this.urls.BaseImageUrl + \"icons/exit_map.png\"\r\n            });\r\n\r\n            this.createPois();\r\n        };\r\n\r\n        private createPois(): void {\r\n\r\n            var pois = this.junction.junction.pois();\r\n\r\n\r\n            $.each(pois, (indexInArray: any, valueOfElement: any) => {\r\n                var poi = <PoiOnJunctionViewModel>valueOfElement;\r\n                var poiPoint = new google.maps.LatLng(poi.poi.location.lat, poi.poi.location.lon);\r\n\r\n                Utils\r\n                var poiMarker = new google.maps.Marker(\r\n                    {\r\n                        position: poiPoint,\r\n                        icon: Utils.getPoiIconUrl(poi.poi.poiType, PoiIconFormat.Map, this.urls.BaseImageUrl),\r\n                        map: this.map\r\n                    });\r\n\r\n                poiMarker.setVisible(poi.poi.visible());\r\n\r\n\r\n                poiMarker.addListener('click', () => {\r\n                    if (this.poiInfoWindow) {\r\n                        this.poiInfoWindow.close();\r\n                    }\r\n\r\n                    ko.cleanNode($(\"#poiPopupTemplate\")[0]);\r\n                    ko.applyBindings(poi, $(\"#poiPopupTemplate\")[0]);\r\n\r\n\r\n                    if (!poiMarker[\"iw\"]) {\r\n                        var gmapsInfoWindow = new google.maps.InfoWindow({\r\n                            content: $(\"#poiPopupTemplate\").html()\r\n                        });\r\n                        poiMarker[\"iw\"] = gmapsInfoWindow;\r\n\r\n\r\n                        poi.poi.isYInfoLoading.subscribe(() => {\r\n                            ko.cleanNode($(\"#poiPopupTemplate\")[0]);\r\n                            ko.applyBindings(poi, $(\"#poiPopupTemplate\")[0]);\r\n                            gmapsInfoWindow.setContent($(\"#poiPopupTemplate\").html());\r\n                        });\r\n                    }\r\n\r\n                    this.poiInfoWindow = (<google.maps.InfoWindow>poiMarker[\"iw\"]);\r\n                    (<any>window).showPoiOptionsForMapPopup = () => {\r\n                        poi.addToRouteOptionsClick();\r\n                    };\r\n                    this.poiInfoWindow.open(this.map, poiMarker);\r\n\r\n                });\r\n                poi.poi.visible.subscribe((newValue) => {\r\n                    poiMarker.setVisible(newValue);\r\n                    if (!newValue && poiMarker[\"iw\"]) {\r\n                        (<google.maps.InfoWindow>poiMarker[\"iw\"]).close();\r\n                    }\r\n                });\r\n            });\r\n        };\r\n    }\r\n}","/// <reference path=\"../tsdef/jquery.d.ts\"/>\r\n/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\r\n/// <reference path=\"../tsdef/google.maps.d.ts\"/>\r\n/// <reference path=\"../extensions.ts\"/>\r\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\r\n/// <reference path=\"../Init.ts\"/>\r\n/// <reference path=\"RouteViewModel.ts\"/>\r\n/// <reference path=\"JunctionMapViewModel.ts\"/>\r\n/// <reference path=\"IAppViewModel.ts\"/>\r\n\r\n\"use strict\";\r\nmodule StopByStop {\r\n\r\n    export abstract class JunctionAppBaseViewModel implements IAppViewModel {\r\n        protected _poiLocations: LocationViewModel[];\r\n        protected _locationToLoadIndex: number = 0;\r\n\r\n        public filter: FilterViewModel;\r\n        public routePlan: RoutePlanViewModel;\r\n        public routeJunction: RouteJunctionViewModel;\r\n        public junctionMapViewModel: JunctionMapViewModel;\r\n\r\n        \r\n        protected loadFullPoiData() {\r\n            \r\n            if (this._locationToLoadIndex < this._poiLocations.length) {\r\n                var locationToLoad = this._poiLocations[this._locationToLoadIndex++];\r\n\r\n                var latStr = locationToLoad.lat.toFixed(1);\r\n                var lonStr = locationToLoad.lon.toFixed(1);\r\n\r\n                $.ajax(AppState.current.urls.PoiUrlV2 + latStr + \",\" + lonStr)\r\n                    .done((data: IReviewGroup[]) => {\r\n\r\n                        for (var i = 0; i < data.length; i++) {\r\n                            var p = data[i];\r\n                            if (this.routeJunction.junction.poiLookup[p.id]) {\r\n                                this.routeJunction.junction.poiLookup[p.id].poi.updateYInfo(p);\r\n                            }\r\n                        }\r\n\r\n                        this.loadFullPoiData();\r\n                    });\r\n            } else {\r\n                this.routeJunction.junction.completeYDataLoad();\r\n            }\r\n        }\r\n\r\n    };\r\n\r\n    export class JunctionSPAAppViewModel extends JunctionAppBaseViewModel {\r\n        constructor(\r\n            route: IRoute,\r\n            routeJunctionViewModel: RouteJunctionViewModel,\r\n            parentFilter: FilterViewModel,\r\n            routePlan: RoutePlanViewModel,\r\n            metadata: IMetadata,\r\n            poiTypeToShow: PoiType = PoiType.all\r\n        ) {\r\n            super();\r\n            // TODO: here\r\n\r\n            this.routePlan = routePlan;\r\n            this.routeJunction = routeJunctionViewModel;\r\n\r\n            this.filter = new FilterViewModel(\r\n                parentFilter.routeId,\r\n                [this.routeJunction.routeJunction],\r\n                metadata,\r\n                false);\r\n\r\n            // propagate distance and restaurant enablement setting from parent route filter\r\n            this.filter.maxDistanceFromJunction(parentFilter.maxDistanceFromJunction());\r\n            var mdarr = [\r\n                [this.filter.maxDistanceFromJunctionIs1, \"1\"],\r\n                [this.filter.maxDistanceFromJunctionIs2, \"2\"],\r\n                [this.filter.maxDistanceFromJunctionIs3, \"3\"],\r\n                [this.filter.maxDistanceFromJunctionIs4, \"4\"],\r\n                [this.filter.maxDistanceFromJunctionIs5, \"5\"]\r\n            ];\r\n\r\n            for (var i = 0; i < mdarr.length; i++) {\r\n                (<KnockoutObservable<boolean>>mdarr[i][0])(mdarr[i][1] === parentFilter.maxDistanceFromJunction());\r\n            }\r\n\r\n            this.filter.copyEnablement(parentFilter);\r\n\r\n            \r\n            for (var poiType in this.filter.typeFiltersLookup) {\r\n                this.filter.typeFiltersLookup[poiType].isOn(poiTypeToShow === PoiType.all || parseInt(poiType) === poiTypeToShow);\r\n            }\r\n\r\n            this.filter.onFilterUpdated = ()=>this.routeJunction.onPoiVisibilityUpdated();\r\n\r\n            var junctionLocationViewModel = this.routeJunction.junction.location;\r\n\r\n            this._poiLocations = LocationViewModel.getGridLocations({\r\n                a: junctionLocationViewModel.lat,\r\n                o: junctionLocationViewModel.lon\r\n            });\r\n\r\n            this.loadFullPoiData();\r\n        };\r\n\r\n\r\n        public initMap(mapDiv: Element, mapContainerDiv: Element): JunctionMapViewModel {\r\n            this.junctionMapViewModel = new JunctionMapViewModel(mapDiv, mapContainerDiv, this.routeJunction, AppState.current.urls);\r\n            return this.junctionMapViewModel;\r\n        }\r\n    }\r\n}","/// <reference path=\"tsdef/jquery.d.ts\"/>\r\n/// <reference path=\"tsdef/jquerymobile.d.ts\"/>\r\n/// <reference path=\"tsdef/knockout-3.3.d.ts\"/>\r\n/// <reference path=\"AppState.ts\" />\r\n/// <reference path=\"Telemetry.ts\"/>\r\n/// <reference path=\"Utils.ts\"/>\r\n/// <reference path=\"stopbystop-interfaces.ts\"/>\r\n/// <reference path=\"InitUrls.ts\"/>\r\n/// <reference path=\"InitHome.ts\"/>\r\n/// <reference path=\"ViewModels/IAppViewModel.ts\" />\r\n/// <reference path=\"ViewModels/AppViewModel.ts\" />\r\n/// <reference path=\"ViewModels/RouteViewModel.ts\" />\r\n/// <reference path=\"ViewModels/JunctionAppViewModel.ts\" />\r\n\r\n\"use strict\";\r\n\r\nmodule StopByStop {\r\n\r\n    export class Init {\r\n        private static _app: KnockoutObservable<AppViewModel>;\r\n        private static _currentRouteId: string;\r\n        private static _initSPAOnce: (...args: any[]) => void;\r\n\r\n        private static _loadRoutePromise: JQueryPromise<any> = null;\r\n\r\n\r\n        public static _cachedRoutes: { [id: string]: IRoute } = {};\r\n        public static initialize(settings: IAppState): void {\r\n            this._initSPAOnce = Utils.runOnce(Init.initSPA);\r\n            AppState.current = settings;\r\n            AppState.current.urls = new InitUrls(settings.baseDataUrl, settings.baseImageUrl);\r\n            Init._app = ko.observable<AppViewModel>(new AppViewModel(null, AppState.current, \"\"));\r\n\r\n            (<any>ko).options.deferUpdates = true;\r\n            Init.enableUAMatch();\r\n\r\n\r\n            /* common initialization for all pages */\r\n            $(document).on(\"pageinit\", \".jqm-demos\", (event) => {\r\n                var page = $(this);\r\n                /* For Web app initialize menu programmatically*/\r\n                if (AppState.current.app === SBSApp.Web) {\r\n                    $(\".jqm-navmenu-panel ul\").listview();\r\n                    $(\".jqm-navmenu-link\").on(\"click\", () => {\r\n                        (<any>page.find(\".jqm-navmenu-panel:not(.jqm-panel-page-nav)\")).panel().panel(\"open\");\r\n                    });\r\n                }\r\n            });\r\n            /* end of common initialiazation for all pages */\r\n\r\n            /* home page initialization */\r\n            $(document).on(\"pageinit\", \".sbs-homePG\", function (event) {\r\n                InitHome.wireup();\r\n            });\r\n            /* end of home page initialization */\r\n\r\n\r\n            /* route page initialization */\r\n            $(document).on(\"pageinit\", \".route-page\", function (event) {\r\n\r\n\r\n            });\r\n            /* end of route page initialization */\r\n\r\n            /* exit page initialization */\r\n            $(document).on(\"pageinit\", \".exit-page\", function (event) {\r\n\r\n            });\r\n            /* end of exit page initialization */\r\n\r\n            /* poi group page initialization */\r\n            $(document).on(\"pageinit\", \".poigroup-page\", function (event) {\r\n\r\n                var poiGroupInitialized = false;\r\n                $(document).scroll(function () {\r\n                    if (!poiGroupInitialized) {\r\n                        poiGroupInitialized = true;\r\n                        Telemetry.trackEvent(TelemetryEvent.POIGroupPageScroll);\r\n                    }\r\n                });\r\n            });\r\n            /* end of poi group page initialization */\r\n\r\n            /* handle unknown hash change */\r\n            var scheduledUnknownChange = false;\r\n\r\n            var onBrowserHistoryChanged = () => {\r\n\r\n                if (!scheduledUnknownChange) {\r\n                    scheduledUnknownChange = true;\r\n                    window.setTimeout(() => {\r\n                        if (!AppState.current.knownHashChangeInProgress) {\r\n                            var newHash = location.hash;\r\n                            var oldPage = AppState.current.navigationLocation.page;\r\n\r\n                            Utils.updateNavigationLocation(newHash, AppState.current.navigationLocation);\r\n                            if (oldPage !== AppState.current.navigationLocation.page) {\r\n                                Utils.spaPageNavigate(\r\n                                    AppState.current.navigationLocation.page,\r\n                                    AppState.current.navigationLocation.routeId,\r\n                                    AppState.current.navigationLocation.exitId,\r\n                                    AppState.current.navigationLocation.poiType,\r\n                                    false);\r\n\r\n                            }\r\n                        }\r\n\r\n                        AppState.current.knownHashChangeInProgress = false;\r\n                        scheduledUnknownChange = false;\r\n                    }, 100);\r\n                }\r\n            };\r\n\r\n\r\n            (<any>$(window)).hashchange(onBrowserHistoryChanged);\r\n\r\n            if (!AppState.current.historyDisabled && Utils.isHistoryAPISupported()) {\r\n                window.onpopstate = onBrowserHistoryChanged;\r\n            }\r\n            if (AppState.current.app === SBSApp.SPA) {\r\n                Init._initSPAOnce();\r\n            }\r\n\r\n            /* trigger initial hash change */\r\n            onBrowserHistoryChanged();\r\n        }\r\n\r\n        private static loadRoute(routeId: string): JQueryPromise<any> {\r\n            var deferred = $.Deferred();\r\n            if (Init._cachedRoutes[routeId]) {\r\n                Init.onRouteDataLoaded(routeId, Init._cachedRoutes[routeId], deferred);\r\n            } else {\r\n                var withMetadata = !AppState.current.metadata;\r\n\r\n                $.ajax({\r\n                    url: AppState.current.urls.RouteDataUrlV2 + routeId + \"/metadata/\" + withMetadata.toString().toLowerCase(),\r\n                    dataType: 'json',\r\n                    method: 'GET',\r\n                    success: (data) => {\r\n                        Init._cachedRoutes[routeId] = data;\r\n                        if (withMetadata) {\r\n                            StopByStop.AppState.current.metadata = data.m;\r\n                        }\r\n\r\n                        Init.onRouteDataLoaded(routeId, data, deferred);\r\n                    }\r\n                });\r\n            }\r\n\r\n            return deferred.promise();\r\n        }\r\n\r\n        private static onRouteDataLoaded(routeId: string, data: IRoute, done: JQueryDeferred<any>): void {\r\n\r\n            if (routeId === Init._currentRouteId) {\r\n                var route = data;\r\n                var app = new AppViewModel(route, AppState.current, Utils.getRouteTitleFromRouteId(routeId),\r\n                    () => {\r\n                        done.resolve();\r\n                    });\r\n\r\n                Init._app(app);\r\n            } else {\r\n                done.reject();\r\n            }\r\n        }\r\n\r\n        private static completeExitPageInit(): void {\r\n            var selectedRouteJunction = Init._app().routePlan.junctionMap[AppState.current.navigationLocation.exitId];\r\n            var poiType = AppState.current.navigationLocation.poiType;\r\n\r\n            var appViewModel = Init._app();\r\n\r\n            var junctionAppViewModel = new JunctionSPAAppViewModel(\r\n                appViewModel.route.route,\r\n                selectedRouteJunction,\r\n                appViewModel.filter,\r\n                appViewModel.routePlan,\r\n                AppState.current.metadata,\r\n                poiType);\r\n\r\n            appViewModel.selectedJunction(junctionAppViewModel);\r\n\r\n            Init.initJunctionMapWhenReady(junctionAppViewModel).then((jmmv) => {\r\n                // to ensure the switch between map and list view is initialized\r\n                $(\".view-mode-switch\").controlgroup();\r\n                $(\".view-mode-switch\").trigger(\"create\");\r\n                Init.wireupPOIGroup(jmmv);\r\n\r\n            })\r\n\r\n            Init._app().url(Utils.getShareUrl(AppState.current.baseDataUrl, AppState.current.navigationLocation));\r\n            Init._app().title(junctionAppViewModel.routeJunction.title);\r\n            document.title = Init._app().title();\r\n            Init.animateFiltersTrigger();\r\n        }\r\n\r\n        private static initSPA(): void {\r\n            /* apply root bindings for Cordova app */\r\n            var sbsRootNode = $(\"#sbsRoot\")[0];\r\n            ko.applyBindings(Init._app, sbsRootNode);\r\n            $(\".jqm-navmenu-link\").click(() => Init.openNavigationMenu());\r\n\r\n            // Initialize breadcrumb on applicable pages\r\n            jQuery(document).ready(() => {\r\n                (<any>jQuery(\".breadCrumb\")).jBreadCrumb();\r\n            })\r\n\r\n            // wire up click on the social button\r\n            $(\".social-btn\").click(() => {\r\n                Telemetry.trackEvent(TelemetryEvent.SocialButtonClick);\r\n            });\r\n\r\n            $(\".filters-trigger\").click(() => {\r\n                Telemetry.trackEvent(TelemetryEvent.FilterButtonClick);\r\n                Init.openFilterPopup();\r\n            });\r\n\r\n\r\n            /* initialize page navigation events */\r\n            var pageBeforeShowTime: number;\r\n            var navigationAbandoned = false;\r\n\r\n            $.mobile.pageContainer.pagecontainer({\r\n                beforeshow: (event, ui) => {\r\n                    navigationAbandoned = false;\r\n                    pageBeforeShowTime = new Date().getTime();\r\n                    var pageBeingLoaded = ui.toPage.attr(\"id\");\r\n\r\n                    var pageIdSelector: string = \"#\" + pageBeingLoaded;\r\n\r\n\r\n                    if (!AppState.current.navigationLocation) {\r\n                        AppState.current.navigationLocation = { page: SBSPage.home };\r\n                    }\r\n\r\n                    Utils.updateNavigationLocation(location.hash, AppState.current.navigationLocation);\r\n                    var updatedHash = Utils.getHashFromNavigationLocation(AppState.current.navigationLocation);\r\n\r\n                    if (location.hash !== updatedHash) {\r\n                        AppState.current.knownHashChangeInProgress = true;\r\n                        location.replace(updatedHash);\r\n                    }\r\n\r\n                    AppState.current.pageInfo = {\r\n                        pageName: ui.toPage.data(\"page-name\"),\r\n                        telemetryPageName: ui.toPage.data(\"telemetry-page-name\"),\r\n                    };\r\n\r\n\r\n                    // are we loading correct page?\r\n                    var pageBeingLoaded = ui.toPage[0].id;\r\n                    if (SBSPage[AppState.current.navigationLocation.page] !== pageBeingLoaded) {\r\n                        Utils.spaPageNavigate(\r\n                            AppState.current.navigationLocation.page,\r\n                            AppState.current.navigationLocation.routeId,\r\n                            AppState.current.navigationLocation.exitId,\r\n                            AppState.current.navigationLocation.poiType,\r\n                            false);\r\n\r\n                        navigationAbandoned = true;\r\n                    }\r\n\r\n\r\n                    <any>$(pageIdSelector).css(\r\n                        {\r\n                            paddingTop: \"51px\",\r\n                            paddingBottom: \"50px\"\r\n                        });\r\n\r\n                    var filtersContainer = $(\".\" + AppState.current.pageInfo.pageName + \" .filters-container\");\r\n                    filtersContainer.css({ \"right\": \"10%\" });\r\n\r\n                },\r\n                show: (event, ui) => {\r\n                    if (navigationAbandoned) {\r\n                        return;\r\n                    }\r\n\r\n                    var shareUrl = Utils.getShareUrl(AppState.current.baseDataUrl, AppState.current.navigationLocation);\r\n                    Init._app().url(shareUrl);\r\n\r\n                    if (!AppState.current.historyDisabled && Utils.isHistoryAPISupported()) {\r\n                        var newHistoryState = history.state;\r\n                        newHistoryState.url = shareUrl + location.hash;\r\n                        history.replaceState(newHistoryState, newHistoryState.title, shareUrl + location.hash);\r\n                    }\r\n\r\n\r\n                    switch (AppState.current.navigationLocation.page) {\r\n                        case SBSPage.route:\r\n                        case SBSPage.exit:\r\n                            if (Init._currentRouteId !== AppState.current.navigationLocation.routeId) {\r\n                                Init._currentRouteId = AppState.current.navigationLocation.routeId;\r\n                                Init._app(new AppViewModel(null, AppState.current, Utils.getRouteTitleFromRouteId(AppState.current.navigationLocation.routeId)));\r\n\r\n                                Init._loadRoutePromise = Init.loadRoute(AppState.current.navigationLocation.routeId);\r\n\r\n                                Init._loadRoutePromise.done((callback: JQueryPromiseCallback<any>) => {\r\n\r\n                                    if (AppState.current.navigationLocation.page === SBSPage.exit) {\r\n                                        Init.completeExitPageInit();\r\n                                    } else {\r\n                                        this._app().route.sideBar.recalculatePosition();\r\n                                        Init.animateFiltersTrigger();\r\n                                    }\r\n                                });\r\n                            } else {\r\n                                if (AppState.current.navigationLocation.page === SBSPage.route) {\r\n\r\n                                    this._app().route.recalcRoadLine($(\".route\")[0]);\r\n                                    this._app().title(this._app().route.shortDescription);\r\n                                    this._app().route.sideBar.recalculatePosition();\r\n                                    Init.animateFiltersTrigger();\r\n\r\n                                } else if (AppState.current.navigationLocation.page === SBSPage.exit) {\r\n                                    Init.completeExitPageInit();\r\n                                }\r\n                            }\r\n                            break;\r\n                        default:\r\n                            break;\r\n                    }\r\n\r\n\r\n                    Telemetry.trackPageView(\r\n                        AppState.current.pageInfo.telemetryPageName,\r\n                        \"#\" + AppState.current.pageInfo.pageName,\r\n                        (new Date()).getTime() - pageBeforeShowTime);\r\n                }\r\n            });\r\n        }\r\n\r\n        private static animateFiltersTrigger() {\r\n            window.setTimeout(() => {\r\n                var filtersContainer = $(\".\" + AppState.current.pageInfo.pageName + \" .filters-container\");\r\n                filtersContainer.css({ \"right\": \"10%\" });\r\n                filtersContainer.animate({ \"right\": \"35%\" }, \"slow\");\r\n            }, 50);\r\n        }\r\n\r\n        private static initJunctionMapWhenReady(junctionAppViewModel: JunctionSPAAppViewModel): JQueryPromise<JunctionMapViewModel> {\r\n            var dfd = jQuery.Deferred();\r\n            var mapElement = $(\"#map\")[0];\r\n            var mapContainerElement = $(\".poi-map\")[0];\r\n\r\n            if (mapElement && mapContainerElement) {\r\n                var junctionMapViewModel = junctionAppViewModel.initMap(mapElement, mapContainerElement);\r\n                dfd.resolve(junctionMapViewModel);\r\n            } else {\r\n                window.setTimeout(() => {\r\n                    Init.initJunctionMapWhenReady(junctionAppViewModel)\r\n                        .then((jmvm) => dfd.resolve(jmvm));\r\n                }, 50);\r\n            }\r\n\r\n            return dfd.promise();\r\n        }\r\n\r\n        private static wireupPOIGroup(jmvm: JunctionMapViewModel): void {\r\n            $(\".view-mode-switch\").on(\"change\", function () {\r\n                var modeVal = $(\".view-mode-switch :radio:checked\").val();\r\n                if (modeVal === \"list\") {\r\n                    $(\".poi-table\").show();\r\n                    $(\".poi-map\").hide();\r\n                    Telemetry.trackEvent(TelemetryEvent.POIGroupSwitchList);\r\n                }\r\n                else {\r\n                    $(\".poi-table\").hide();\r\n                    $(\".poi-map\").show();\r\n                    jmvm.initMapDiv();\r\n                    Telemetry.trackEvent(TelemetryEvent.POIGroupSwitchMap);\r\n                }\r\n            });\r\n\r\n            $(\".yelp-btn\").on(\"click\", function () {\r\n                Telemetry.trackEvent(TelemetryEvent.YelpLinkClick, null, null, true);\r\n            });\r\n\r\n            $(\".tel-btn\").on(\"click\", function () {\r\n                Telemetry.trackEvent(TelemetryEvent.TelLinkClick);\r\n            });\r\n\r\n            $(\".pois-list-filters-button\").click(() => {\r\n                Telemetry.trackEvent(TelemetryEvent.FilterButtonInlineExitPageClick);\r\n                Init.openFilterPopup();\r\n            });\r\n        };\r\n\r\n        private static enableUAMatch(): void {\r\n\r\n            /* UA MATCH */\r\n            var matched, browser;\r\n            jQuery[\"uaMatch\"] = function (ua) {\r\n                ua = ua.toLowerCase();\r\n\r\n                var match = /(chrome)[ \\/]([\\w.]+)/.exec(ua) ||\r\n                    /(webkit)[ \\/]([\\w.]+)/.exec(ua) ||\r\n                    /(opera)(?:.*version|)[ \\/]([\\w.]+)/.exec(ua) ||\r\n                    /(msie) ([\\w.]+)/.exec(ua) ||\r\n                    ua.indexOf(\"compatible\") < 0 && /(mozilla)(?:.*? rv:([\\w.]+)|)/.exec(ua) ||\r\n                    [];\r\n\r\n                return {\r\n                    browser: match[1] || \"\",\r\n                    version: match[2] || \"0\"\r\n                };\r\n            };\r\n\r\n            matched = jQuery[\"uaMatch\"](navigator.userAgent);\r\n            browser = {};\r\n\r\n            if (matched.browser) {\r\n                browser[matched.browser] = true;\r\n                browser.version = matched.version;\r\n            }\r\n\r\n            // Chrome is Webkit, but Webkit is also Safari.\r\n            if (browser.chrome) {\r\n                browser.webkit = true;\r\n            } else if (browser.webkit) {\r\n                browser.safari = true;\r\n            }\r\n\r\n            jQuery[\"browser\"] = browser;\r\n\r\n            /* END OF UA_MATCH */\r\n        }\r\n\r\n        public static openNavigationMenu(): void {\r\n            var fd = $(\".\" + AppState.current.pageInfo.pageName + \" .nav-menu\")\r\n            if (fd.length > 0) {\r\n                (<any>fd).panel();\r\n                fd.trigger(\"create\");\r\n                (<any>fd).panel(\"open\");\r\n            }\r\n        }\r\n\r\n        public static openFilterPopup(): void {\r\n            var fd = $(\".\" + AppState.current.pageInfo.pageName + \" .filter-dlg\")\r\n            fd.on('popupafteropen', function () {\r\n                var hCenter = ($(window).width() - fd.width()) / 2;\r\n                var vCenter = ($(window).height() - fd.height()) / 2;\r\n                $('.ui-popup-container').css({\r\n                    top: vCenter,\r\n                    left: hCenter,\r\n                    position: \"fixed\"\r\n                });\r\n            });\r\n\r\n            if (fd.length > 0) {\r\n                fd.popup();\r\n                fd.trigger(\"create\");\r\n                fd.popup(\"open\", {\r\n                    positionTo: \"origin\",\r\n                    transition: \"slidedown\"\r\n                });\r\n            }\r\n        }\r\n    }\r\n}","// For an introduction to the Blank template, see the following documentation:\r\n// http://go.microsoft.com/fwlink/?LinkID=397705\r\n// To debug code on page load in Ripple or on Android devices/emulators: launch your app, set breakpoints, \r\n// and then run \"window.location.reload()\" in the JavaScript Console.\r\n\r\n/// <reference path=\"../../client/scripts/tsdef/ai.d.ts\"/>\r\n/// <reference path=\"../../client/scripts/tsdef/fb.d.ts\"/>\r\n/// <reference path=\"../../client/scripts/Init.ts\"/>\r\n/// <reference path=\"../../client/scripts/Telemetry.ts\"/>\r\n\r\nmodule StopByStop.Cordova {\r\n    \"use strict\";\r\n\r\n    export module Application {\r\n        export function initialize() {\r\n            document.addEventListener('deviceready', onDeviceReady, false);\r\n\r\n        }\r\n\r\n        function onDeviceReady() {\r\n            console.log(\"in onDeviceReady\");\r\n\r\n            //console.log(device.platform);\r\n            // FastClick lib: https://github.com/ftlabs/fastclick\r\n            var attachFastClick = window[\"Origami\"].fastclick;\r\n            attachFastClick(document.body);\r\n\r\n            // instead of target-density-dpi: http://stackoverflow.com/questions/11592015/support-for-target-densitydpi-is-removed-from-webkit\r\n            var viewPortScale = 1 / window.devicePixelRatio;\r\n            $('#viewport').attr('content', 'user-scalable=no, initial-scale=' + viewPortScale + ', width=device-width');\r\n\r\n            StopByStop.Init.initialize({\r\n                app: SBSApp.SPA,\r\n                baseDataUrl: \"https://www.stopbystop.com/\",\r\n                baseImageUrl: \"images/\",\r\n                navigationLocation: { page: SBSPage.home },\r\n                historyDisabled: true,\r\n                windowOpenTarget: \"_system\",\r\n                metadata: null\r\n            });\r\n\r\n            AppState.current.pageInfo = {\r\n                pageName: \"sbs-homePG\",\r\n                telemetryPageName: \"Home\"\r\n            };\r\n\r\n            InitHome.wireup();\r\n        }\r\n\r\n        function onPause() {\r\n            // TODO: This application has been suspended. Save application state here.\r\n        }\r\n\r\n        function onResume() {\r\n            // TODO: This application has been reactivated. Restore application state here.\r\n        }\r\n\r\n    }\r\n\r\n    var snippet = {\r\n        config: {\r\n            // instrumentationKey: \"866f136d-4f4a-47bc-8377-fb086bfddb10\" // dev instrumentation key\r\n            instrumentationKey: \"6abbda64-056b-42f3-b87b-e9bfab2a3245\"//prod instrumentation key\r\n        }\r\n    };\r\n    var init = new (<any>Microsoft.ApplicationInsights).Initialization(snippet);\r\n    Telemetry._appInsights = init.loadAppInsights();\r\n\r\n\r\n    try {\r\n        window.fbAsyncInit = function () {\r\n            FB.init({\r\n                appId: '1385725698401226',\r\n                xfbml: true,\r\n                version: 'v2.8'\r\n            });\r\n\r\n            (<any>FB).AppEvents.activateApp();\r\n        };\r\n    }\r\n    catch (ex) {\r\n        Telemetry.trackError(new Error(ex.toString()));\r\n    }\r\n\r\n    $.mobile.ajaxEnabled = true;\r\n    $.mobile.allowCrossDomainPages = true;\r\n    $.support.cors = true;\r\n\r\n\r\n\r\n    window.onload = function () {\r\n        Application.initialize();\r\n    }\r\n}\r\n"]}