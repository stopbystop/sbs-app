{"version":3,"file":"testbundle.js","sourceRoot":"","sources":["../../../src/client/scripts/stopbystop-interfaces.ts","../../../src/client/scripts/Telemetry.ts","../../../src/client/scripts/ViewModels/PoiTypeFilterViewModel.ts","../../../src/client/scripts/ViewModels/FilterViewModel.ts","../../../src/client/scripts/Utils.ts","../../../src/client/scripts/ViewModels/LocationViewModel.ts","../../../src/client/scripts/ViewModels/ReviewGroupViewModel.ts","../../../src/client/scripts/ViewModels/PoiViewModel.ts","../../../src/client/scripts/ViewModels/IStopPlace.ts","../../../src/client/scripts/ViewModels/PoiOnJunctionViewModel.ts","../../../src/client/scripts/ViewModels/RouteStopViewModel.ts","../../../src/client/scripts/AppState.ts","../../../src/client/scripts/ViewModels/JunctionViewModel.ts","../../../src/client/scripts/ViewModels/RouteJunctionPoiTypeViewModel.ts","../../../src/client/scripts/ViewModels/RouteJunctionViewModel.ts","../../../src/client/scripts/ViewModels/RoutePlanViewModel.ts","../../../src/client/scripts/ViewModels/IAppViewModel.ts","../../../src/client/scripts/InitUrls.ts","../../../src/client/scripts/InitHome.ts","../../../src/client/scripts/ViewModels/RouteSegmentViewModel.ts","../../../src/client/scripts/ViewModels/SideBarViewModel.ts","../../../src/client/scripts/ViewModels/RouteViewModel.ts","../../../src/client/scripts/ViewModels/AppViewModel.ts","../../../src/client/scripts/extensions.ts","../../../src/client/scripts/ViewModels/JunctionMapViewModel.ts","../../../src/client/scripts/ViewModels/JunctionAppViewModel.ts","../../../src/client/scripts/Init.ts","../scripts/RoutePlanViewModelTests.ts","../scripts/UtilsTests.ts","../scripts/main.ts"],"names":[],"mappings":"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","sourcesContent":["/// <reference path=\"tsdef/jquery.d.ts\"/>\n\n\"use strict\";\n\nmodule StopByStop {\n    export interface IInitUrls {\n        BaseUrl: string;\n        BaseImageUrl: string;\n\n        RouteDataUrlV2: string;\n        PlacesDataUrlV2: string;\n        PoiDataUrlV2: string;\n        PlacesNearbyDataUrlV2: string;\n\n        //image urls\n        CityImagesUrl: string;\n    }\n\n    export interface IAppState {\n        basePortalUrl: string;\n        baseDataUrl: string;\n        baseImageUrl: string;\n        windowOpenTarget: string;\n        urls?: IInitUrls;\n        pageInfo?: IPageInfo;\n        navigationLocation?: ISBSNavigationLocation;\n        knownHashChangeInProgress?: boolean;\n        historyDisabled?: boolean;\n        metadata: IMetadata;\n    }\n\n    export interface IWebInitData {\n        /** page */\n        p: SBSPage;\n        /** route id */\n        rid: string;\n        /** route */\n        r: IRoute;\n        /** exit id */\n        exd: string;\n        /** poi type */\n        pt: PoiType;\n        /** base data url */\n        durl: string;\n        /** base image url */\n        iurl: string;\n        /** base portal url */\n        purl: string;\n        /** metadata */\n        m: IMetadata;\n\n    }\n\n    export interface ILocation {\n        /** latitude */\n        a: number;\n        /** longitude */\n        o: number;\n        /** place description */\n        pd?: string;\n    };\n\n    export interface IRouteSegment {\n        /** highway name */\n        hn: string;\n        /* ref */\n        r: string;\n        /** start */\n        s: ILocation;\n        /** end */\n        e: ILocation;\n        /** distance */\n        d: number;\n        /** portion completed */\n        pc: number;\n        /** start index */\n        si: number;\n        /** end index */\n        ei: number;\n        /** maneuver */\n        m: string;\n        /** instructions */\n        i: string;\n        /** junction */\n        j: IRouteJunction[];\n    }\n\n    export interface IReviewGroup {\n        /** id */\n        id: string;\n        /** name */\n        n: string;\n        /** image url */\n        iu: string;\n        /** icon */\n        i: string;\n        /** review count */\n        rc: number;\n        /** review page url */\n        u: string;\n        /** rating image url */\n        riu: string;\n        /** rating */\n        r: number;\n    }\n\n    export interface IPoi {\n        /** sbsid */\n        id: string;\n        /** poi category ids */\n        c: number[];\n        /** poi type */\n        t: PoiType;\n        /** name */\n        n: string;\n        /** description */\n        d: string;\n        /** poi location */\n        l: ILocation;\n        /** phone number */\n        p: string;\n        /** url name */\n        un: string;\n        /** open hours */\n        oh: number[];\n        /** primary properties */\n        pp: { [id: string]: any }\n        /** secondary properties */\n        sp: { [id: string]: any }\n    }\n\n    export interface IPoiCategory {\n        /** sbsid */\n        id: number;\n        /** name */\n        n: string;\n        /** poi type */\n        pt: PoiType;\n    }\n\n    export interface IPoiCategoryOccurrence {\n        /** category */\n        cat: IPoiCategory;\n        /** count of occurrences */\n        c: number;\n    }\n\n    export interface IPoiOnJunction {\n        /** sbsid */\n        id: string;\n        /** distance from junction */\n        dfj: number;\n        /** poi */\n        p: IPoi;\n        /** visibility flag */\n        v: boolean;\n\n    }\n\n    export interface IJunction {\n        /** name */\n        n: string;\n        /** index */\n        i: number;\n        /** osmid */\n        oid: number;\n        /** highway name */\n        hn: string;\n        /** ref */\n        r: string;\n        /** location */\n        l: ILocation;\n        /** exit to */\n        et: string;\n        /** exit to left */\n        etl: string;\n        /** exit to right */\n        etr: string;\n        /** pois */\n        p: IPoiOnJunction[];\n    }\n\n    export interface IRouteJunction {\n        /** distance from route start */\n        dfrs: number;\n        /** time from route start */\n        tfrs: number;\n        /** junction */\n        j: IJunction;\n    }\n\n    export enum PoiType {\n        restaurants = 1,\n        gasstations = 2,\n        hotels = 4,\n        sights = 8,\n        all = restaurants | gasstations | hotels | sights\n    }\n\n    export interface IRoute {\n        /** from location */\n        fl: ILocation;\n        /** to location */\n        tl: ILocation;\n        /** current location */\n        cl: ILocation;\n        /** route id */\n        rid: string;\n        /** distance */\n        d: number;\n        /** time */\n        t: number;\n        /** route segments */\n        s: IRouteSegment[];\n        /** metadata */\n        m: IMetadata;\n    }\n\n    export enum SBSPage {\n        home = 0,\n        route = 1,\n        exit = 2,\n        about = 3\n    }\n\n    export interface IPageInfo {\n        /** page name */\n        pageName: string;\n        /** telemetry page name */\n        telemetryPageName: string;\n    }\n\n    export interface ISBSNavigationLocation {\n        /** page */\n        page: SBSPage,\n        /** route id */\n        routeId?: string;\n        /** exit id */\n        exitId?: string;\n        /** POI type */\n        poiType?: PoiType;\n    }\n\n    export interface IPoiPropertyMetadata {\n        id?: string;\n        /** name */\n        n: string;\n        /** values by id */\n        v?: { [id: number]: IPoiPropertyValueMetadata };\n        /** is primary property */\n        fp?: boolean;\n    }\n\n    export interface IPoiPropertyValueMetadata {\n        /** id */\n        id: number;\n        /** name */\n        n: string;\n    }\n\n    export interface IRootPoiCategory {\n        /** poi type */\n        t: PoiType;\n\n        /** category id */\n        c: number;\n\n        /** show subcategories in filters */\n        scf: boolean;\n\n        /** name */\n        n: string;\n\n        /** property metadata */\n        p: IPoiPropertyMetadata[];\n    }\n\n    export interface IMetadata {\n        /** category metadata */\n        c: { [id: number]: IPoiCategory };\n        /** root categories by type id */\n        rpc: { [id: number]: IRootPoiCategory };\n        /** all properties by id */\n        ppm: { [id: string]: IPoiPropertyMetadata };\n    }\n\n    export enum PoiIconFormat {\n        Light = 1,\n        Dark = 2,\n        Map = 4\n    }\n\n}","/// <reference path=\"tsdef/jquery.d.ts\"/>\n/// <reference path=\"tsdef/knockout-3.3.d.ts\"/>\n/// <reference path=\"tsdef/ai.d.ts\"/>\n\nmodule StopByStop {\n    export enum TelemetryEvent {\n        Add5MinToStop,\n        AddStopToRoute,\n        CityDropdownClick,\n        FilterButtonClick,\n        FilterButtonInlineExitPageClick,\n        FilterMaxDistanceFromJunctionChanged,\n        FilterShowGasStationsChanged,\n        FilterShowRestaurantsChanged,\n        LocationIN,\n        LocationOUT,\n        LocationOUTPopupDisplayed,\n        NonBounce,\n        POIGroupPageScroll,\n        POIGroupSwitchList,\n        POIGroupSwitchMap,\n        Remove5MinFromStop,\n        RemoveStopFromRoute,\n        RoutePageScroll,\n        RoutePlanNavigateClick,\n        RoutePlanNavigateBeforeDirect,\n        ShowStopSettingsPopup,\n        SideBarThumbTouch,\n        SocialButtonClick,\n        StopPopupNavigateClick,\n        StopPopupNavigateBeforeDirect,\n        TelLinkClick,\n        ViewTripButtonClick,\n        YelpLinkClick,\n    }\n\n    export enum TelemetryProperty {\n        FilterVisibility,\n        LoadStopsFromCache,\n        PageName,\n        StopCount,\n        NavigationUrl\n    }\n\n    export enum TelemetryMeasurement {\n    }\n\n    export class Telemetry {\n        public static _appInsights: Microsoft.ApplicationInsights.IAppInsights = window[\"appInsights\"];\n\n        public static trackPageView(\n            pageName: string,\n            url: string,\n            duration?: number,\n            telemetryProperties: [{ k: TelemetryProperty, v: string }] = null,\n            telemetryMeasurements: [{ k: TelemetryMeasurement, v: number }] = null,\n            flush: boolean = false\n        ): void {\n\n            try {\n                var aiProps = Telemetry.getAIProperties(telemetryProperties);\n                var aiMeasurements = Telemetry.getAIMeasurements(telemetryMeasurements);\n                Telemetry._appInsights.trackPageView(pageName, url, aiProps, aiMeasurements, duration);\n\n                if (flush) {\n                    Telemetry._appInsights.flush();\n                }\n            }\n            catch (ex) {\n                Telemetry.logFatal(ex);\n            }\n        }\n\n        public static trackEvent(\n            telemetryEvent: TelemetryEvent,\n            telemetryProperties: [{ k: TelemetryProperty, v: string }] = null,\n            telemetryMeasurements: [{ k: TelemetryMeasurement, v: number }] = null,\n            flush: boolean = false\n        ): void {\n\n            try {\n                var aiProps = Telemetry.getAIProperties(telemetryProperties);\n                var aiMeasurements = Telemetry.getAIMeasurements(telemetryMeasurements);\n                Telemetry._appInsights.trackEvent(TelemetryEvent[telemetryEvent], aiProps, aiMeasurements);\n\n                if (flush) {\n                    Telemetry._appInsights.flush();\n                }\n            }\n            catch (ex) {\n                Telemetry.logFatal(ex);\n            }\n        }\n\n        public static trackError(\n            error: Error,\n            telemetryProperties: [{ k: TelemetryProperty, v: string }] = null,\n            telemetryMeasurements: [{ k: TelemetryMeasurement, v: number }] = null,\n            flush: boolean = false\n        ): void {\n            try {\n                var aiProps = Telemetry.getAIProperties(telemetryProperties);\n                var aiMeasurements = Telemetry.getAIMeasurements(telemetryMeasurements);\n                Telemetry.logFatal(error);\n                Telemetry._appInsights.trackException(error, \"\", aiProps, aiMeasurements);\n                if (flush) {\n                    Telemetry._appInsights.flush();\n                }\n            }\n            catch (ex) {\n                Telemetry.logFatal(ex);\n            }\n        }\n\n        public static logToConsole(message: string) {\n            if (window.console) {\n                window.console.log(message);\n            }\n        }\n\n        private static getAIProperties(telemetryProperties: [{ k: TelemetryProperty, v: string }]): { [name: string]: string; } {\n            var aiProps: { [name: string]: string; } = {\n            };\n            aiProps[TelemetryProperty[TelemetryProperty.PageName]] = AppState.current.pageInfo.telemetryPageName;\n            if (telemetryProperties) {\n                $.each(telemetryProperties, (i, v) => { aiProps[TelemetryProperty[v.k]] = v.v; });\n            }\n            return aiProps;\n        }\n\n        private static getAIMeasurements(telemetryMeasurements: [{ k: TelemetryMeasurement, v: number }]): { [name: string]: number; } {\n            var aiMeasurements: { [name: string]: number; } = {};\n            if (telemetryMeasurements) {\n                $.each(telemetryMeasurements, (i, v) => { aiMeasurements[TelemetryMeasurement[v.k]] = v.v; });\n            }\n            return aiMeasurements;\n        }\n\n        private static logFatal(message: any) {\n            Telemetry.logErrorToConsole(\"ERROR-TO-TELEMETRY:\" + message);\n        }\n\n       \n        private static logErrorToConsole(err: any) {\n            if (window.console && window.console.error) {\n                if (err.message) {\n                    window.console.error(err.message);\n                } else {\n                    window.console.error(err);\n                }\n            }\n        }\n    }\n}","/// <reference path=\"../tsdef/jquery.d.ts\"/>\n/// <reference path=\"../tsdef/jquerymobile.d.ts\"/>\n/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\n/// <reference path=\"../Telemetry.ts\"/>\n\n\"use strict\";\n\nmodule StopByStop {\n    export class PoiTypeFilterViewModel {\n        private _metadata: IMetadata;\n        private _pois: IPoiOnJunction[];\n        private _maxDistanceFromJunction: number;\n        private _filter: FilterViewModel;\n        private _tempCount: number;\n\n        constructor(poiType: PoiType, metadata: IMetadata, filter: FilterViewModel) {\n            this._metadata = metadata;\n            this.rootCategory = metadata.rpc[PoiType[poiType]];\n            this.categoryName = this.rootCategory.n;\n            this.typeName = PoiType[poiType].toLowerCase();\n            this.isOn = ko.observable(true);\n            this.type = poiType;\n\n            this.categoryFilter = new MultiValueFilterViewModel({ n: \"Categories\", id: \"categories\" }, this);\n            this.propertyEnablementLookup = {};\n            this.propertyList = [];\n            this._pois = [];\n            this.filteredCount = ko.observable<number>(0);\n            this.filteredCountWithFeatures = ko.observable<number>(0);\n\n            this._maxDistanceFromJunction = 3;\n            this._filter = filter;\n\n            this.isOn.subscribe((newValue) => this.updatePoisVisibility());\n        }\n\n        public updatePoisVisibility(maxDistanceFromJunction?: number, notifyParentFilter: boolean = true): void {\n            this._maxDistanceFromJunction = maxDistanceFromJunction || this._maxDistanceFromJunction;\n\n            var filteredWithFeatures = 0;\n            $.each(this._pois, (i, poi) => {\n\n                var v = this.isOn();\n\n                if (v) {\n                    if (poi.dfj > this._maxDistanceFromJunction) {\n                        v = false;\n                    } else if (this.rootCategory.scf && !this.categoryFilter.isOn(poi.p.c)) {\n                        v = false;\n                    } else {\n                        $.each(this.propertyList, (i2, prop) => {\n                            if (!prop.isOn(<number[]>poi.p.pp[prop.id])) {\n                                v = false;\n                            }\n                        });\n                    }\n                }\n\n                poi.v = v;\n                if (v) {\n                    filteredWithFeatures++;\n                }\n            });\n\n            this.filteredCountWithFeatures(filteredWithFeatures);\n\n            if (notifyParentFilter) {\n                this._filter.onFilterUpdated();\n            }\n        }\n\n        public initWithPoi(poiOnJuntion: IPoiOnJunction): void {\n            this._pois.push(poiOnJuntion);\n\n            var poi = poiOnJuntion.p;\n\n            if (this.rootCategory.scf) {\n                var categoryValues = poi.c;\n                for (var i = 0; i < categoryValues.length; i++) {\n                    var category = this._metadata.c[categoryValues[i]];\n                    var categoryName = (category.id === this.rootCategory.c) ? \"All other\" : category.n;\n\n                    var valueMetadata: IPoiPropertyValueMetadata = { id: category.id, n: categoryName };\n                    var categoryValue = this.categoryFilter.addValue(valueMetadata);\n                    categoryValue.tempCount++;\n\n                }\n            }\n\n\n            // add property\n            for (var prop in poi.pp) {\n                // is it a property described in metadata?\n                if (this._metadata.ppm[prop]) {\n                    if (!this.propertyEnablementLookup[prop]) {\n                        var propertyFilterViewModel = new MultiValueFilterViewModel(this._metadata.ppm[prop], this);\n                        this.propertyEnablementLookup[prop] = propertyFilterViewModel;\n                        this.propertyList.push(propertyFilterViewModel);\n                    }\n                    $.each(poi.pp[prop], (i, propertyValue) => {\n                        var valueViewModel = this.propertyEnablementLookup[prop].addValue(this._metadata.ppm[prop].v[propertyValue]);\n                        valueViewModel.tempCount++;\n                    });\n                }\n            }\n        }\n\n        public sortValuesByOccurrence(): void {\n            this.categoryFilter.sortByOccurrence();\n            $.each(this.propertyList, (i, item) => { item.sortByOccurrence(); });\n        }\n\n\n        public typeName: string;\n        public rootCategory: IRootPoiCategory;\n        public categoryName: string;\n        public type: PoiType;\n        public filteredCount: KnockoutObservable<number>;\n        public filteredCountWithFeatures: KnockoutObservable<number>;\n        public isOn: KnockoutObservable<boolean>;\n        public categoryFilter: MultiValueFilterViewModel;\n        public propertyEnablementLookup: { [id: string]: MultiValueFilterViewModel };\n        public propertyList: MultiValueFilterViewModel[];\n\n        public getCategoriesEnablement(): { [id: number]: boolean } {\n            return this.categoryFilter.getValuesEnablement();\n        }\n\n        public setCategoriesEnablement(enablement: { [id: number]: boolean }): void {\n            this.categoryFilter.setValuesEnablement(enablement);\n        }\n\n        public getPropertiesEnablement(): { [id: string]: { [id: number]: boolean } } {\n            var propertiesEnablement: { [id: string]: { [id: number]: boolean } } = {};\n            $.each(this.propertyList, (i, item) => { propertiesEnablement[item.id] = item.getValuesEnablement(); });\n            return propertiesEnablement;\n        }\n\n        public setPropertiesEnablement(enablement: { [id: string]: { [id: number]: boolean } }): void {\n            $.each(this.propertyList, (i, item) => { item.setValuesEnablement(enablement[item.id]); });\n        }\n\n        public resetTempCount(): void {\n            this._tempCount = 0;\n            this.categoryFilter.resetTempCount();\n            $.each(this.propertyList, (i, item) => { item.resetTempCount(); });\n        }\n\n        public applyTempCount(): void {\n            this.filteredCount(this._tempCount);\n            this.categoryFilter.applyTempCount();\n            $.each(this.propertyList, (i, item) => { item.applyTempCount(); });\n        }\n\n        public incrementTempCountForPoi(poi: IPoi) {\n            this._tempCount++;\n            this.categoryFilter.incrementTempCount(poi.c);\n            for (var prop in poi.pp) {\n                if (this.propertyEnablementLookup[prop]) {\n                    var values: number[] = <number[]>poi.pp[prop];\n                    this.propertyEnablementLookup[prop].incrementTempCount(values);\n                }\n            }\n        }\n    }\n\n    export class MultiValueFilterViewModel {\n        \n\n        constructor(p: IPoiPropertyMetadata, filter: PoiTypeFilterViewModel) {\n            this.valueEnablementLookup = {};\n            this.valueList = [];\n            this.name = p.n;\n            this.id = p.id;\n            this.filter = filter;\n        }\n\n        public addValue(pv: IPoiPropertyValueMetadata): ValueFilterViewModel {\n            if (!this.valueEnablementLookup[pv.id]) {\n                var valueFilterViewModel = new ValueFilterViewModel(pv.id, pv.n, this, this.filter);\n                this.valueEnablementLookup[pv.id] = valueFilterViewModel;\n                this.valueList.push(valueFilterViewModel);\n            }\n\n            return this.valueEnablementLookup[pv.id];\n        }\n\n        public sortByOccurrence(): void {\n            this.valueList.sort((a, b) => b.tempCount - a.tempCount);\n        }\n\n        public filter: PoiTypeFilterViewModel;\n        public id: string;\n        public name: string;\n        public isCollapsed: KnockoutObservable<boolean> = ko.observable(true);\n        public valueEnablementLookup: { [id: number]: ValueFilterViewModel };\n        public valueList: ValueFilterViewModel[];\n\n        public expand(): void {\n            this.isCollapsed(false);\n        }\n\n        public collapse(): void {\n            this.isCollapsed(true);\n        }\n\n        public isOn(values: number[]): boolean {\n            var on: boolean = false;\n\n            $.each(values, (i, val) => {\n                if (this.valueEnablementLookup[val].isOn()) {\n                    on = true;\n                }\n            });\n\n            return on;\n        }\n\n        public getValuesEnablement(): { [id: number]: boolean } {\n            var valuesEnablement: { [id: number]: boolean } = {};\n            $.each(this.valueList, (i, item) => {\n                valuesEnablement[item.id] = item.isOn();\n            });\n            return valuesEnablement;\n        }\n\n        public setValuesEnablement(enablement: { [id: number]: boolean }): void {\n            $.each(this.valueList, (i, item) => {\n                item.isOn(enablement[item.id]);\n            });\n        }\n\n        public selectAll(): void {\n            \n            $.each(this.valueList, (i, item) => {\n                item.processingBulkUpdate = true;\n                try {\n                    item.isOn(true);\n                }\n                finally {\n                    item.processingBulkUpdate = false;\n                }\n            });\n\n            this.filter.updatePoisVisibility();\n        }\n\n        public unselectAll(): void {\n\n            $.each(this.valueList, (i, item) => {\n                item.processingBulkUpdate = true;\n                try {\n                    item.isOn(false);\n                }\n                finally {\n                    item.processingBulkUpdate = false;\n                }\n            });\n\n            this.filter.updatePoisVisibility();\n        }\n\n        public resetTempCount(): void {\n            $.each(this.valueList, (i, item) => { item.tempCount = 0; });\n        }\n\n        public applyTempCount(): void {\n            $.each(this.valueList, (i, item) => { item.count(item.tempCount); });\n        }\n\n        public incrementTempCount(propertyValues: number[]): void {\n            $.each(this.valueList, (i, item) => {\n                if (propertyValues.indexOf(item.id) > -1) {\n                    item.tempCount++;\n                }\n            });\n        }\n    }\n\n    export class ValueFilterViewModel {\n\n        private _filter: PoiTypeFilterViewModel;\n\n        constructor(id: number, name: string, parentCategory: MultiValueFilterViewModel, filterViewModel: PoiTypeFilterViewModel) {\n            this.parentCategory = parentCategory;\n            this.id = id;\n            this.isOn = ko.observable(true);\n            this.count = ko.observable(0);\n            this.tempCount = 0;\n            this.name = name;\n            this._filter = filterViewModel;\n            this.processingBulkUpdate = false;\n\n            this.isOn.subscribe((newValue) => {\n                if (!this.processingBulkUpdate) {\n                    this._filter.updatePoisVisibility();\n                }\n            })\n        }\n\n        public parentCategory: MultiValueFilterViewModel;\n        public id: number;\n        public isOn: KnockoutObservable<boolean>;\n        public count: KnockoutObservable<number>;\n        public tempCount: number;\n        public name: string;\n        public processingBulkUpdate: boolean;\n    }\n}","/// <reference path=\"../tsdef/jquery.d.ts\"/>\n/// <reference path=\"../tsdef/jquerymobile.d.ts\"/>\n/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\n/// <reference path=\"../Telemetry.ts\"/>\n/// <reference path=\"PoiTypeFilterViewModel.ts\"/>\n\n\"use strict\";\n\nmodule StopByStop {\n\n    export class FilterViewModel {\n        private routeJunctions: IRouteJunction[];\n\n        public routeId: string;\n        public typeFiltersList: PoiTypeFilterViewModel[];\n        public typeFiltersLookup: {[id:number]: PoiTypeFilterViewModel};\n        public onFilterUpdated:()=>void;\n\n        // this setting is necessary because for Exit page we are not preserving showRestaurants and showGasStations to storage, while for route page we are\n        public preserveShowAllSettings: boolean;\n\n        constructor(routeId: string, rjs: IRouteJunction[], metadata: IMetadata, preserveShowAllSettings: boolean = true) {\n            this.routeId = routeId;\n            this.routeJunctions = rjs;\n            this.preserveShowAllSettings = preserveShowAllSettings;\n        \n\n            this.typeFiltersList = [];\n            this.typeFiltersLookup = {};\n\n            this.maxDistanceFromJunction = ko.observable(\"3\");\n            this.maxDistanceFromJunctionIs1 = ko.observable(false);\n            this.maxDistanceFromJunctionIs2 = ko.observable(false);\n            this.maxDistanceFromJunctionIs3 = ko.observable(true);\n            this.maxDistanceFromJunctionIs4 = ko.observable(false);\n            this.maxDistanceFromJunctionIs5 = ko.observable(false);\n\n            var mdarr = [\n                [this.maxDistanceFromJunctionIs1, \"1\"],\n                [this.maxDistanceFromJunctionIs2, \"2\"],\n                [this.maxDistanceFromJunctionIs3, \"3\"],\n                [this.maxDistanceFromJunctionIs4, \"4\"],\n                [this.maxDistanceFromJunctionIs5, \"5\"]\n            ];\n\n            for (var i = 0; i < mdarr.length; i++) {\n\n                var selectedmdpair = mdarr[i];\n\n                (<KnockoutObservable<boolean>>selectedmdpair[0]).subscribe((function (newValue) {\n                    var pair = arguments[0];\n                    var val = arguments[1];\n                    if (val) {\n                        this.maxDistanceFromJunction(<string>pair[1]);\n                        for (var j = 0; j < mdarr.length; j++) {\n                            if (mdarr[j][1] !== pair[1]) {\n                                (<KnockoutObservable<boolean>>mdarr[j][0])(false);\n                            }\n                        }\n                    }\n                }).bind(this, selectedmdpair));\n            }\n\n            this.populate(metadata);\n            $.each(this.typeFiltersList, (i, item) => { item.updatePoisVisibility(parseInt(this.maxDistanceFromJunction()), false); });\n            this.updateCounts();\n\n            this.maxDistanceFromJunction.subscribe((newValue) => {\n                $.each(this.typeFiltersList, (i, item) => { item.updatePoisVisibility(parseInt(newValue), false); });\n                this.updateCounts();\n                this.onFilterUpdated();\n            });\n        }\n\n\n        public maxDistanceFromJunction: KnockoutObservable<string>;\n\n        public maxDistanceFromJunctionIs1: KnockoutObservable<boolean>;\n        public maxDistanceFromJunctionIs2: KnockoutObservable<boolean>;\n        public maxDistanceFromJunctionIs3: KnockoutObservable<boolean>;\n        public maxDistanceFromJunctionIs4: KnockoutObservable<boolean>;\n        public maxDistanceFromJunctionIs5: KnockoutObservable<boolean>;\n\n        public copyEnablement(filter: FilterViewModel) {\n            for (var i = 0; i < filter.typeFiltersList.length; i++) {\n                var categoriesEnablement = filter.typeFiltersList[i].getCategoriesEnablement();\n                var propertyEnablement = filter.typeFiltersList[i].getPropertiesEnablement();\n\n                if (this.typeFiltersLookup[filter.typeFiltersList[i].type]) {\n                    this.typeFiltersLookup[filter.typeFiltersList[i].type].setCategoriesEnablement(categoriesEnablement);\n                    this.typeFiltersLookup[filter.typeFiltersList[i].type].setPropertiesEnablement(propertyEnablement);\n                }\n            }\n        }\n\n        private populate(metadata: IMetadata): void {\n            for (var i = 0; i < this.routeJunctions.length; i++) {\n                var rj = this.routeJunctions[i];\n                for (var j = 0; j < rj.j.p.length; j++) {\n                    var poiOnJunction = rj.j.p[j];\n\n                    var poi = poiOnJunction.p;\n                    if (!this.typeFiltersLookup[poi.t]) {\n                        var typeFilterViewModel = new PoiTypeFilterViewModel(poi.t, metadata, this);\n                        this.typeFiltersList.push(typeFilterViewModel);\n                        this.typeFiltersLookup[poi.t] = typeFilterViewModel;\n                    }\n\n                    this.typeFiltersLookup[poi.t].initWithPoi(poiOnJunction);\n\n                }\n            }\n\n            $.each(this.typeFiltersList, (i, item) => { item.sortValuesByOccurrence(); });\n        }\n\n\n\n        private updateCounts():void {\n            var distance = parseInt(this.maxDistanceFromJunction());\n            $.each(this.typeFiltersList, (i, item) => { item.resetTempCount(); });\n            for (var i = 0; i < this.routeJunctions.length; i++) {\n                var rj = this.routeJunctions[i];\n                for (var j = 0; j < rj.j.p.length; j++) {\n                    var poiOnJunction = rj.j.p[j];\n                    if (poiOnJunction.dfj <= distance) {\n                        var poi = poiOnJunction.p;\n                        this.typeFiltersLookup[poi.t].incrementTempCountForPoi(poi);\n                    }\n                }\n            }\n            $.each(this.typeFiltersList, (i, item) => { item.applyTempCount(); });\n\n        };\n    }\n}","/// <reference path=\"tsdef/jquery.d.ts\"/>\n/// <reference path=\"tsdef/jquerymobile.d.ts\"/>\n/// <reference path=\"tsdef/knockout-3.3.d.ts\"/>\n\nmodule StopByStop {\n    export const PAGENAME_HOME = \"sbs-homePG\";\n    export const PAGENAME_Route = \"route-page\";\n    export const PAGENAME_POIGroup = \"poigroup-page\";\n    export const PAGENAME_Exit = \"exit-page\";\n    export const PAGENAME_About = \"about-page\";\n    export const N_LAT_BOUNDARY = 50.00;\n    export const S_LAT_BOUNDARY = 25.00;\n    export const W_LON_BOUNDARY = -125.00;\n    export const E_LON_BOUNDARY = -66.00;\n    export const ROUTE_PLAN_STORAGE_KEY = \"sbsroutes\";\n\n    export class Utils {\n        public static updateNavigationLocation(hash: string, navigationLocation: ISBSNavigationLocation): void {\n            if (!hash) {\n                hash = \"#home\";\n            }\n            hash = hash.toLowerCase();\n            var hashIndex = hash.indexOf(\"#\");\n            var queryStringPart: string = null;\n\n            if (hashIndex < 0) {\n                hash = \"#home\";\n                hashIndex = 0;\n            }\n\n            if (hashIndex >= 0) {\n                var indexOfPageNameEnd = hash.indexOf(\"&\", hashIndex) - 1;\n                if (indexOfPageNameEnd < 0) {\n                    indexOfPageNameEnd = hash.length - 1;\n                } else {\n                    queryStringPart = hash.substr(indexOfPageNameEnd + 1);\n                }\n                var pageName = hash.substr(hashIndex + 1, indexOfPageNameEnd - hashIndex);\n                if (SBSPage[pageName] !== undefined) {\n                    navigationLocation.page = SBSPage[pageName];\n                }\n\n                if (queryStringPart) {\n                    var queryStringParameterPairs: string[] = queryStringPart.split(\"&\");\n                    for (var i = 0; i < queryStringParameterPairs.length; i++) {\n                        var qsParts = queryStringParameterPairs[i].split(\"=\");\n                        if (qsParts.length === 2) {\n                            var parameter = qsParts[0];\n                            var val = qsParts[1];\n                            switch (parameter) {\n                                case \"routeid\":\n                                    navigationLocation.routeId = val;\n                                    navigationLocation.poiType = undefined;\n                                    break;\n                                case \"exitid\":\n                                    navigationLocation.exitId = val;\n                                    break;\n                                case \"poitype\":\n                                    navigationLocation.poiType = PoiType.all;\n                                    if (val) {\n                                        navigationLocation.poiType = PoiType[val];\n                                    }\n                                    break;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n\n        public static getHashFromNavigationLocation(navigationLocation: ISBSNavigationLocation): string {\n            var loc = \"#\";\n\n            if (SBSPage[navigationLocation.page]) {\n                loc += SBSPage[navigationLocation.page];\n            } else {\n                loc += \"home\";\n            }\n\n            if (navigationLocation.routeId) {\n                loc += (\"&routeid=\" + navigationLocation.routeId);\n            }\n\n            if (navigationLocation.exitId && navigationLocation.page === SBSPage.exit) {\n                loc += (\"&exitid=\" + navigationLocation.exitId);\n            }\n\n            if (navigationLocation.poiType && navigationLocation.page === SBSPage.exit && PoiType[navigationLocation.poiType]) {\n                loc += (\"&poitype=\" + PoiType[navigationLocation.poiType]);\n            }\n\n            return loc.toLowerCase();\n        }\n\n        public static getMileString(distance: number): string {\n            if (distance < 0.1) {\n                return \"<0.1mi\";\n            }\n\n            return distance.toString() + \"mi\";\n        }\n\n        public static getHours(seconds: number): number {\n            return Math.floor(((seconds % 31536000) % 86400) / 3600);\n        }\n\n        public static getMinutes(seconds: number): number {\n            return Math.floor((((seconds % 31536000) % 86400) % 3600) / 60);\n        }\n\n        public static getTimeString(time: Date, msOffset: number = 0): string {\n            time = new Date(time.getTime() + msOffset);\n            return Utils.formatTime(time);\n        }\n\n        public static formatTime(date: Date) {\n            var hours = date.getHours();\n            var minutes = date.getMinutes();\n            var minutesString: string = minutes.toString();\n            var ampm = hours >= 12 ? \"pm\" : \"am\";\n            hours = hours % 12;\n            if (hours === 0) {\n                hours = 12;\n            }\n\n            if (minutes < 10) {\n                minutesString = \"0\" + minutesString;\n            }\n            return hours.toString() + \":\" + minutesString + \" \" + ampm;\n\n        }\n\n        // http://stackoverflow.com/questions/3219758/detect-changes-in-the-dom\n        public static observeDOM: (obj: Element, callback: () => void) => void = (() => {\n            var MutationObserver = (<any>window).MutationObserver || (<any>window).WebKitMutationObserver,\n                eventListenerSupported = window.addEventListener;\n\n            return function (obj, callback) {\n                if (MutationObserver) {\n                    // define a new observer\n                    var obs = new MutationObserver(function (mutations, observer) {\n                        if (mutations[0].addedNodes.length || mutations[0].removedNodes.length)\n                            callback();\n                    });\n                    // have the observer observe foo for changes in children\n                    obs.observe(obj, { childList: true, subtree: true });\n                }\n                else if (eventListenerSupported) {\n                    obj.addEventListener('DOMNodeInserted', callback, false);\n                    obj.addEventListener('DOMNodeRemoved', callback, false);\n                }\n            }\n        })();\n\n        public static hasAnyOwnProperties(obj: Object): boolean {\n            for (var prop in obj) {\n                if (obj.hasOwnProperty(prop)) {\n                    return true;\n                }\n            }\n            return false;\n        }\n\n        public static runOnce<T>(func: (...args: any[]) => T): (...args: any[]) => T {\n            var ran = false;\n            var memo: T;\n            return function (...args: any[]) {\n                if (!ran) {\n                    ran = true;\n                    memo = func.apply(this, arguments);\n                }\n                return memo;\n            };\n        };\n\n        public static spaPageNavigate(page: SBSPage, routeId?: string, exitId?: string, poiType?: PoiType, changeHash: boolean = true): void {\n            var pageId = \"#home\";\n            switch (page) {\n                case SBSPage.about:\n                    pageId = \"#about\";\n                    break;\n                case SBSPage.exit:\n                    pageId = \"#exit\";\n                    break;\n                case SBSPage.route:\n                    pageId = \"#route\";\n                    break;\n            }\n\n            var dataUrl = pageId;\n            if (routeId) {\n                dataUrl += \"&routeid=\" + routeId;\n            }\n            if (exitId) {\n                dataUrl += \"&exitid=\" + exitId;\n            }\n            if (poiType) {\n                dataUrl += \"&poitype=\" + PoiType[poiType].toLowerCase();\n            }\n\n            var reverse = (AppState.current.navigationLocation && AppState.current.navigationLocation.page > page);\n\n            AppState.current.knownHashChangeInProgress = true;\n\n            $.mobile.pageContainer.pagecontainer(\n                \"change\",\n                pageId, { dataUrl: dataUrl, changeHash: changeHash, transition: \"slide\", reverse: reverse });\n        }\n\n        public static getShareUrl(basePortalUrl: string, navLocation: ISBSNavigationLocation) {\n            var shareUrl = basePortalUrl;\n            if (shareUrl.substr(shareUrl.length - 1) !== \"/\") {\n                shareUrl += \"/\";\n            }\n\n            switch (navLocation.page) {\n                case SBSPage.route:\n                case SBSPage.exit:\n                    shareUrl += \"route/\" + navLocation.routeId;\n\n                    if (navLocation.page === SBSPage.exit) {\n                        shareUrl += \"/exit/osm-\" + navLocation.exitId;\n\n                        if (navLocation.poiType) {\n                            shareUrl += \"/\" + PoiType[navLocation.poiType];\n                        }\n                    }\n                    break;\n            }\n\n            return shareUrl;\n        }\n\n        public static getRouteTitleFromRouteId(routeId: string): string {\n            var routeTitle = \"\";\n\n            if (routeId && routeId.indexOf(\"-to-\") > 1) {\n                var fromAndTo = routeId.split(\"-to-\");\n                var fromString = fromAndTo[0];\n                var toString = fromAndTo[1];\n\n                if (fromString.length > 1 && toString.length > 1) {\n                    if ($.isNumeric(fromString[0])) {\n                        fromString = \"your location\";\n                    } else {\n                        fromString = Utils.getPlaceNameFromPlaceId(fromString);\n                    }\n                }\n\n                toString = Utils.getPlaceNameFromPlaceId(toString);\n                if (fromString && toString) {\n                    routeTitle = \"from \" + fromString + \" to \" + toString;\n                } else {\n                    routeTitle = \"\";\n                }\n            }\n\n            return routeTitle;\n        }\n\n        public static isHistoryAPISupported(): boolean {\n            return !!(window.history && history.pushState);\n        }\n\n        public static windowOpen(url: string) {\n            if (AppState.current.windowOpenTarget === \"_blank\") {\n                window.location.assign(url);\n            } else {\n                window.open(url, AppState.current.windowOpenTarget, \"location=yes\");\n            }\n        }\n\n        public static getPoiIconUrl(poiType: PoiType, iconFormat: PoiIconFormat, baseImageUrl: string) {\n            var poiTypeString = PoiType[poiType].toLowerCase();\n            return baseImageUrl + \"poi/\" + poiTypeString + \"/\" + poiTypeString + \"_\" + iconFormat.toString() + \".png\";\n        }\n\n        private static getPlaceNameFromPlaceId(placeId: string) {\n            var placeName = \"\";\n            var usIndex = placeId.indexOf(\"-united-states\");\n            if (usIndex > 0) {\n                placeId = placeId.substr(0, usIndex);\n\n                var state = placeId.substr(placeId.length - 2, 2).toUpperCase();\n                placeId = placeId.substr(0, placeId.length - 3);\n                placeId = placeId.replace(/-/g, ' ');\n                placeName = placeId.replace(/([^ \\t]+)/g, (_, word: string) => {\n                    return word[0].toUpperCase() + word.substr(1);\n                }) + \", \" + state;\n            }\n\n            return placeName;\n        }\n\n\n    }\n}","/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\n\n\"use strict\";\nmodule StopByStop {\n    export class LocationViewModel {\n        constructor(obj: ILocation) {\n            this.lat = obj.a;\n            this.lon = obj.o;\n            this.placeDescription = obj.pd || \"\";\n        }\n\n        public lat: number;\n        public lon: number;\n        public placeDescription: string;\n\n        private static GRAIN: number = 0.1;\n        public static getGridLocations(location: ILocation): LocationViewModel[]\n        {\n            var mainLocation = new LocationViewModel(\n                {\n                    a: LocationViewModel.roundToNLat(location.a),\n                    o: LocationViewModel.roundToWLon(location.o)\n                });\n            \n\n            // n locations\n            var nwLocation = new LocationViewModel({\n                a: mainLocation.lat + LocationViewModel.GRAIN,\n                o: mainLocation.lon - LocationViewModel.GRAIN\n            });\n            var nLocation = new LocationViewModel({\n                a: mainLocation.lat + LocationViewModel.GRAIN,\n                o: mainLocation.lon\n            });\n            var neLocation = new LocationViewModel({\n                a: mainLocation.lat + LocationViewModel.GRAIN,\n                o: mainLocation.lon + LocationViewModel.GRAIN\n            });\n\n          \n\n            // e locations\n            var eLocation = new LocationViewModel({\n                a: mainLocation.lat,\n                o: mainLocation.lon + LocationViewModel.GRAIN\n            });\n            var seLocation = new LocationViewModel({\n                a: mainLocation.lat - LocationViewModel.GRAIN,\n                o: mainLocation.lon + LocationViewModel.GRAIN\n            });\n\n\n            // s locations\n            var sLocation = new LocationViewModel({\n                a: mainLocation.lat - LocationViewModel.GRAIN,\n                o: mainLocation.lon\n            });\n            var swLocation = new LocationViewModel({\n                a: mainLocation.lat - LocationViewModel.GRAIN,\n                o: mainLocation.lon - LocationViewModel.GRAIN\n            });\n            \n\n            // w location\n            var wLocation = new LocationViewModel({\n                a: mainLocation.lat,\n                o: mainLocation.lon - LocationViewModel.GRAIN\n            });\n\n            return [\n                mainLocation,\n                nwLocation,\n                nLocation,\n                neLocation,\n                eLocation,\n                seLocation,\n                sLocation,\n                swLocation,\n                wLocation\n            ];\n        }\n        private static roundToNLat(lat: number): number {\n\n            var roundedLat = LocationViewModel.round1DecimalDigit(lat);\n            if (roundedLat < lat) {\n                roundedLat += 0.1;\n            }\n            return roundedLat;\n        }\n        private static roundToWLon(lon: number): number {\n            var roundedLon = LocationViewModel.round1DecimalDigit(lon);\n            if (roundedLon > lon) {\n                roundedLon -= 0.1;\n            }\n            return roundedLon;\n        }\n        private static round1DecimalDigit(n: number): number {\n            return Math.round(n * 10) / 10\n        }\n    }\n}","/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\n\n\"use strict\";\nmodule StopByStop {\n    export class ReviewGroupViewModel {\n        private _obj: IReviewGroup;\n\n        constructor(obj: IReviewGroup) {\n            this._obj = obj;\n            this.name = ko.observable(this._obj.n);\n            this.icon = ko.observable(this._obj.i);\n            this.reviewCount = ko.observable(this._obj.rc);\n            this.reviewPageUrl = ko.observable(this._obj.u);\n            this.ratingImageUrl = ko.observable(this._obj.riu);\n            this.rating = ko.observable(this._obj.r);\n        }\n\n        public name: KnockoutObservable<string>;\n        public icon: KnockoutObservable<string>;\n        public reviewCount: KnockoutObservable<number>;\n        public reviewPageUrl: KnockoutObservable<string>;\n        public ratingImageUrl: KnockoutObservable<string>;\n        public rating: KnockoutObservable<number>;\n    }\n}","/// <reference path=\"../tsdef/jquery.d.ts\"/>\n/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\n/// <reference path=\"LocationViewModel.ts\"/>\n/// <reference path=\"ReviewGroupViewModel.ts\"/>\n/// <reference path=\"FilterViewModel.ts\"/>\n\n\"use strict\";\nmodule StopByStop {\n    export class PoiViewModel {\n        private _obj: IPoi;\n        private _reviewDataItem: IReviewGroup;\n\n        constructor(obj: IPoi) {\n            this._obj = obj;\n\n            this.id = this._obj.id;\n            this.categories = this._obj.c.map((value, index, arr) => AppState.current.metadata.c[value]);\n            this.poiType = this._obj.t;\n            this.name = this._obj.n;\n            this.description = ko.observable(this._obj.d);\n            this.location = new LocationViewModel(this._obj.l);\n            this.visible = ko.observable(true);\n\n            this.telPhoneString = this._obj.p;\n\n            this.isYInfoLoading = ko.observable(true);\n            this.isYInfoVisible = ko.observable(true);\n            this.yUrl = ko.observable(\"#\");\n            this.yStarClass = ko.observable(\"stars_0\");\n            this.yReviewCountString = ko.observable(\"\");\n            this.urlName = this._obj.un;\n        }\n\n\n        public updateYInfo(reviewDataItem: IReviewGroup): void {\n            if (reviewDataItem) {\n                this.yUrl(reviewDataItem.u);\n                this.yStarClass(PoiViewModel.getYStarClass(reviewDataItem.r));\n                this.yReviewCountString(PoiViewModel.getReviewsString(reviewDataItem.rc));\n                this.isYInfoLoading(false);\n                this._reviewDataItem = reviewDataItem;\n            } else if (!this._reviewDataItem) {\n                this.isYInfoVisible(false);\n            }\n        }\n\n        public urlName: string;\n        public categories: IPoiCategory[];\n        public id: string;\n        public poiType: PoiType;\n        public name: string;\n        public description: KnockoutObservable<string>;\n        public location: LocationViewModel;\n        public visible: KnockoutObservable<boolean>;\n        public telPhoneString: string;\n        public isYInfoLoading: KnockoutObservable<boolean>;\n        public isYInfoVisible: KnockoutObservable<boolean>;\n\n        public yUrl: KnockoutObservable<string>;\n        public yStarClass: KnockoutObservable<string>;\n        public yReviewCountString: KnockoutObservable<string>;\n\n\n        private static getReviewsString(reviewCount: number): string {\n            if (reviewCount === 0) {\n                return \"no reviews\";\n            } else if (reviewCount === 1) {\n                return \"1 review\";\n            }\n            return reviewCount.toString() + \" reviews\";\n        };\n\n        private static getYStarClass(rating: number): string {\n            var starClassName: string = null;\n            switch (rating.toString()) {\n                case \"5\":\n                    starClassName = \"stars_5\";\n                    break;\n                case \"4.5\":\n                    starClassName = \"stars_4_half\";\n                    break;\n                case \"4\":\n                    starClassName = \"stars_4\";\n                    break;\n                case \"3.5\":\n                    starClassName = \"stars_3_half\";\n                    break;\n                case \"3\":\n                    starClassName = \"stars_3\";\n                    break;\n                case \"2.5\":\n                    starClassName = \"stars_2_half\";\n                    break;\n                case \"2\":\n                    starClassName = \"stars_2\";\n                    break;\n                case \"1.5\":\n                    starClassName = \"stars_1_half\";\n                    break;\n                case \"1\":\n                    starClassName = \"stars_1\";\n                    break;\n                case \"0\":\n                    starClassName = \"stars_0\";\n                    break;\n            }\n\n            return starClassName;\n        }\n    }\n}   ","/// <reference path=\"../tsdef/jquery.d.ts\"/>\n/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\n\n\"use strict\";\nmodule StopByStop {\n    export interface IStopPlace {\n        id: string;\n        exitId: string;\n        name: string;\n        lat: number;\n        lon: number;\n        duration: number;\n        /** distance to exit from route start */\n        dtefrs: number;\n        /** distance from exit */\n        dfe: number;\n        type: PoiType;\n    }\n}","/// <reference path=\"../tsdef/jquery.d.ts\"/>\n/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\n/// <reference path=\"LocationViewModel.ts\"/>\n/// <reference path=\"ReviewGroupViewModel.ts\"/>\n/// <reference path=\"PoiViewModel.ts\"/>\n/// <reference path=\"IStopPlace.ts\"/>\n/// <reference path=\"../Utils.ts\"/>\n\n\"use strict\";\nmodule StopByStop {\n    export class PoiOnJunctionViewModel implements IStopPlace {\n        private _app: IAppViewModel;\n\n        constructor(obj: IPoiOnJunction, exit: IRouteJunction, app: IAppViewModel) {\n            this.obj = obj;\n            this._app = app;\n            this.id = this.obj.id;\n            this.dfe = this.obj.dfj;\n            this.dtefrs = exit.dfrs;\n            this.exitId = exit.j.oid.toString();\n            this.distanceFromJunctionText = Utils.getMileString(this.dfe) + \" miles from exit\";\n            this.poi = new PoiViewModel(this.obj.p);\n            this.name = this.poi.name;\n            this.lat = this.poi.location.lat;\n            this.lon = this.poi.location.lon;\n            this.type = obj.p.t;\n            this.poiTypeString = PoiType[this.type].toLowerCase();\n        }\n\n        public poiTypeString:string;\n        public obj: IPoiOnJunction;\n        public id: string;\n        public exitId: string;\n        public name: string;\n        public location: LocationViewModel;\n        public dfe: number;\n        public dtefrs: number;\n        public distanceFromJunctionText: string;\n        public poi: PoiViewModel;\n        public duration: number;\n        public lat: number;\n        public lon: number;\n        public type: PoiType;\n\n\n        public addToRouteOptionsClick(): void {\n            var plannedStop = this._app.routePlan.getOrCreateStop(this);\n            this._app.routePlan.showStopSettings(plannedStop);\n        }\n    }\n}   ","/// <reference path=\"../tsdef/jquery.d.ts\"/>\n/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\n/// <reference path=\"../Utils.ts\"/>\n/// <reference path=\"../Telemetry.ts\"/>\n\n/// <reference path=\"PoiOnJunctionViewModel.ts\"/>\n\n\n\"use strict\";\nmodule StopByStop {\n    export class RouteStopViewModel {\n\n        constructor(stopPlace: IStopPlace) {\n            this.stopPlace = stopPlace;\n            this.sbsid = stopPlace.id;\n            this.location = new LocationViewModel({ a: stopPlace.lat, o: stopPlace.lon });\n            this.name = stopPlace.name;\n\n            this.stopDurationFastUpdate = ko.observable(stopPlace.duration || 15); //default stop time is 15 minutes\n\n            this.stopDuration = ko.observable(stopPlace.duration || 15); //default stop time is 15 minutes\n            \n            this.stopDuration.extend({ rateLimit: { timeout: 1000, method: \"notifyWhenChangesStop\" } });\n\n\n            this.exitEta = ko.observable(new Date());\n            this.etaString = ko.computed(() => {\n                var drivingTimeToPlaceInSeconds = this.getDrivingTimeToPlaceInSeconds();\n                var stopEta = new Date(this.exitEta().getTime() + drivingTimeToPlaceInSeconds * 1000);\n                var stopEtd = new Date(stopEta.getTime() + this.stopDuration() * 60 * 1000);\n                return Utils.getTimeString(stopEta) + \"-\" + Utils.getTimeString(stopEtd);\n            });\n            this.stopDurationHours = ko.computed(() => {\n                var n = (Math.floor(this.stopDurationFastUpdate() / 60)).toString();\n                if (n.length === 1) {\n                    n = \"0\" + n;\n                }\n                return n;\n            });\n\n            this.stopDurationMinutes = ko.computed(() => {\n                var n = (this.stopDurationFastUpdate() % 60).toString();\n                if (n.length === 1) {\n                    n = \"0\" + n;\n                }\n                return n;\n            });\n\n            this.detourDuration = ko.computed(() => {\n                var drivigTimeToPlaceInSeconds = this.getDrivingTimeToPlaceInSeconds() * 2;\n                var stopDurationInSeconds = this.stopDuration() * 60;\n                return drivigTimeToPlaceInSeconds + stopDurationInSeconds;\n            });\n        }\n\n        private getDrivingTimeToPlaceInSeconds(): number {\n            // for now let's assume 20mph non-highway speed\n            return this.stopPlace.dfe / 20 * 3600;\n        }\n\n        public add5MinutesToDuration(): void {\n            Telemetry.trackEvent(TelemetryEvent.Add5MinToStop);\n            this.stopDurationFastUpdate(this.stopDurationFastUpdate() + 5);\n            this.stopDuration(this.stopDurationFastUpdate());\n        }\n\n        public subtract5MinutesFromDuration(): void {\n            Telemetry.trackEvent(TelemetryEvent.Remove5MinFromStop);\n            this.stopDurationFastUpdate(Math.max(0, this.stopDurationFastUpdate() - 5));\n            this.stopDuration(this.stopDurationFastUpdate());\n        }\n\n        public navigate(): void {\n            Telemetry.trackEvent(TelemetryEvent.StopPopupNavigateClick, null, null, true);\n            if (navigator && navigator.geolocation) {\n                navigator.geolocation.getCurrentPosition(\n                    (position: Position) => {\n\n                        var srcLat = position.coords.latitude;\n                        var srcLon = position.coords.longitude;\n                        var navigationUrl = \"https://maps.google.com/maps?saddr=\"\n                            + srcLat + \",\"\n                            + srcLon + \"&daddr=\"\n                            + this.location.lat.toString() + \",\"\n                            + this.location.lon.toString();\n\n\n                        Telemetry.trackEvent(\n                            TelemetryEvent.StopPopupNavigateBeforeDirect,\n                            [\n                                { k: TelemetryProperty.NavigationUrl, v: navigationUrl }\n                            ],\n                            null,\n                            true);\n\n                        Utils.windowOpen(navigationUrl);\n                    },\n                    (positionError: PositionError) => {\n                        try {\n                            Telemetry.trackError(new Error(\"getCurrentPositionError\"));\n                        }\n                        catch (ex) { }\n                        window.alert(\"Please allow StopByStop.com to share your location.\");\n                    });\n            }\n        };\n\n        public stopDuration: KnockoutObservable<number>;\n        public stopDurationFastUpdate: KnockoutObservable<number>;\n        public stopDurationHours: KnockoutComputed<string>;\n        public stopDurationMinutes: KnockoutComputed<string>;\n        public visible: KnockoutComputed<boolean>;\n        public roadlineTopOffsetPart: KnockoutComputed<number>;\n\n\n        /** total detour duration in seconds */\n        public detourDuration: KnockoutComputed<number>;\n        public exitEta: KnockoutObservable<Date>;\n        public etaString: KnockoutComputed<string>;\n        public sbsid: string;\n        public location: LocationViewModel;\n        public name: string;\n        public stopPlace: IStopPlace;\n\n    }\n}","/// <reference path=\"tsdef/jquery.d.ts\"/>\n/// <reference path=\"tsdef/jquerymobile.d.ts\"/>\n/// <reference path=\"tsdef/knockout-3.3.d.ts\"/>\n/// <reference path=\"Telemetry.ts\"/>\n/// <reference path=\"Utils.ts\"/>\n/// <reference path=\"stopbystop-interfaces.ts\"/>\n\nmodule StopByStop {\n\n    export class AppState {\n        public static current: IAppState = {\n            basePortalUrl: null,\n            baseDataUrl: null,\n            baseImageUrl: null,\n            windowOpenTarget: \"_system\",\n            metadata: null\n        };\n    }\n}","/// <reference path=\"../tsdef/jquery.d.ts\"/>\n/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\n/// <reference path=\"LocationViewModel.ts\"/>\n/// <reference path=\"PoiOnJunctionViewModel.ts\"/>\n\n\"use strict\";\nmodule StopByStop {\n    export class JunctionViewModel {\n        private _obj: IJunction;\n        private _app: IAppViewModel;\n\n        constructor(robj: IRouteJunction, app: IAppViewModel) {\n            this._obj = robj.j;\n            this._app = app;\n\n            this.name = this._obj.n;\n            this.index = this._obj.i;\n            this.osmid = this._obj.oid;\n            this.highwayName = this._obj.hn;\n            this.ref = this._obj.r;\n            this.location = new LocationViewModel(this._obj.l);\n            this.exitTo = this._obj.et;\n            this.exitToLeft = this._obj.etl;\n            this.exitToRight = this._obj.etr;\n\n            if (this._obj.p) {\n                this.pois = ko.observableArray<PoiOnJunctionViewModel>();\n\n                for (var i = 0; i < this._obj.p.length; i++) {\n                    var poiOnJunctionViewModel = new PoiOnJunctionViewModel(this._obj.p[i], robj, this._app);\n                    this.pois.push(poiOnJunctionViewModel);\n                    //if (poiOnJunctionViewModel.poi.telPhoneString) {\n                    //var normalizedPhoneNumberString = JunctionViewModel.normalizePhoneNumber(poiOnJunctionViewModel.poi.telPhoneString);\n                    this.poiLookup[this._obj.p[i].id] = poiOnJunctionViewModel;\n                    //}\n                }\n            }\n\n            this.pois.sort((l, r) => l.dfe - r.dfe);\n\n            \n        }\n\n        public name: string;\n        public index: number;\n        public osmid: number;\n        public highwayName: string;\n        public ref: string;\n        public location: LocationViewModel;\n        public exitTo: string;\n        public exitToLeft: string;\n        public exitToRight: string;\n        public pois: KnockoutObservableArray<PoiOnJunctionViewModel>;\n        public exitName: KnockoutComputed<string>;\n        public poiLookup: { [id: string]: PoiOnJunctionViewModel } = {};\n        public completeYDataLoad() {\n            for (var i = 0; i < this._obj.p.length; i++) {\n                this.poiLookup[this._obj.p[i].id].poi.updateYInfo(null);\n            }\n        }\n\n        private static normalizePhoneNumber(phoneNumberString) {\n            phoneNumberString = phoneNumberString.replace(/[^0-9]/g, \"\");\n            phoneNumberString = phoneNumberString.substr(phoneNumberString.length - 10);\n            return phoneNumberString;\n        }\n    }\n}","/// <reference path=\"../tsdef/jquery.d.ts\"/>\n/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\n/// <reference path=\"JunctionViewModel.ts\"/>\n/// <reference path=\"FilterViewModel.ts\"/>\n/// <reference path=\"../Utils.ts\"/>\n/// <reference path=\"../AppState.ts\"/>\n\n\"use strict\";\nmodule StopByStop {\n    export class RouteJunctionPoiTypeViewModel {\n        private _rpc: IRootPoiCategory;\n        private _junctionViewModel:JunctionViewModel;\n\n        constructor(rootPoiCategory: IRootPoiCategory, junctionViewModel: JunctionViewModel, app: IAppViewModel) {\n            this._rpc = rootPoiCategory;\n            this.visiblePois = ko.observableArray([]);\n            this.closestPoiDistance = ko.observable(\"\");\n            this.poiCountString = ko.observable(\"\");\n            this._junctionViewModel = junctionViewModel;\n            this.poiTypeString = PoiType[rootPoiCategory.t].toLowerCase();\n            this.url = Utils.getShareUrl(\n                AppState.current.basePortalUrl,\n                {\n                    page: SBSPage.exit,\n                    routeId: app.routeId,\n                    exitId: this._junctionViewModel.osmid.toString(),\n                    poiType: this._rpc.t\n                });\n\n            this.poiCountStringWithLabel = ko.computed(()=>\n            {\n                return this.poiCountString()+ \" \" + this._rpc.n + \"(s)\";\n            });\n        }\n\n        public url: string;\n        public poiTypeString: string;\n        public visiblePois: KnockoutObservableArray<PoiOnJunctionViewModel>;\n        public closestPoiDistance: KnockoutObservable<string>;\n        public poiCountString: KnockoutObservable<string>;\n        public poiCountStringWithLabel: KnockoutObservable<string>;\n\n        public update(): void {\n\n            this.visiblePois.sort((a,b)=>a.dfe-b.dfe);\n            this.closestPoiDistance(this.visiblePois().length > 0 ? Utils.getMileString(this.visiblePois()[0].dfe) : \"\");          \n            this.poiCountString(this.visiblePois().length > 9 ? \"9+\" : this.visiblePois().length.toString());\n        }\n\n        public navigateToExitPage(): void {\n            Utils.spaPageNavigate(\n                SBSPage.exit, \n                AppState.current.navigationLocation.routeId, \n                this._junctionViewModel.osmid.toString(), \n                this._rpc.t);\n        }\n    }\n}","/// <reference path=\"../tsdef/jquery.d.ts\"/>\n/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\n/// <reference path=\"JunctionViewModel.ts\"/>\n/// <reference path=\"FilterViewModel.ts\"/>\n/// <reference path=\"RouteJunctionPoiTypeViewModel.ts\"/>\n/// <reference path=\"../Utils.ts\"/>\n/// <reference path=\"../AppState.ts\"/>\n\n\"use strict\";\nmodule StopByStop {\n    export class RouteJunctionViewModel {\n\n        private _obj: IRouteJunction;\n        private _poiTypeViewModelLookup: { [id: number]: RouteJunctionPoiTypeViewModel };\n\n        constructor(obj: IRouteJunction, routeStartTime: Date, app: IAppViewModel) {\n            this._obj = this.routeJunction = obj;\n            this.distanceFromRouteStartText = ko.observable(Utils.getMileString(this._obj.dfrs));\n            this.junction = new JunctionViewModel(this._obj, app);\n            this.visible = ko.observable(true);\n            this.top = ko.observable(\"\");\n            this.stops = ko.observableArray<RouteStopViewModel>();\n            this.poiTypeViewModels = ko.observableArray<RouteJunctionPoiTypeViewModel>();\n            this._poiTypeViewModelLookup = {};\n\n\n            this.etaWithoutStops = new Date(routeStartTime.getTime() + this._obj.tfrs * 1000);\n            this.eta = ko.observable(this.etaWithoutStops);\n            this.hasStops = ko.computed(() => this.stops().length > 0);\n\n            if ((<AppViewModel>app).title && (<AppViewModel>app).title()) {\n                var routeTitle = (<AppViewModel>app).title();\n                routeTitle = (routeTitle.substr(0, 1).toLowerCase() + routeTitle.substr(1));\n                this.title = this.junction.name + \" on the way from \" + routeTitle;\n            }\n\n            var rootPoiCategories = AppState.current.metadata.rpc;\n            for (var rpcId in rootPoiCategories) {\n                var rpc = rootPoiCategories[rpcId];\n                var vm = new RouteJunctionPoiTypeViewModel(rpc, this.junction, app);\n                this.poiTypeViewModels.push(vm);\n                this._poiTypeViewModelLookup[rpc.t] = vm;\n            }\n\n            this.description = ko.computed(() => {\n                var d = this.junction.name + \". \";\n                $.each(this.poiTypeViewModels(), (i, item) => {\n                    d += \" \" + item.poiCountStringWithLabel();\n                });\n                d += \" within 5 mile travel distance\";\n                return d;\n            });\n\n            this.etaString = ko.computed(() => {\n                var s = Utils.getTimeString(this.eta());\n                if (this.hasStops()) {\n                    s = Utils.getTimeString(this.eta()) + \"-\" + Utils.getTimeString(this.etd());\n                }\n                return s;\n            });\n\n            this.etd = ko.computed(() => {\n                var totalDetourTime = 0;\n                for (var i = 0; i < this.stops().length; i++) {\n                    totalDetourTime += this.stops()[i].detourDuration();\n                }\n                return new Date(this.eta().getTime() + totalDetourTime * 1000);\n            });\n            \n            this.url = Utils.getShareUrl(\n                AppState.current.basePortalUrl,\n                {\n                    page: SBSPage.exit,\n                    routeId: app.routeId,\n                    exitId: this.routeJunction.j.oid.toString()\n                });\n        }\n\n        public poiTypeViewModels: KnockoutObservableArray<RouteJunctionPoiTypeViewModel>;\n        public routeJunction: IRouteJunction;\n        public distanceFromRouteStartText: KnockoutObservable<string>;\n        public junction: JunctionViewModel;\n        public visible: KnockoutObservable<boolean>;\n        public top: KnockoutObservable<string>;\n        public title: string;\n        public url: string;\n        public stops: KnockoutObservableArray<RouteStopViewModel>;\n\n        public etaWithoutStops: Date;\n        public eta: KnockoutObservable<Date>;\n        public etaString: KnockoutComputed<string>;\n        public etd: KnockoutComputed<Date>;\n        public hasStops: KnockoutComputed<boolean>;\n        public description: KnockoutComputed<string>;\n\n        public onPoiVisibilityUpdated(): boolean {\n            $.each(this.poiTypeViewModels(), (i, item) => { item.visiblePois.removeAll(); });\n            var junctionVisibilityChanged = false;\n            var visible = false;\n            for (var i = 0; i < this.junction.pois().length; i++) {\n                var poi = this.junction.pois()[i];\n                if (poi.obj.v === undefined || poi.obj.v === true) {\n                    this._poiTypeViewModelLookup[poi.type].visiblePois.push(poi);\n                    visible = true;\n                }\n            }\n\n            $.each(this.poiTypeViewModels(), (i, item) => { item.update(); });\n            junctionVisibilityChanged =  this.visible() !== visible;\n            this.visible(visible);\n            return junctionVisibilityChanged;\n        }\n\n        public navigateToExitPage(): void {\n            Utils.spaPageNavigate(SBSPage.exit, AppState.current.navigationLocation.routeId, this.junction.osmid.toString());\n        }\n    }\n}","/// <reference path=\"../tsdef/jquery.d.ts\"/>\n/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\n/// <reference path=\"../Utils.ts\"/>\n/// <reference path=\"../Telemetry.ts\"/>\n/// <reference path=\"../AppState.ts\"/>\n\n/// <reference path=\"RouteStopViewModel.ts\"/>\n/// <reference path=\"RouteJunctionViewModel.ts\"/>\n\n\n\"use strict\";\nmodule StopByStop {\n\n    export interface IRoutePlan {\n        stops: { [id: string]: IStopPlace };\n    };\n\n    export class RoutePlanViewModel {\n        private _stopDictionary: { [id: string]: RouteStopViewModel } = {};\n        private _storage: Storage = window.sessionStorage;\n        private _storageItem: { [id: string]: IRoutePlan } = {};\n        private _routeId: string;\n        private _destination: LocationViewModel;\n\n        constructor(routeId: string, routeDistance: number, destination: LocationViewModel, storageOverride: Storage = null) {\n            this.routeDistance = routeDistance;\n            this._storage = storageOverride || window.sessionStorage;\n            this._routeId = routeId;\n            this.stops = ko.observableArray([]);\n            this.editedStop = ko.observable<RouteStopViewModel>(null);\n            this._stopDictionary = {};\n            this._destination = destination;\n        }\n\n        public loadStopsFromStorage(): void {\n            this.stops([]);\n            this._stopDictionary = {};\n            if (this._storage.getItem(ROUTE_PLAN_STORAGE_KEY)) {\n                this._storageItem = JSON.parse(this._storage.getItem(ROUTE_PLAN_STORAGE_KEY));\n            } else {\n                this._storageItem = {};\n            }\n\n            if (!this._storageItem[this._routeId]) {\n                this._storageItem[this._routeId] = { stops: {} };\n            } else {\n                var stops = this._storageItem[this._routeId].stops;\n\n                for (var id in stops) {\n                    var routeStopViewModel = this.getOrCreateStop(stops[id]);\n                    this.addStopToRoute(routeStopViewModel, true);\n                }\n            }\n\n            this.saveRouteToStorage();\n        }\n\n        public junctionMap: { [id: string]: RouteJunctionViewModel } = {};\n        public routeDistance: number;\n        public stops: KnockoutObservableArray<RouteStopViewModel>;\n        public editedStop: KnockoutObservable<RouteStopViewModel>;\n\n        public getOrCreateStop(placeObj: IStopPlace, reloadFromCache: boolean = false): RouteStopViewModel {\n\n            /* Ensure that object only contains members that are part of IStopPlace interface,\n               as this is about to be serialized. Is there a better way to do it? */\n\n            var place: IStopPlace = {\n                dfe: placeObj.dfe,\n                dtefrs: placeObj.dtefrs,\n                duration: placeObj.duration,\n                exitId: placeObj.exitId,\n                id: placeObj.id,\n                lat: placeObj.lat,\n                lon: placeObj.lon,\n                name: placeObj.name,\n                type: placeObj.type\n            };\n\n            var sbsid = place.id;\n\n            if (!this._stopDictionary[sbsid]) {\n                var routeStopViewModel = new RouteStopViewModel(place);\n                this._stopDictionary[sbsid] = routeStopViewModel;\n            }\n\n            var stop = this._stopDictionary[sbsid];\n            return stop;\n        }\n\n        public addEditedStopToRoute(): void {\n            this.addStopToRoute(this.editedStop());\n            Utils.spaPageNavigate(\n                SBSPage.route,\n                AppState.current.navigationLocation.routeId);\n        }\n\n        public removeEditedStop(): void {\n            this.removeStop(this.editedStop());\n            this.closeStopSettings();\n        }\n\n        public navigateToEditedStop(): void {\n            this.editedStop().navigate();\n        }\n\n        public addStopToRoute(routeStopViewModel: RouteStopViewModel, reloadFromCache: boolean = false): void {\n            Telemetry.trackEvent(TelemetryEvent.AddStopToRoute, [{ k: TelemetryProperty.LoadStopsFromCache, v: reloadFromCache.toString() }]);\n\n\n            var place = routeStopViewModel.stopPlace;\n\n            // only add it to stops if it is not already in the collection\n            var alreadyAdded = false;\n            $.each(this.stops(), (index: number, value: RouteStopViewModel) => {\n                if (value.sbsid === place.id) {\n                    alreadyAdded = true;\n                }\n            });\n\n            if (!alreadyAdded) {\n                this.stops.push(this._stopDictionary[place.id]);\n                var routeJunctionViewModel = this.junctionMap[place.exitId];\n\n                if (routeJunctionViewModel) {\n                    routeJunctionViewModel.stops.push(routeStopViewModel);\n                } else {\n                    Telemetry.trackError(new Error(\"RouteStopViewModel.addStopToRoute.0\"), null, null);\n                }\n\n\n            }\n        }\n\n        public removeStop(stop: RouteStopViewModel) {\n            Telemetry.trackEvent(TelemetryEvent.RemoveStopFromRoute);\n            var sbsid = stop.sbsid;\n\n            if (this._stopDictionary[sbsid]) {\n                var stop = this._stopDictionary[sbsid];\n                this.stops.remove(stop);\n\n                var routeJunctionViewModel = this.junctionMap[stop.stopPlace.exitId];\n                if (routeJunctionViewModel) {\n                    routeJunctionViewModel.stops.remove(stop);\n                }\n\n                delete this._stopDictionary[sbsid];\n\n            }\n        }\n\n        public showStopSettings(plannedStop: RouteStopViewModel): void {\n            Telemetry.trackEvent(TelemetryEvent.ShowStopSettingsPopup);\n            this.editedStop(plannedStop);\n\n            var stopSettingsDialog = $(\".\" + AppState.current.pageInfo.pageName + \" .stop-settings-dialog\");\n\n            stopSettingsDialog.on('popupafteropen', function () {\n                var hCenter = ($(window).width() - stopSettingsDialog.width()) / 2;\n                var vCenter = ($(window).height() - stopSettingsDialog.height()) / 2;\n                $('.ui-popup-container').css({\n                    top: vCenter,\n                    left: hCenter,\n                    position: \"fixed\"\n                });\n            });\n\n\n            stopSettingsDialog.popup({\n                transition: \"slidedown\",\n                corners: true\n            });\n\n            (<any>ko).tasks.runEarly();\n\n            stopSettingsDialog.trigger(\"create\");\n            stopSettingsDialog.popup(\"open\");\n        }\n\n        private closeStopSettings() {\n            var stopSettingsDialog =\n                $(\".\" + AppState.current.pageInfo.pageName + \" .stop-settings-dialog\");\n            stopSettingsDialog.popup(\"close\");\n        }\n\n        public navigate(): void {\n            Telemetry.trackEvent(TelemetryEvent.RoutePlanNavigateClick, null, null, true);\n            if (this._destination && navigator && navigator.geolocation) {\n                navigator.geolocation.getCurrentPosition(\n                    (position: Position) => {\n\n                        var srcLat = position.coords.latitude;\n                        var srcLon = position.coords.longitude;\n\n                        var daddrStr = \"\";\n                        for (var i = 0; i < this.stops().length; i++) {\n                            if (i > 0) {\n                                daddrStr += \"+to:\";\n                            }\n                            daddrStr += (this.stops()[i].location.lat + \",\" + this.stops()[i].location.lon);\n                        }\n\n                        if (daddrStr !== \"\") {\n                            daddrStr += \"+to:\";\n                        }\n\n                        daddrStr += this._destination.lat + \",\" + this._destination.lon;\n                        var navigationUrl = \"https://maps.google.com/maps?saddr=\"\n                            + srcLat + \",\"\n                            + srcLon + \"&daddr=\"\n                            + daddrStr;\n\n                        Telemetry.trackEvent(\n                            TelemetryEvent.RoutePlanNavigateBeforeDirect,\n                            [\n                                { k: TelemetryProperty.StopCount, v: this.stops().length.toString() },\n                                { k: TelemetryProperty.NavigationUrl, v: navigationUrl }\n                            ],\n                            null,\n                            true);\n\n                        Utils.windowOpen(navigationUrl);\n\n                    },\n                    (positionError: PositionError) => {\n                        Telemetry.trackError(new Error(\"getCurrentPositionError\"));\n                        window.alert(\"Please allow StopByStop.com to share your location.\");\n                    });\n            }\n        };\n\n        private saveRouteToStorage(): void {\n\n        }\n    }\n}","/// <reference path=\"../tsdef/jquery.d.ts\"/>\n/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\n\n/// <reference path=\"FilterViewModel.ts\"/>\n/// <reference path=\"RouteStopViewModel.ts\"/>\n/// <reference path=\"RoutePlanViewModel.ts\"/>\n\n\"use strict\";\nmodule StopByStop {\n    export interface IAppViewModel {\n        filter: FilterViewModel;\n        routePlan: RoutePlanViewModel;\n        routeId: string;\n    }\n}","/// <reference path=\"stopbystop-interfaces.ts\"/>\n\nmodule StopByStop {\n    export class InitUrls implements IInitUrls {\n        constructor(baseUrl: string, baseImageUrl: string) {\n            if (typeof baseUrl !== \"string\") {\n                baseUrl = \"/\";\n            } else if (!/\\/$/.test(baseUrl)) {\n                baseUrl += \"/\";\n            }\n\n            this.BaseImageUrl = baseImageUrl;\n            this.BaseUrl = baseUrl;\n\n            this.PlacesDataUrlV2 = baseUrl + \"placev2/\";\n            this.RouteDataUrlV2 = baseUrl + \"routedatav2/\";\n            this.PoiDataUrlV2 = baseUrl + \"poiv2/\";\n            this.PlacesNearbyDataUrlV2 = baseUrl + \"placesnearbyv2/\";\n\n            this.CityImagesUrl = \"https://az804061.vo.msecnd.net/client/content/city_images/\";\n        }\n\n        public BaseUrl: string;\n        public BaseImageUrl: string;\n\n        public RouteDataUrlV2: string;\n        public PlacesDataUrlV2: string;\n        public PoiDataUrlV2: string;\n        public PlacesNearbyDataUrlV2: string;\n        public CityImagesUrl: string;\n    }\n}","/// <reference path=\"tsdef/jquery.d.ts\"/>\n/// <reference path=\"tsdef/jquerymobile.d.ts\"/>\n/// <reference path=\"tsdef/knockout-3.3.d.ts\"/>\n/// <reference path=\"AppState.ts\" />\n/// <reference path=\"Telemetry.ts\"/>\n/// <reference path=\"Utils.ts\"/>\n/// <reference path=\"stopbystop-interfaces.ts\"/>\n/// <reference path=\"InitUrls.ts\"/>\n\nmodule StopByStop {\n\n    export class InitHome {\n        static yIncrement: number = -100;\n\n        /*\n        The functionality below pulls the image url based on lat long\n        And populates the images inside a div\n        If an image is not available, it is shown as a blank div\n        */\n        public static addImagesDynamically(prevPlace, currentLocationString) {\n\n            var prevPlace = $('#Images').data('prevPlace');\n            var place = $('#from').data('place');\n            if (place === null) {\n                return true;\n            }\n            if (prevPlace && prevPlace.n === place.n) {\n                // Dont proceed further as the same place is being selected\n                return true;\n            }\n            // Continue with the processing if the previous place doesnt match with the current returned place\n            $('#Images').data('prevPlace', place);\n            //Remove any div contents from the previous population before adding new divs\n            $(\"#Images\").empty();\n            var placesNearbyUrl = \"\";\n            //If the place returned is the current location, the processing should be different, \n            //should be picked up from place.i\n            if (place.n === currentLocationString) {\n                var modifiedCurrentLocation = place.i.replace(\",\", \"/\");\n                placesNearbyUrl = AppState.current.urls.PlacesNearbyDataUrlV2 + modifiedCurrentLocation;\n            }\n            else {\n                placesNearbyUrl = AppState.current.urls.PlacesNearbyDataUrlV2 + place.l.a + '/' + place.l.o;\n            }\n            $.ajax({\n                url: placesNearbyUrl,\n                dataType: 'json',\n                method: 'GET',\n                success: function (result) {\n                    var imageDiv = $(\"#Images\"), myDivs = [], divIndex = 0, numOfDivs = result.length;\n                    if (numOfDivs > 10 && window.screen.width > 480) {\n                        numOfDivs = 10; //Restrict results to 10 for a desktop screen\n                    }\n                    if (numOfDivs > 6 && window.screen.width < 480) {\n                        numOfDivs = 6; //Restrict results to 6 for a mobile screen\n                    }\n                    for (divIndex; divIndex < numOfDivs; divIndex += 1) {\n                        var divId = \"appendedImagediv\" + divIndex;\n                        var imageId = \"appendedImageId\" + divIndex;\n                        myDivs.push(InitHome.createDiv(divIndex, result[divIndex]));\n                        $(myDivs[divIndex]).data('place', result[divIndex]);\n                        $(\"#Images\").append(myDivs[divIndex]);\n                        $(myDivs[divIndex]).on('click', function () {\n\n                            $(\"#to\").val($(this).data('place').n);\n                            var placeData = { n: $(this).data('place').n, i: $(this).data('place').i };\n                            $(\"#to\").data('place', placeData);\n                            $(\"#view_trip\").removeClass(\"ui-disabled\");\n\n                        });\n\n                        var imgurl = StopByStop.AppState.current.urls.CityImagesUrl + result[divIndex].i + '.jpg';\n                        $('#appendedImagediv' + divIndex).css('background-image', 'url(' + imgurl + ')');\n\n                    }\n\n                    InitHome.moveImageInBackground();\n                }\n            });\n\n        }\n\n        public static moveImageInBackground() {\n            InitHome.yIncrement = InitHome.yIncrement + 1;\n            var divIndexCount = 0;\n            var requestID = null;\n            for (divIndexCount = 0; divIndexCount < 10; divIndexCount++) {\n                var appendedImagediv = $('#appendedImagediv' + divIndexCount);\n                if (appendedImagediv) {\n                    $(appendedImagediv).css('background-position', '0px ' + InitHome.yIncrement + 'px');\n                }\n            }\n            requestID = requestAnimationFrame(InitHome.moveImageInBackground);\n            if (InitHome.yIncrement >= 0) {\n                cancelAnimationFrame(requestID);\n                InitHome.yIncrement = -100;\n            }\n\n        }\n\n        public static createDiv(divIndex, data) {\n            var imageDiv = document.createElement(\"div\");\n            imageDiv.id = 'appendedImagediv' + divIndex;\n            imageDiv.className = \"imageholder\";\n            var innerDiv = document.createElement(\"div\");\n            innerDiv.id = 'appendedInnerdiv' + divIndex;\n            innerDiv.className = \"childdiv\";\n            innerDiv.innerHTML = data.sn;\n            imageDiv.appendChild(innerDiv);\n            innerDiv.onclick = function () {\n                $(\"#to\").val($(this).parent('div').data('place').n);\n                var placeData = { n: $(this).parent('div').data('place').n, i: $(this).parent('div').data('place').i };\n                $(\"#to\").data('place', placeData);\n                $(\"#view_trip\").removeClass(\"ui-disabled\");\n            };\n            return imageDiv;\n        }\n\n        public static wireup() {\n            var currentLocationString = \"Current location\";\n            var fromCityListData = null;\n            var prevPlace = null;\n\n            // populate from with 'current location'\n            var currentLocationData = null;\n            var setCurrentLocation = function () {\n                if (navigator && navigator.geolocation) {\n                    navigator.geolocation.getCurrentPosition(\n                        (position: Position) => {\n                            var srcLat = position.coords.latitude;\n                            var srcLon = position.coords.longitude;\n                            if (srcLat > S_LAT_BOUNDARY && srcLat < N_LAT_BOUNDARY && srcLon > W_LON_BOUNDARY && srcLon < E_LON_BOUNDARY) {\n                                currentLocationData = { n: currentLocationString, i: srcLat.toFixed(5) + \",\" + srcLon.toFixed(5) };\n\n                                $(\"#from\").val(currentLocationString);\n                                $(\"#from\").data({ place: currentLocationData });\n\n                                if ($(\"#from\").data('place')) {\n                                    InitHome.addImagesDynamically(prevPlace, currentLocationString);\n                                }\n\n                                Telemetry.trackEvent(TelemetryEvent.LocationIN);\n                            }\n                            else {\n                                Telemetry.trackEvent(TelemetryEvent.LocationOUT);\n                            }\n                        },\n                        (positionError: PositionError) => {\n                            var positionErrorReason = \"UNAVAILABLE\";\n                            switch (positionError.code) {\n                                case positionError.PERMISSION_DENIED:\n                                    positionErrorReason = \"PERMISSION_DENIED\";\n                                    break;\n                                case positionError.POSITION_UNAVAILABLE:\n                                    positionErrorReason = \"POSITION_UNAVAILABLE\";\n                                    break;\n                                case positionError.TIMEOUT:\n                                    positionErrorReason = \"TIMEOUT\";\n                                    break;\n                            }\n\n                            Telemetry.trackError(new Error(\"getCurrentPositionErrorHomePage-\" + positionErrorReason));\n                        },\n                        {\n                            maximumAge: 60000,\n                            timeout: 5000,\n                            enableHighAccuracy: true,\n                        }\n                    );\n                }\n            };\n            setCurrentLocation();\n\n            $(\".input-wrapper input\").on(\"keyup\", function (e, data) {\n                var $wrapper = $(this).closest('.input-wrapper');\n                var that = this;\n                var $ul = $wrapper.find('ul'),\n                    $input = $(this),\n                    value = $input.val();\n\n                if (value) {\n\n                    $wrapper.append(\"<div class='ui-loader'><span class='ui-icon ui-icon-loading'></span></div>\");\n\n\n\n                    $.ajax({\n                        url: AppState.current.urls.PlacesDataUrlV2 + value,\n                        dataType: 'json',\n                        method: 'GET',\n                        success: function (data) {\n                            fromCityListData = data;\n                            $wrapper.find('.ui-loader').remove();\n                            $ul.empty();\n                            var otherDropDown = $(that).attr('id') === 'from' ? $('#to') : $('#from');\n                            var otherDropDownSelectedID = null;\n                            if (otherDropDown.data('place')) {\n                                otherDropDownSelectedID = otherDropDown.data('place').i;\n                            }\n\n                            if ($(that).attr('id') === 'from' && currentLocationData) {\n                                var $li = $('<li data-icon=\"false\"><a href=\"#\">' + currentLocationString + '</a></li>');\n                                $li.data('place', currentLocationData);\n                                $ul.append($li);\n                            }\n\n                            for (var i = 0; i < data.length; i++) {\n                                if (data[i].i !== otherDropDownSelectedID) {\n                                    var $li = $('<li data-icon=\"false\"><a href=\"#\">' + data[i].n + '</a></li>');\n                                    $li.data('place', data[i]);\n                                    $ul.append($li);\n                                }\n                            }\n                            $ul.listview(\"refresh\");\n                            $ul.trigger(\"updatelayout\");\n                        }\n                    });\n                }\n            });\n\n            $(\".autocomplete\").on('click', 'li', function (event) {\n\n                var $input = $(this).closest('div').find('input');\n                var place = $(this).data('place');\n\n                if (place) {\n                    $input.val(place.n).data('place', place);\n                    $(this).closest('ul').empty();\n\n                    if ($(\"#from\").data('place') && $(\"#to\").data('place')) {\n                        $(\"#view_trip\").removeClass(\"ui-disabled\");\n                    }\n\n                    InitHome.addImagesDynamically(prevPlace, currentLocationString);\n                }\n\n                Telemetry.trackEvent(TelemetryEvent.CityDropdownClick);\n            });\n\n            $('.input-wrapper input').on('focus', function (event) {\n\n                var that = $(this);\n                window.setTimeout(function () {\n                    that.select();\n                }, 100);\n\n                var $wrapper = $(this).closest('.input-wrapper');\n                $wrapper.find('ul').show();\n                $wrapper.find('.input-tip').hide();\n            });\n\n            $('.view-trip').on('click', function (event) {\n                Telemetry.trackEvent(TelemetryEvent.ViewTripButtonClick, null, null, true);\n                var $from = $('#from');\n                var $to = $('#to');\n                var startlocation = $from.data('place');\n                var endlocation = $to.data('place');\n                Utils.spaPageNavigate(SBSPage.route, startlocation.i + '-to-' + endlocation.i);\n            });\n\n        if($(\"#from\").data('place') && $(\"#to\").data('place')) {\n            $(\"#view_trip\").removeClass(\"ui-disabled\");\n        }\n\n    }\n}\n}","/// <reference path=\"../tsdef/jquery.d.ts\"/>\n/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\n/// <reference path=\"JunctionViewModel.ts\"/>\n/// <reference path=\"LocationViewModel.ts\"/>\n/// <reference path=\"../Utils.ts\"/>\n\n\"use strict\";\nmodule StopByStop {\n    export class RouteSegmentViewModel {\n        private static SEGMENT_INITIAL_SPACE = 7;\n        private static SPACE_FOR_JUNCTION = 8;\n\n        private _obj: IRouteSegment;\n        private _app: IAppViewModel;\n\n        constructor(obj: IRouteSegment, routeStartTime: Date, app: IAppViewModel) {\n            this._obj = obj;\n            this._app = app;\n\n            this.highwayNameText = ko.observable(\"\");\n\n            if (this._obj.r) {\n                this.highwayNameText(this._obj.r);\n                if (this._obj.hn && this._obj.hn !== this._obj.r) {\n                    this.highwayNameText(this._obj.r + \" - \" + this._obj.hn);\n                }\n            }\n            else {\n                if (this._obj.hn) {\n                    this.highwayNameText(this._obj.hn);\n                } else {\n                    /* this was setting it to \"unnamed highway\" before */\n                    this.highwayNameText(\"\");\n                }\n            }\n\n            this.start = ko.observable(new LocationViewModel(this._obj.s));\n            this.end = ko.observable(new LocationViewModel(this._obj.e));\n            this.distance = ko.observable(this._obj.d);\n            this.routeJunctions = [];\n\n            if (this._obj.j) {\n                for (var i = 0; i < this._obj.j.length; i++) {\n                    var routeJunctionViewModel = new RouteJunctionViewModel(this._obj.j[i], routeStartTime, this._app);\n                    this._app.routePlan.junctionMap[routeJunctionViewModel.junction.osmid.toString()] = routeJunctionViewModel;\n                    this.routeJunctions.push(routeJunctionViewModel);\n                }\n            }\n\n            this.routeVisibleJunctions = ko.observableArray([]);\n            this.portionCompleted = ko.observable(this._obj.pc);\n            this.startIndex = ko.observable(this._obj.si);\n            this.endIndex = ko.observable(this._obj.ei);\n\n\n            this.height = ko.computed(() => {\n                return (this.routeVisibleJunctions().length *\n                    RouteSegmentViewModel.SPACE_FOR_JUNCTION +\n                    RouteSegmentViewModel.SEGMENT_INITIAL_SPACE).toString() + \"em\";\n            });\n\n            this.distanceText = ko.computed(() => {\n                return Utils.getMileString(this.distance());\n            });\n\n            this.maneuver = this._obj.m;\n            this.instructions = this._obj.i || \"\";\n            this.instructionsTip = this.instructions.replace(/(<([^>]+)>)/ig, \"\");\n        }\n\n\n\n        public highwayName: KnockoutObservable<string>;\n        public ref: KnockoutObservable<string>;\n        public start: KnockoutObservable<LocationViewModel>;\n        public end: KnockoutObservable<LocationViewModel>;\n        public distance: KnockoutObservable<number>;\n        public routeJunctions: RouteJunctionViewModel[];\n        public routeVisibleJunctions: KnockoutObservableArray<RouteJunctionViewModel>;\n        public portionCompleted: KnockoutObservable<number>;\n        public startIndex: KnockoutObservable<number>;\n        public endIndex: KnockoutObservable<number>;\n        public height: KnockoutComputed<string>;\n        public distanceText: KnockoutComputed<string>;\n        public highwayNameText: KnockoutObservable<string>;\n        public maneuver: string;\n        public instructions: string;\n        public instructionsTip: string;\n\n        public onJunctionVisibilityUpdated(): void {\n            this.routeVisibleJunctions.removeAll();\n            var visibleJunctionIndex = 0;\n            for (var i = 0; i < this.routeJunctions.length; i++) {\n                var junction = this.routeJunctions[i];\n\n                if (junction.visible()) {\n                    this.routeVisibleJunctions.push(junction);\n                    junction.top((RouteSegmentViewModel.SEGMENT_INITIAL_SPACE + visibleJunctionIndex\n                        * RouteSegmentViewModel.SPACE_FOR_JUNCTION).toString() + \"em\");\n                    visibleJunctionIndex++;\n                }\n            }\n        }\n    }\n}","/// <reference path=\"../tsdef/jquery.d.ts\"/>\n/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\n/// <reference path=\"../Telemetry.ts\"/>\n\n/// <reference path=\"LocationViewModel.ts\"/>\n/// <reference path=\"RouteSegmentViewModel.ts\" />\n/// <reference path=\"FilterViewModel.ts\" />\n/// <reference path=\"RoutePlanViewModel.ts\" />\n\n\n\"use strict\";\n\nmodule StopByStop {\n    export class SideBarStopViewModel {\n        public stop: RouteStopViewModel;\n        public top: KnockoutObservable<string>;\n        public left: KnockoutObservable<string>;\n        public poiTypeClass: string;\n        public routePlan: RoutePlanViewModel;\n\n        constructor(stop: RouteStopViewModel, routePlan: RoutePlanViewModel) {\n            this.stop = stop;\n            this.routePlan = routePlan;\n            this.poiTypeClass = PoiType[stop.stopPlace.type];\n            this.top = ko.observable(\"\");\n            this.left = ko.observable(\"\");\n        }\n\n        public click(): void {\n            this.routePlan.showStopSettings(this.stop);\n        }\n    }\n\n    export class SideBarViewModel {\n        private _headerHeight: number = 0;\n        private _footerHeight: number = 0;\n        private _thumbHeight: number = 0;\n        private _scrollProcessingScheduled: boolean = false;\n        private _thumbPageY: number = null;\n        private _thumbTopAtDragStart = 0;\n        private _self: SideBarViewModel;\n        private _routePlanViewModel: RoutePlanViewModel;\n        private _portionOfRouteScrolled: number;\n        private _routeViewModel: RouteViewModel;\n        private _routeContentSelector = \".route-page .ui-content\";\n\n        private _sideBarInit = Utils.runOnce(() => {\n            $(\"#sidebar-thumb\").unbind();\n            $(this._routeContentSelector).unbind();\n\n            $(\"#sidebar-thumb\").bind(\"touchstart mousedown\", (e) => {\n                this.onTouchStart(e);\n            });\n\n            $(\"#sidebar-thumb\").bind(\"touchend mouseup\", (e) => {\n                this.onTouchEnd(e);\n            });\n\n            $(this._routeContentSelector).bind(\"mousemove\", (e) => {\n                this.onTouchMove(e, e.pageY);\n            });\n\n            $(this._routeContentSelector).bind(\"touchmove\", (e) => {\n                this.onTouchMove(e, e.originalEvent[\"touches\"][0].pageY);\n            });\n\n\n\n            // we have multiple copies of header and footer on SPA app\n            this._headerHeight = $(\".\" + AppState.current.pageInfo.pageName + \" .ui-header\").outerHeight();\n            this._footerHeight = $(\".\" + AppState.current.pageInfo.pageName + \" .ui-footer\").outerHeight();\n\n\n            this.sideBarHeight($(window).height());\n            this.sideBarInnerHeight($(window).height());\n            this.sideBarInnerTop($(\".sidebar-top\").outerHeight());\n        });\n\n        private _sideBarFirstScrollInit = Utils.runOnce(this.sideBarFirstScrollInit.bind(this));\n        private static _recalcOnWindowResize;\n\n        public sideBarHeight: KnockoutObservable<number> = ko.observable(0);\n        public sideBarInnerHeight: KnockoutObservable<number> = ko.observable(0);\n        public sideBarInnerTop: KnockoutObservable<number> = ko.observable(0);\n        public sideBarPosition: KnockoutObservable<string> = ko.observable(\"absolute\");\n        public sideBarTop: KnockoutObservable<string> = ko.observable(\"40px\");\n        public sideBarBottom: KnockoutObservable<string> = ko.observable(\"\");\n        public sideBarThumbTop: KnockoutObservable<string> = ko.observable(\"0px\");\n        public isDraggingThumb: KnockoutObservable<boolean> = ko.observable(false);\n        public stops: KnockoutObservableArray<SideBarStopViewModel>;\n\n\n\n        constructor(routePlan: RoutePlanViewModel, routeViewModel: RouteViewModel, initSettings: IAppState) {\n            this.stops = ko.observableArray<SideBarStopViewModel>([]);\n            this._routePlanViewModel = routePlan;\n            this._routeViewModel = routeViewModel;\n\n\n            $(document).scroll(() => {\n\n                if (!this._scrollProcessingScheduled) {\n                    window.setTimeout(() => {\n                        this.onScroll();\n                        this._scrollProcessingScheduled = false;\n                    }, 20);\n                    this._scrollProcessingScheduled = true;\n                }\n\n            });\n\n\n        }\n\n        public postInit() {\n            this._sideBarInit();\n        }\n\n        public recalculatePosition() {\n            SideBarViewModel.recalculateSideBarPosition(this);\n        }\n\n        private onTouchStart(eventObject: JQueryMouseEventObject) {\n            Telemetry.trackEvent(TelemetryEvent.SideBarThumbTouch);\n            this.isDraggingThumb(true);\n            this._thumbTopAtDragStart = parseInt(this.sideBarThumbTop());;\n            eventObject.preventDefault();\n        };\n\n        private onTouchEnd(eventObject: JQueryMouseEventObject): void {\n            if (this.isDraggingThumb()) {\n                this._thumbPageY = null;\n                this.isDraggingThumb(false);\n                var thumbTop = parseInt(this.sideBarThumbTop());\n                var pixelsScrolled = thumbTop - this._thumbTopAtDragStart;\n                var routePixelsScrolled = ($(\".route\").innerHeight() / (this.sideBarInnerHeight() - this._thumbHeight)) * pixelsScrolled;\n\n                window.scrollBy(0, routePixelsScrolled);\n                eventObject.preventDefault();\n            }\n        };\n\n        private onTouchMove(e: JQueryMouseEventObject, pageY: number): void {\n            if (this.isDraggingThumb()) {\n                if (this._thumbPageY) {\n                    var oldThumbTop = parseInt(this.sideBarThumbTop());\n                    var newThumbTop = oldThumbTop + (pageY - this._thumbPageY);\n                    newThumbTop = Math.max(0, newThumbTop);\n                    newThumbTop = Math.min(this.sideBarInnerHeight() - this._thumbHeight, newThumbTop);\n\n                    this.sideBarThumbTop(newThumbTop.toString() + \"px\");\n\n                }\n                this._thumbPageY = pageY;\n                e.preventDefault();\n\n            }\n        }\n\n        private onScroll(): void {\n            this._sideBarFirstScrollInit();\n            var documentScrollTop = $(document).scrollTop();\n            var routeOffsetTop = $(this._routeContentSelector).offset().top;\n\n            if (documentScrollTop > routeOffsetTop) {\n                this.sideBarPosition(\"fixed\");\n\n                this.sideBarTop(\"\");\n                this.sideBarBottom((this._footerHeight + 1).toString() + \"px\");\n\n                this._portionOfRouteScrolled = Math.min(1.0, (documentScrollTop - routeOffsetTop) /\n                    ($(\".route\").innerHeight() - $(window).height() - this._footerHeight));\n\n                this.recalcThumbPosition();\n\n            } else {\n                this.sideBarPosition(\"absolute\");\n                this.sideBarTop(\"40px\");\n                this.sideBarBottom(\"\");\n                this.sideBarThumbTop(\"0px\");\n            }\n\n            (<any>ko).tasks.runEarly();\n        }\n\n        private recalcThumbPosition(): void {\n            this.sideBarThumbTop(((this.sideBarInnerHeight() - this._thumbHeight) * this._portionOfRouteScrolled).toString() + \"px\");\n        }\n\n        private sideBarFirstScrollInit(): void {\n            Telemetry.trackEvent(TelemetryEvent.RoutePageScroll);\n            SideBarViewModel.recalculateSideBarPosition(this);\n\n            // check if there's already a resize handle attached from the previous instance of SideBarViewModel\n            // if so, detach it\n            if (SideBarViewModel._recalcOnWindowResize) {\n                $(window).off(\"resize\", SideBarViewModel._recalcOnWindowResize);\n            }\n\n            SideBarViewModel._recalcOnWindowResize = SideBarViewModel.recalculateSideBarPosition.bind(null, this);\n            $(window).on(\"resize\", SideBarViewModel._recalcOnWindowResize);\n\n\n\n            this._routePlanViewModel.stops.subscribe(() => this.updateStopsOnSidebar());\n            this._routeViewModel.roadLineHeight.subscribe(() => this.updateStopsOnSidebar());\n        }\n\n\n\n        private updateStopsOnSidebar(): void {\n            this.stops.removeAll();\n\n            var sideBarStopItems = $.map(this._routePlanViewModel.stops(),\n                (elementOfArray: RouteStopViewModel, indexInArray: number) => new SideBarStopViewModel(elementOfArray, this._routePlanViewModel));\n\n            if (sideBarStopItems.length > 0 && Utils.hasAnyOwnProperties(this._routeViewModel.routeJunctionElementLookup)) {\n                // sort by distance to exit from route start. This is so that we can render exits belonging to the same exit\n                // next to each other\n                sideBarStopItems.sort((a, b) => a.stop.stopPlace.dtefrs - b.stop.stopPlace.dtefrs);\n\n                var currentExitId = \"\";\n                var currentIndexOnThisExit = 0;\n\n                for (var i = 0; i < sideBarStopItems.length; i++) {\n                    var sideBarStopViewModel = sideBarStopItems[i];\n                    var poiExitId = sideBarStopViewModel.stop.stopPlace.exitId;\n\n                    if (!this._routeViewModel.routeJunctionElementLookup[poiExitId]) {\n                        continue;\n                    }\n\n                    if (poiExitId === currentExitId) {\n                        currentIndexOnThisExit++;\n                    }\n                    else {\n                        currentIndexOnThisExit = 0;\n                        currentExitId = poiExitId;\n                    }\n\n                    /*\n                    routeDistance    sideBarInnerHeight\n                    -------------- = ---------------------  =>\n                    distanceToExit          x\n                          sideBarInnerHeight*distanceToExit\n                    x = --------------------------------------------\n                          routeDistance\n                    */\n\n\n                    /* available height is slightly smaller because we don't want POI to overlap with ETA time */\n                    /* this is to address Bug 126: Sidebar - location of chosen POIs on the sidebar */\n                    var sideBarAvailableHeight = this.sideBarInnerHeight() - 32;\n\n                    var distanceToExitInPixels =\n                        (sideBarAvailableHeight * this._routeViewModel.routeJunctionElementLookup[poiExitId].top * 1.15 /\n                            this._routeViewModel.roadLineHeight());\n\n                    sideBarStopViewModel.top((distanceToExitInPixels).toString() + \"px\");\n\n\n\n                    sideBarStopViewModel.left((-28 + currentIndexOnThisExit * 8).toString() + \"px\"); /* 28 is another magic constant */\n                    this.stops.push(sideBarStopViewModel);\n                }\n\n\n            }\n            // Telemetry.logToConsole(sideBarStopItems.length.toString() + \" stops on sidebar updated\");\n        }\n\n        private static recalculateSideBarPosition(sbvm: SideBarViewModel): void {\n\n\n\n            // we have multiple copies of header and footer on SPA app\n            sbvm._headerHeight = $(\".\" + AppState.current.pageInfo.pageName + \" .ui-header\").outerHeight();\n            sbvm._footerHeight = $(\".\" + AppState.current.pageInfo.pageName + \" .ui-footer\").outerHeight();\n\n\n\n            sbvm._thumbHeight = $(\"#sidebar-thumb\").outerHeight();\n\n            var sidebarTopInfoHeight = $(\".sidebar-top\").outerHeight();\n            var sidebarBottomInfoHeight = $(\".sidebar-bottom\").outerHeight();\n\n            var windowHeight = window.innerHeight ? window.innerHeight : $(window).height();;\n            var sideBarHeightPixels = windowHeight - sbvm._headerHeight - sbvm._footerHeight;\n            var sideBarInnerHeightPixels = sideBarHeightPixels - sidebarBottomInfoHeight - sidebarTopInfoHeight;\n\n            sbvm.sideBarHeight(sideBarHeightPixels);\n            sbvm.sideBarInnerHeight(sideBarInnerHeightPixels);\n            sbvm.sideBarInnerTop(sidebarTopInfoHeight);\n            sbvm.recalcThumbPosition();\n            sbvm.updateStopsOnSidebar();\n        }\n    }\n}","/// <reference path=\"../tsdef/jquery.d.ts\"/>\n/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\n\n/// <reference path=\"LocationViewModel.ts\"/>\n/// <reference path=\"RouteSegmentViewModel.ts\" />\n/// <reference path=\"FilterViewModel.ts\" />\n/// <reference path=\"SideBarViewModel.ts\" />\n\n\"use strict\";\nmodule StopByStop {\n    export class RouteViewModel {\n        private _route: IRoute;\n        private _app: IAppViewModel;\n        private _routeStartTime: Date;\n        private _stopDurationSubscriptions: KnockoutSubscription[] = [];\n        private _routeInitializationComplete: () => void;\n        private _filter: FilterViewModel;\n        private _junctionElementCount: number = 0;\n        private _subscribedForBoundElement: boolean = false;\n\n        public routeJunctionElementLookup: { [id: string]: { top: number } } = {};\n        public roadLineHeight: KnockoutObservable<number> = ko.observable(0);\n\n\n        constructor(route: IRoute, app: IAppViewModel, initSettings: IAppState, routeInitializationComplete: () => void) {\n            this._route = this.route = route;\n            this._app = app;\n            this._routeInitializationComplete = routeInitializationComplete;\n\n\n            this.sideBar = new SideBarViewModel(app.routePlan, this, initSettings);\n            this.fromLocation = new LocationViewModel(this._route.fl);\n            this.toLocation = new LocationViewModel(this._route.tl);\n\n\n            this.currentLocation = ko.observable(new LocationViewModel(this._route.cl));\n            this._routeStartTime = new Date();\n\n            this.startTimeString = ko.observable(Utils.getTimeString(this._routeStartTime));\n            this.etaString = ko.observable(Utils.getTimeString(this._routeStartTime, this._route.t * 1000));\n            this.tripTimeHours = ko.observable(Utils.getHours(this._route.t));\n            this.tripTimeMinutes = ko.observable(Utils.getMinutes(this._route.t));\n            this.routeId = this._route.rid;\n            this.distance = this._route.d;\n\n            if (this.fromLocation.placeDescription.indexOf(\"Start location (\") === 0) {\n                this.fromLocation.placeDescription = \"Your location\";\n            }\n\n            this.title = this.fromLocation.placeDescription + \" to \" + this.toLocation.placeDescription;\n\n            var exitCount = 0;\n            $.each(route.s, (i, v: IRouteSegment) => { exitCount += v.j.length; });\n\n            this.description =\n                \"Traveling by car from \"\n                + this.fromLocation.placeDescription.toString()\n                + \" to \"\n                + this.toLocation.placeDescription.toString()\n                + \" and looking for best place to stop for food or gas? This route is \"\n                + this.distance.toString()\n                + \" miles and has \"\n                + exitCount.toString()\n                + \" exits.Check this out. \";\n\n            this.shortDescription = \"Distance \" + this.distance.toString() + \". \" + exitCount.toString() + \" exits\";\n\n            this.routeSegments = ko.observableArray([]);\n\n            this.createSegmentFirstTime(0);\n\n            this.boundElement = ko.observable(null);\n\n\n            this.boundElement.subscribe((newElement: Element) => {\n                if (newElement && !this._subscribedForBoundElement) {\n                    this._subscribedForBoundElement = true;\n\n                    this.recalcRoadLine(newElement);\n\n                    Utils.observeDOM(newElement, () => {\n                        this.recalcRoadLine(newElement);\n                    });\n                }\n            });\n        }\n\n       \n\n        public recalcRoadLine(roadLineElement: Element): void {\n           \n\n            var junctionElements = $(roadLineElement).find(\".junction-wrapper\");\n            var junctionCount = junctionElements.length;\n            var lastJunctionTop = \"\";\n            var newRoadLineHeight = $(this.boundElement()).height();\n\n\n            // recalculate positions if roadline height changes or if junction count changes\n            // no point recalculating if roadLineHeight is 0\n            if (newRoadLineHeight !== 0 && (junctionCount !== this._junctionElementCount || this.roadLineHeight() !== newRoadLineHeight)) {\n                this.roadLineHeight(newRoadLineHeight);     \n                this._junctionElementCount = junctionCount;\n\n                this.routeJunctionElementLookup = {};\n                \n                junctionElements.each((index: number, elem: Element) => {\n                    lastJunctionTop = $(roadLineElement).offset().top.toString();\n                    this.routeJunctionElementLookup[elem.getAttribute(\"osmid\")] = { top: $(elem).offset().top - $(roadLineElement).offset().top };\n                });\n\n                // Telemetry.logToConsole(\"recaldRoadLine: \" + this.roadLineHeight() + \". last junction top: \" + lastJunctionTop);\n            }        \n        }\n\n\n\n        public route: IRoute;\n        public fromLocation: LocationViewModel;\n        public toLocation: LocationViewModel;\n        public currentLocation: KnockoutObservable<LocationViewModel>;\n        public routeSegments: KnockoutObservableArray<RouteSegmentViewModel>;\n        public routeId: string;\n        public title: string;\n        public description: string;\n        public shortDescription: string;\n        public distance: number;\n        public etaString: KnockoutObservable<string>;\n        public startTimeString: KnockoutObservable<string>;\n        public tripTimeHours: KnockoutObservable<number>;\n        public tripTimeMinutes: KnockoutObservable<number>;\n\n        public sideBar: SideBarViewModel;\n        public routeHeightPx: KnockoutObservable<number> = ko.observable(0);\n        public boundElement: KnockoutObservable<Element> = ko.observable(null);\n\n        private createSegmentFirstTime(segmentIndex: number) {\n\n            var segmentViewModel = new RouteSegmentViewModel(this._route.s[segmentIndex], this._routeStartTime, this._app);\n            this.routeSegments.push(segmentViewModel);\n\n\n            segmentIndex++;\n\n            if (this._route.s.length > segmentIndex) {\n                window.setTimeout(() => this.createSegmentFirstTime(segmentIndex), 100);\n            }\n            else {\n                this._routeInitializationComplete();\n                this.initializeEtaTimes();\n            }\n        }\n\n        private initializeEtaTimes(): void {\n            this.updateEtaTimes();\n            this.updateStopDurationChangeSubscriptions();\n\n            this._app.routePlan.stops.subscribe(() => {\n                this.updateEtaTimes();\n                this.updateStopDurationChangeSubscriptions();\n\n            });\n        }\n\n\n\n        private updateStopDurationChangeSubscriptions(): void {\n            $.each(this._stopDurationSubscriptions, (i, s: KnockoutSubscription) => {\n                s.dispose();\n            });\n\n            $.each(this._app.routePlan.stops(), (i, stop: RouteStopViewModel) => {\n                this._stopDurationSubscriptions.push(stop.stopDuration.subscribe(() => this.updateEtaTimes()));\n            });\n        }\n\n        private updateEtaTimes(): void {\n            var t = this._routeStartTime;\n            var totalDelaysSoFarInMs = 0;\n            for (var i = 0; i < this.routeSegments().length; i++) {\n                for (var k = 0; k < this.routeSegments()[i].routeJunctions.length; k++) {\n                    var routeJunction = this.routeSegments()[i].routeJunctions[k];\n                    routeJunction.eta(new Date(routeJunction.etaWithoutStops.getTime() + totalDelaysSoFarInMs));\n                    var delaysForThisJunctionMs = 0;\n\n                    for (var l = 0; l < routeJunction.stops().length; l++) {\n                        var stop = routeJunction.stops()[l];\n                        delaysForThisJunctionMs += (stop.detourDuration() * 1000);\n                        stop.exitEta(routeJunction.eta());\n                    }\n\n                    totalDelaysSoFarInMs += delaysForThisJunctionMs;\n                }\n            }\n\n            this.etaString(Utils.getTimeString(this._routeStartTime, this._route.t * 1000 + totalDelaysSoFarInMs));\n            this.tripTimeHours = ko.observable(Utils.getHours(this._route.t + totalDelaysSoFarInMs / 1000));\n            this.tripTimeMinutes = ko.observable(Utils.getMinutes(this._route.t + totalDelaysSoFarInMs / 1000));\n        }\n    }\n}","/// <reference path=\"../tsdef/jquery.d.ts\"/>\n/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\n/// <reference path=\"RouteViewModel.ts\"/>\n/// <reference path=\"FilterViewModel.ts\"/>\n/// <reference path=\"IAppViewModel.ts\"/>\n\n\"use strict\";\nmodule StopByStop {\n    export class AppViewModel implements IAppViewModel {\n\n\n        private _route: IRoute;\n\n        constructor(route: IRoute, initSettings: IAppState, routeTitle: string, routeInitializationComplete: () => void = null) {\n            this.isRouteLoading(true);\n            this.routeLoadingMessage(\"Loading route \" + routeTitle + \" ...\");\n            this.url(Utils.getShareUrl(initSettings.basePortalUrl, initSettings.navigationLocation));\n\n            if (route) {\n                this._route = route;\n                var rjs: IRouteJunction[] = [];\n\n                $.each(route.s, (i, v: IRouteSegment) => { rjs.push(...v.j); });\n\n                this.filter = new FilterViewModel(route.rid, rjs, AppState.current.metadata);\n                this.filter.onFilterUpdated = this.onPoiFilterUpdated.bind(this);\n                this.routePlan = new RoutePlanViewModel(this._route.rid, this._route.d, new LocationViewModel(route.tl));\n\n                this.isRouteLoading(false);\n                this.routeId = route.rid;\n                this.route = new RouteViewModel(this._route, this, initSettings, () => {\n\n                    /*\n                    if (initSettings.app === SBSApp.Web) {\n                        this.routePlan.loadStopsFromStorage();\n                    }\n                    */\n\n                    $.each(this.route.routeSegments(), (i, rs) => {\n                        $.each(rs.routeJunctions, (i2, rj) => {\n                            rj.onPoiVisibilityUpdated();\n                        });\n                        rs.onJunctionVisibilityUpdated();\n                    });\n\n                    if (routeInitializationComplete) {\n                        routeInitializationComplete();\n                    }\n                });\n\n\n                this.title(this.route.title + \" - Stop by Stop\");\n            } else {\n                this.title(\"See best places to stop on the way to your destination - Stop by Stop\");\n            }\n\n            window.document.title = this.title();\n        }\n\n        public routeId: string;\n        public route: RouteViewModel = null;\n        public url: KnockoutObservable<string> = ko.observable(\"\");\n        public title: KnockoutObservable<string> = ko.observable(\"\");\n        // initialize filter to an empty object, so that it doesn't require IFs which would require delayed jqm initialization\n        public filter: FilterViewModel = <FilterViewModel>{};\n        public routePlan: RoutePlanViewModel = null;\n        public isRouteLoading: KnockoutObservable<boolean> = ko.observable(false);\n        public routeLoadingMessage: KnockoutObservable<string> = ko.observable(\"\");\n        public selectedJunction: KnockoutObservable<JunctionAppBaseViewModel> = ko.observable(null);\n\n        public initSideBar(): void {\n            if (this.route && this.route.sideBar) {\n                this.route.sideBar.postInit();\n            }\n        }\n\n        public onPoiFilterUpdated(): void {\n            $.each(this.route.routeSegments(), (i, rs) => {\n                var atLeastOneJunctionVisibilityChanged = false;\n                $.each(rs.routeJunctions, (i2, rj) => {\n                    var junctionVisibilityChanged = rj.onPoiVisibilityUpdated();\n                    if (junctionVisibilityChanged) {\n                        atLeastOneJunctionVisibilityChanged = true;\n                    }\n                });\n\n                if (atLeastOneJunctionVisibilityChanged) {\n                    rs.onJunctionVisibilityUpdated();\n                }\n            });\n        }\n    }\n}","\"use strict\";\n\ninterface String {\n    f(...args: string[]);\n}\n\nString.prototype.f = function (...args) {\n    var s = this,\n        i = args.length;\n\n    while (i--) {\n        s = s.replace(new RegExp('\\\\{' + i + '\\\\}', 'gm'), args[i]);\n    }\n    return s;\n};","/// <reference path=\"../tsdef/jquery.d.ts\"/>\n/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\n/// <reference path=\"../tsdef/google.maps.d.ts\"/>\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\n/// <reference path=\"JunctionViewModel.ts\"/>\n\n\"use strict\";\nmodule StopByStop {\n    export class JunctionMapViewModel {\n        private mapDiv: Element;\n        private mapContainerDiv: Element;\n        private junction: RouteJunctionViewModel;\n        private poiInfoWindow: google.maps.InfoWindow;\n        private map: google.maps.Map;\n        private urls: IInitUrls;\n        private mapDivInitialized: boolean = false;\n\n        constructor(mapDiv: Element, mapContainerDiv: Element, junction: RouteJunctionViewModel, urls: IInitUrls) {\n\n            this.junction = junction;\n            this.mapDiv = mapDiv;\n            this.mapContainerDiv = mapContainerDiv;\n            this.urls = urls;\n        }\n\n        public initMapDiv(): void {\n            if (!this.mapDivInitialized) {\n                $(this.mapDiv).css({ 'height': $(this.mapDiv).width() + 'px' });\n                this.onMapReady();\n                this.mapDivInitialized = true;\n            }\n        }\n\n        private onMapReady(): void {\n            var junctionPoint = new google.maps.LatLng(this.junction.junction.location.lat, this.junction.junction.location.lon);\n            this.map = new google.maps.Map(this.mapDiv,\n                {\n                    zoom: 14,\n                    center: junctionPoint,\n                    disableDefaultUI: false\n                });\n\n            var junctionMarker = new google.maps.Marker({\n                position: junctionPoint,\n                map: this.map,\n                icon: this.urls.BaseImageUrl + \"icons/exit_map.png\"\n            });\n\n            this.createPois();\n        };\n\n        private createPois(): void {\n\n            var pois = this.junction.junction.pois();\n\n\n            $.each(pois, (indexInArray: any, valueOfElement: any) => {\n                var poi = <PoiOnJunctionViewModel>valueOfElement;\n                var poiPoint = new google.maps.LatLng(poi.poi.location.lat, poi.poi.location.lon);\n\n                Utils\n                var poiMarker = new google.maps.Marker(\n                    {\n                        position: poiPoint,\n                        icon: Utils.getPoiIconUrl(poi.poi.poiType, PoiIconFormat.Map, this.urls.BaseImageUrl),\n                        map: this.map\n                    });\n\n                poiMarker.setVisible(poi.poi.visible());\n\n\n                poiMarker.addListener('click', () => {\n                    if (this.poiInfoWindow) {\n                        this.poiInfoWindow.close();\n                    }\n\n                    ko.cleanNode($(\"#poiPopupTemplate\")[0]);\n                    ko.applyBindings(poi, $(\"#poiPopupTemplate\")[0]);\n\n\n                    if (!poiMarker[\"iw\"]) {\n                        var gmapsInfoWindow = new google.maps.InfoWindow({\n                            content: $(\"#poiPopupTemplate\").html()\n                        });\n                        poiMarker[\"iw\"] = gmapsInfoWindow;\n\n\n                        poi.poi.isYInfoLoading.subscribe(() => {\n                            ko.cleanNode($(\"#poiPopupTemplate\")[0]);\n                            ko.applyBindings(poi, $(\"#poiPopupTemplate\")[0]);\n                            gmapsInfoWindow.setContent($(\"#poiPopupTemplate\").html());\n                        });\n                    }\n\n                    this.poiInfoWindow = (<google.maps.InfoWindow>poiMarker[\"iw\"]);\n                    (<any>window).showPoiOptionsForMapPopup = () => {\n                        poi.addToRouteOptionsClick();\n                    };\n                    this.poiInfoWindow.open(this.map, poiMarker);\n\n                });\n                poi.poi.visible.subscribe((newValue) => {\n                    poiMarker.setVisible(newValue);\n                    if (!newValue && poiMarker[\"iw\"]) {\n                        (<google.maps.InfoWindow>poiMarker[\"iw\"]).close();\n                    }\n                });\n            });\n        };\n    }\n}","/// <reference path=\"../tsdef/jquery.d.ts\"/>\n/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\n/// <reference path=\"../tsdef/google.maps.d.ts\"/>\n/// <reference path=\"../extensions.ts\"/>\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\n/// <reference path=\"../Init.ts\"/>\n/// <reference path=\"RouteViewModel.ts\"/>\n/// <reference path=\"JunctionMapViewModel.ts\"/>\n/// <reference path=\"IAppViewModel.ts\"/>\n\n\"use strict\";\nmodule StopByStop {\n\n    export abstract class JunctionAppBaseViewModel implements IAppViewModel {\n        protected _poiLocations: LocationViewModel[];\n        protected _locationToLoadIndex: number = 0;\n\n        public filter: FilterViewModel;\n        public routePlan: RoutePlanViewModel;\n        public routeJunction: RouteJunctionViewModel;\n        public junctionMapViewModel: JunctionMapViewModel;\n        public routeId: string;\n        \n        protected loadFullPoiData() {\n            \n            if (this._locationToLoadIndex < this._poiLocations.length) {\n                var locationToLoad = this._poiLocations[this._locationToLoadIndex++];\n\n                var latStr = locationToLoad.lat.toFixed(1);\n                var lonStr = locationToLoad.lon.toFixed(1);\n\n                $.ajax(AppState.current.urls.PoiDataUrlV2 + latStr + \",\" + lonStr)\n                    .done((data: IReviewGroup[]) => {\n\n                        for (var i = 0; i < data.length; i++) {\n                            var p = data[i];\n                            if (this.routeJunction.junction.poiLookup[p.id]) {\n                                this.routeJunction.junction.poiLookup[p.id].poi.updateYInfo(p);\n                            }\n                        }\n\n                        this.loadFullPoiData();\n                    });\n            } else {\n                this.routeJunction.junction.completeYDataLoad();\n            }\n        }\n\n    };\n\n    export class JunctionSPAAppViewModel extends JunctionAppBaseViewModel {\n        constructor(\n            route: IRoute,\n            routeJunctionViewModel: RouteJunctionViewModel,\n            parentFilter: FilterViewModel,\n            routePlan: RoutePlanViewModel,\n            metadata: IMetadata,\n            poiTypeToShow: PoiType = PoiType.all\n        ) {\n            super();\n            // TODO: here\n\n            this.routeId = route.rid;\n            this.routePlan = routePlan;\n            this.routeJunction = routeJunctionViewModel;\n\n            this.filter = new FilterViewModel(\n                parentFilter.routeId,\n                [this.routeJunction.routeJunction],\n                metadata,\n                false);\n\n            // propagate distance and restaurant enablement setting from parent route filter\n            this.filter.maxDistanceFromJunction(parentFilter.maxDistanceFromJunction());\n            var mdarr = [\n                [this.filter.maxDistanceFromJunctionIs1, \"1\"],\n                [this.filter.maxDistanceFromJunctionIs2, \"2\"],\n                [this.filter.maxDistanceFromJunctionIs3, \"3\"],\n                [this.filter.maxDistanceFromJunctionIs4, \"4\"],\n                [this.filter.maxDistanceFromJunctionIs5, \"5\"]\n            ];\n\n            for (var i = 0; i < mdarr.length; i++) {\n                (<KnockoutObservable<boolean>>mdarr[i][0])(mdarr[i][1] === parentFilter.maxDistanceFromJunction());\n            }\n\n            this.filter.copyEnablement(parentFilter);\n\n            \n            for (var poiType in this.filter.typeFiltersLookup) {\n                this.filter.typeFiltersLookup[poiType].isOn(poiTypeToShow === PoiType.all || parseInt(poiType) === poiTypeToShow);\n            }\n\n            this.filter.onFilterUpdated = ()=>this.routeJunction.onPoiVisibilityUpdated();\n\n            var junctionLocationViewModel = this.routeJunction.junction.location;\n\n            this._poiLocations = LocationViewModel.getGridLocations({\n                a: junctionLocationViewModel.lat,\n                o: junctionLocationViewModel.lon\n            });\n\n            this.loadFullPoiData();\n        };\n\n\n        public initMap(mapDiv: Element, mapContainerDiv: Element): JunctionMapViewModel {\n            this.junctionMapViewModel = new JunctionMapViewModel(mapDiv, mapContainerDiv, this.routeJunction, AppState.current.urls);\n            return this.junctionMapViewModel;\n        }\n    }\n}","/// <reference path=\"tsdef/jquery.d.ts\"/>\n/// <reference path=\"tsdef/jquerymobile.d.ts\"/>\n/// <reference path=\"tsdef/knockout-3.3.d.ts\"/>\n/// <reference path=\"AppState.ts\" />\n/// <reference path=\"Telemetry.ts\"/>\n/// <reference path=\"Utils.ts\"/>\n/// <reference path=\"stopbystop-interfaces.ts\"/>\n/// <reference path=\"InitUrls.ts\"/>\n/// <reference path=\"InitHome.ts\"/>\n/// <reference path=\"ViewModels/IAppViewModel.ts\" />\n/// <reference path=\"ViewModels/AppViewModel.ts\" />\n/// <reference path=\"ViewModels/RouteViewModel.ts\" />\n/// <reference path=\"ViewModels/JunctionAppViewModel.ts\" />\n\n\"use strict\";\n\nmodule StopByStop {\n\n    export class Init {\n        private static _app: KnockoutObservable<AppViewModel>;\n        private static _currentRouteId: string;\n        private static _loadRoutePromise: JQueryPromise<any> = null;\n        public static _cachedRoutes: { [id: string]: IRoute } = {};\n        private static _wireUpOnce: any;\n\n        public static startup(settings: IAppState): void {\n            (<any>ko).options.deferUpdates = true;\n            Init.enableUAMatch();\n            Init._wireUpOnce = Utils.runOnce(Init.wireupAndBind);\n\n            /* common initialization for all pages */\n            $(document).on(\"pageinit\", \".jqm-demos\", (event) => {\n                Init.wireupAndBindOnce();\n            });\n            /* end of common initialiazation for all pages */\n\n            /* home page initialization */\n            $(document).on(\"pageinit\", \".sbs-homePG\", function (event) {\n                InitHome.wireup();\n            });\n            /* end of home page initialization */\n\n\n            /* route page initialization */\n            $(document).on(\"pageinit\", \".route-page\", function (event) {\n\n\n            });\n            /* end of route page initialization */\n\n            /* exit page initialization */\n            $(document).on(\"pageinit\", \".exit-page\", function (event) {\n\n            });\n            /* end of exit page initialization */\n\n            /* poi group page initialization */\n            $(document).on(\"pageinit\", \".poigroup-page\", function (event) {\n                var poiGroupInitialized = false;\n                $(document).scroll(function () {\n                    if (!poiGroupInitialized) {\n                        poiGroupInitialized = true;\n                        Telemetry.trackEvent(TelemetryEvent.POIGroupPageScroll);\n                    }\n                });\n            });\n            /* end of poi group page initialization */\n\n            AppState.current = settings;\n            AppState.current.urls = new InitUrls(settings.baseDataUrl, settings.baseImageUrl);\n            Init._app = ko.observable<AppViewModel>(new AppViewModel(null, AppState.current, \"\"));\n            Init.wireupHashChange();\n        }\n\n        public static wireupAndBindOnce(): void {\n            Init._wireUpOnce();\n        }\n\n        private static wireupAndBind() {\n            Init.wireupOnShow();\n            $(\".jqm-navmenu-link\").click(() => Init.openNavigationMenu());\n            (<any>jQuery(\".breadCrumb\")).jBreadCrumb();\n            // wire up click on the social button\n            $(\".social-btn\").click(() => {\n                Telemetry.trackEvent(TelemetryEvent.SocialButtonClick);\n            });\n            $(\".filters-trigger\").click(() => {\n                Telemetry.trackEvent(TelemetryEvent.FilterButtonClick);\n                Init.openFilterPopup();\n            });\n\n            /* apply root bindings for Cordova app */\n            var sbsRootNode = $(\"#sbsRoot\")[0];\n            ko.applyBindings(Init._app, sbsRootNode);\n        }\n\n        private static wireupOnShow() {\n            /* initialize page navigation events */\n            var pageBeforeShowTime: number;\n            var navigationAbandoned = false;\n\n            $.mobile.pageContainer.pagecontainer({\n                beforeshow: (event, ui) => {\n                    navigationAbandoned = false;\n                    pageBeforeShowTime = new Date().getTime();\n                    var pageBeingLoaded = ui.toPage.attr(\"id\");\n\n                    var pageIdSelector: string = \"#\" + pageBeingLoaded;\n\n\n                    if (!AppState.current.navigationLocation) {\n                        AppState.current.navigationLocation = { page: SBSPage.home };\n                    }\n\n                    Utils.updateNavigationLocation(location.hash, AppState.current.navigationLocation);\n                    var updatedHash = Utils.getHashFromNavigationLocation(AppState.current.navigationLocation);\n\n                    if (location.hash !== updatedHash) {\n                        AppState.current.knownHashChangeInProgress = true;\n                        location.replace(updatedHash);\n                    }\n\n                    AppState.current.pageInfo = {\n                        pageName: ui.toPage.data(\"page-name\"),\n                        telemetryPageName: ui.toPage.data(\"telemetry-page-name\"),\n                    };\n\n\n                    // are we loading correct page?\n                    var pageBeingLoaded = ui.toPage[0].id;\n                    if (SBSPage[AppState.current.navigationLocation.page] !== pageBeingLoaded) {\n                        Utils.spaPageNavigate(\n                            AppState.current.navigationLocation.page,\n                            AppState.current.navigationLocation.routeId,\n                            AppState.current.navigationLocation.exitId,\n                            AppState.current.navigationLocation.poiType,\n                            false);\n\n                        navigationAbandoned = true;\n                    }\n\n\n                    <any>$(pageIdSelector).css(\n                        {\n                            paddingTop: \"51px\",\n                            paddingBottom: \"50px\"\n                        });\n\n                    var filtersContainer = $(\".\" + AppState.current.pageInfo.pageName + \" .filters-container\");\n                    filtersContainer.css({ \"right\": \"10%\" });\n\n                },\n                show: (event, ui) => {\n                    if (navigationAbandoned) {\n                        return;\n                    }\n\n                    var shareUrl = Utils.getShareUrl(AppState.current.basePortalUrl, AppState.current.navigationLocation);\n                    Init._app().url(shareUrl);\n\n                    if (!AppState.current.historyDisabled && Utils.isHistoryAPISupported()) {\n                        var newHistoryState = history.state;\n                        newHistoryState.url = shareUrl + location.hash;\n                        history.replaceState(newHistoryState, newHistoryState.title, shareUrl + location.hash);\n                    }\n\n\n                    switch (AppState.current.navigationLocation.page) {\n                        case SBSPage.route:\n                        case SBSPage.exit:\n                            if (Init._currentRouteId !== AppState.current.navigationLocation.routeId) {\n                                Init._currentRouteId = AppState.current.navigationLocation.routeId;\n                                Init._app(new AppViewModel(null, AppState.current, Utils.getRouteTitleFromRouteId(AppState.current.navigationLocation.routeId)));\n\n                                Init._loadRoutePromise = Init.loadRoute(AppState.current.navigationLocation.routeId);\n\n                                Init._loadRoutePromise.done((callback: JQueryPromiseCallback<any>) => {\n\n                                    if (AppState.current.navigationLocation.page === SBSPage.exit) {\n                                        Init.completeExitPageInit();\n                                    } else {\n                                        this._app().route.sideBar.recalculatePosition();\n                                        Init.animateFiltersTrigger();\n                                    }\n                                });\n                            } else {\n                                if (AppState.current.navigationLocation.page === SBSPage.route) {\n\n                                    this._app().route.recalcRoadLine($(\".route\")[0]);\n                                    this._app().title(this._app().route.shortDescription);\n                                    this._app().route.sideBar.recalculatePosition();\n                                    Init.animateFiltersTrigger();\n\n                                } else if (AppState.current.navigationLocation.page === SBSPage.exit) {\n                                    Init.completeExitPageInit();\n                                }\n                            }\n                            break;\n                        default:\n                            break;\n                    }\n\n\n                    Telemetry.trackPageView(\n                        AppState.current.pageInfo.telemetryPageName,\n                        \"#\" + AppState.current.pageInfo.pageName,\n                        (new Date()).getTime() - pageBeforeShowTime);\n                }\n            });\n        }\n\n        private static wireupHashChange(): void {\n\n            /* handle unknown hash change */\n            var scheduledUnknownChange = false;\n\n            var onBrowserHistoryChanged = () => {\n                if (!scheduledUnknownChange) {\n                    scheduledUnknownChange = true;\n                    window.setTimeout(() => {\n                        if (!AppState.current.knownHashChangeInProgress) {\n                            var newHash = location.hash;\n                            var oldPage = AppState.current.navigationLocation.page;\n\n                            Utils.updateNavigationLocation(newHash, AppState.current.navigationLocation);\n                            if (oldPage !== AppState.current.navigationLocation.page) {\n                                Utils.spaPageNavigate(\n                                    AppState.current.navigationLocation.page,\n                                    AppState.current.navigationLocation.routeId,\n                                    AppState.current.navigationLocation.exitId,\n                                    AppState.current.navigationLocation.poiType,\n                                    false);\n\n                            }\n                        }\n\n                        AppState.current.knownHashChangeInProgress = false;\n                        scheduledUnknownChange = false;\n                    }, 100);\n                }\n            };\n\n\n            (<any>$(window)).hashchange(onBrowserHistoryChanged);\n\n            if (!AppState.current.historyDisabled && Utils.isHistoryAPISupported()) {\n                window.onpopstate = onBrowserHistoryChanged;\n            }\n\n            /* trigger initial hash change */\n            onBrowserHistoryChanged();\n        }\n\n        private static loadRoute(routeId: string): JQueryPromise<any> {\n            var deferred = $.Deferred();\n            if (Init._cachedRoutes[routeId]) {\n                Init.onRouteDataLoaded(routeId, Init._cachedRoutes[routeId], deferred);\n            } else {\n                var withMetadata = !AppState.current.metadata;\n\n                $.ajax({\n                    url: AppState.current.urls.RouteDataUrlV2 + routeId + \"/metadata/\" + withMetadata.toString().toLowerCase(),\n                    dataType: 'json',\n                    method: 'GET',\n                    success: (data) => {\n                        Init._cachedRoutes[routeId] = data;\n                        if (withMetadata) {\n                            StopByStop.AppState.current.metadata = data.m;\n                        }\n\n                        Init.onRouteDataLoaded(routeId, data, deferred);\n                    }\n                });\n            }\n\n            return deferred.promise();\n        }\n\n        private static onRouteDataLoaded(routeId: string, data: IRoute, done: JQueryDeferred<any>): void {\n\n            if (routeId === Init._currentRouteId) {\n                var route = data;\n                var app = new AppViewModel(route, AppState.current, Utils.getRouteTitleFromRouteId(routeId),\n                    () => {\n                        done.resolve();\n                    });\n\n                Init._app(app);\n            } else {\n                done.reject();\n            }\n        }\n\n        private static completeExitPageInit(): void {\n            var selectedRouteJunction = Init._app().routePlan.junctionMap[AppState.current.navigationLocation.exitId];\n            var poiType = AppState.current.navigationLocation.poiType;\n\n            var appViewModel = Init._app();\n\n            var junctionAppViewModel = new JunctionSPAAppViewModel(\n                appViewModel.route.route,\n                selectedRouteJunction,\n                appViewModel.filter,\n                appViewModel.routePlan,\n                AppState.current.metadata,\n                poiType);\n\n            appViewModel.selectedJunction(junctionAppViewModel);\n\n            Init.initJunctionMapWhenReady(junctionAppViewModel).then((jmmv) => {\n                // to ensure the switch between map and list view is initialized\n                $(\".view-mode-switch\").controlgroup();\n                $(\".view-mode-switch\").trigger(\"create\");\n                Init.wireupPOIGroup(jmmv);\n\n            })\n\n            Init._app().url(Utils.getShareUrl(AppState.current.basePortalUrl, AppState.current.navigationLocation));\n            Init._app().title(junctionAppViewModel.routeJunction.title);\n            document.title = Init._app().title();\n            Init.animateFiltersTrigger();\n        }\n\n        private static animateFiltersTrigger() {\n            window.setTimeout(() => {\n                var filtersContainer = $(\".\" + AppState.current.pageInfo.pageName + \" .filters-container\");\n                filtersContainer.css({ \"right\": \"10%\" });\n                filtersContainer.animate({ \"right\": \"35%\" }, \"slow\");\n            }, 50);\n        }\n\n        private static initJunctionMapWhenReady(junctionAppViewModel: JunctionSPAAppViewModel): JQueryPromise<JunctionMapViewModel> {\n            var dfd = jQuery.Deferred<JunctionMapViewModel>();\n            var mapElement = $(\"#map\")[0];\n            var mapContainerElement = $(\".poi-map\")[0];\n\n            if (mapElement && mapContainerElement) {\n                var junctionMapViewModel = junctionAppViewModel.initMap(mapElement, mapContainerElement);\n                dfd.resolve(junctionMapViewModel);\n            } else {\n                window.setTimeout(() => {\n                    Init.initJunctionMapWhenReady(junctionAppViewModel)\n                        .then((jmvm) => dfd.resolve(jmvm));\n                }, 50);\n            }\n\n            return dfd.promise();\n        }\n\n        private static wireupPOIGroup(jmvm: JunctionMapViewModel): void {\n            $(\".view-mode-switch\").on(\"change\", function () {\n                var modeVal = $(\".view-mode-switch :radio:checked\").val();\n                if (modeVal === \"list\") {\n                    $(\".poi-table\").show();\n                    $(\".poi-map\").hide();\n                    Telemetry.trackEvent(TelemetryEvent.POIGroupSwitchList);\n                }\n                else {\n                    $(\".poi-table\").hide();\n                    $(\".poi-map\").show();\n                    jmvm.initMapDiv();\n                    Telemetry.trackEvent(TelemetryEvent.POIGroupSwitchMap);\n                }\n            });\n\n            $(\".yelp-btn\").on(\"click\", function () {\n                Telemetry.trackEvent(TelemetryEvent.YelpLinkClick, null, null, true);\n            });\n\n            $(\".tel-btn\").on(\"click\", function () {\n                Telemetry.trackEvent(TelemetryEvent.TelLinkClick);\n            });\n\n            $(\".pois-list-filters-button\").click(() => {\n                Telemetry.trackEvent(TelemetryEvent.FilterButtonInlineExitPageClick);\n                Init.openFilterPopup();\n            });\n        };\n\n        private static enableUAMatch(): void {\n\n            /* UA MATCH */\n            var matched, browser;\n            jQuery[\"uaMatch\"] = function (ua) {\n                ua = ua.toLowerCase();\n\n                var match = /(chrome)[ \\/]([\\w.]+)/.exec(ua) ||\n                    /(webkit)[ \\/]([\\w.]+)/.exec(ua) ||\n                    /(opera)(?:.*version|)[ \\/]([\\w.]+)/.exec(ua) ||\n                    /(msie) ([\\w.]+)/.exec(ua) ||\n                    ua.indexOf(\"compatible\") < 0 && /(mozilla)(?:.*? rv:([\\w.]+)|)/.exec(ua) ||\n                    [];\n\n                return {\n                    browser: match[1] || \"\",\n                    version: match[2] || \"0\"\n                };\n            };\n\n            matched = jQuery[\"uaMatch\"](navigator.userAgent);\n            browser = {};\n\n            if (matched.browser) {\n                browser[matched.browser] = true;\n                browser.version = matched.version;\n            }\n\n            // Chrome is Webkit, but Webkit is also Safari.\n            if (browser.chrome) {\n                browser.webkit = true;\n            } else if (browser.webkit) {\n                browser.safari = true;\n            }\n\n            jQuery[\"browser\"] = browser;\n\n            /* END OF UA_MATCH */\n        }\n\n        public static openNavigationMenu(): void {\n            var fd = $(\".\" + AppState.current.pageInfo.pageName + \" .nav-menu\")\n            if (fd.length > 0) {\n                (<any>fd).panel();\n                fd.trigger(\"create\");\n                (<any>fd).panel(\"open\");\n            }\n        }\n\n        public static openFilterPopup(): void {\n            var fd = $(\".\" + AppState.current.pageInfo.pageName + \" .filter-dlg\")\n            fd.on('popupafteropen', function () {\n                var hCenter = ($(window).width() - fd.width()) / 2;\n                var vCenter = ($(window).height() - fd.height()) / 2;\n                $('.ui-popup-container').css({\n                    top: vCenter,\n                    left: hCenter,\n                    position: \"fixed\"\n                });\n            });\n\n            if (fd.length > 0) {\n                fd.popup();\n                fd.trigger(\"create\");\n                fd.popup(\"open\", {\n                    positionTo: \"origin\",\n                    transition: \"slidedown\"\n                });\n            }\n        }\n    }\n}","/// <reference path=\"../../../src/client/scripts/tsdef/qunit.d.ts\"/>\n/// <reference path=\"../../../src/client/scripts/tsdef/jquery.d.ts\"/>\n/// <reference path=\"../../../src/client/scripts/tsdef/knockout-3.3.d.ts\"/>\n/// <reference path=\"../../../src/client/scripts/tsdef/google.maps.d.ts\"/>\n\n/// <reference path=\"../../../src/client/scripts/stopbystop-interfaces.ts\"/>\n/// <reference path=\"../../../src/client/scripts/ViewModels/IAppViewModel.ts\"/>\n/// <reference path=\"../../../src/client/scripts/ViewModels/IStopPlace.ts\"/>\n/// <reference path=\"../../../src/client/scripts/ViewModels/RoutePlanViewModel.ts\"/>\n/// <reference path=\"../../../src/client/scripts/Init.ts\"/>\n\n\"use strict\";\nmodule StopByStop {\n    export class TestStorage implements Storage {\n        public _obj: any = {};\n        public length: number = 0;\n\n        public clear(): void {\n            this._obj = {};\n        }\n        public getItem(key: string): any {\n            return this._obj[key];\n        }\n\n        public key(index: number): string {\n            throw \"not implemented\";\n        }\n\n        public removeItem(key: string): void {\n            delete this._obj[key];\n        }\n\n        public setItem(key: string, data: string): void {\n            this._obj[key] = data;\n        }\n\n        [key: string]: any;\n\n        [index: number]: string;\n\n        public getData(key: string): string {\n            return this._obj[key];\n        }\n\n    }\n};\n\nQUnit.begin(() => {\n    StopByStop.AppState.current = {\n        basePortalUrl: \"\",\n        baseDataUrl: \"\",\n        baseImageUrl: \"\",\n        windowOpenTarget: \"_system\",\n        pageInfo: {\n            pageName: \"TestPageName\",\n            telemetryPageName: \"TestPageName\"\n        },\n        metadata: null\n    };\n});\n\nQUnit.test(\"RoutePlanViewModel: constructor test\", (assert) => {\n    var myStorage = new StopByStop.TestStorage();\n    var routePlanViewModel = new StopByStop.RoutePlanViewModel(\"testrouteid\", 1000, null, myStorage);\n    routePlanViewModel.loadStopsFromStorage();\n    assert.equal(myStorage.getData(StopByStop.ROUTE_PLAN_STORAGE_KEY), \"{\\\"testrouteid\\\":{\\\"stops\\\":{}}}\");\n});\n\nQUnit.test(\"RoutePlanViewModel: add stop test\", (assert) => {\n    var myStorage = new StopByStop.TestStorage();\n    var routePlanViewModel = new StopByStop.RoutePlanViewModel(\"testrouteid\", 1000, null, myStorage);\n    routePlanViewModel.loadStopsFromStorage();\n    assert.equal(routePlanViewModel.stops().length, 0);\n    var poiOnJunctionViewModel: StopByStop.IStopPlace = {\n        id: \"id1\",\n        name: \"name\",\n        dfe: 1,\n        dtefrs: 100,\n        duration: 5,\n        exitId: \"exitid\",\n        lat: 42,\n        lon: -170,\n        type: StopByStop.PoiType.restaurants\n    };\n    var routeStopViewModel = routePlanViewModel.getOrCreateStop(poiOnJunctionViewModel);\n    assert.ok(routeStopViewModel);\n\n    routePlanViewModel.addStopToRoute(routeStopViewModel);\n    assert.equal(routePlanViewModel.stops().length, 1);\n    assert.equal(routePlanViewModel.stops()[0].stopDuration(), 5);\n    assert.equal(myStorage.getData(StopByStop.ROUTE_PLAN_STORAGE_KEY),\n        \"{\\\"testrouteid\\\":{\\\"stops\\\":{\\\"id1\\\":{\\\"dfe\\\":1,\\\"dtefrs\\\":100,\\\"duration\\\":5,\\\"exitId\\\":\\\"exitid\\\",\\\"id\\\":\\\"id1\\\",\\\"lat\\\":42,\\\"lon\\\":-170,\\\"name\\\":\\\"name\\\",\\\"type\\\":2}}}}\");\n});\n\nQUnit.test(\"RoutePlanViewModel: change stop duration time test\", (assert) => {\n    var myStorage = new StopByStop.TestStorage();\n    var routePlanViewModel = new StopByStop.RoutePlanViewModel(\"testrouteid\", 1000, null, myStorage);\n    routePlanViewModel.loadStopsFromStorage();\n    var poiOnJunctionViewModel: StopByStop.IStopPlace = {\n        id: \"id1\",\n        name: \"name\",\n        dfe: 1,\n        dtefrs: 100,\n        duration: 5,\n        exitId: \"exitid\",\n        lat: 42,\n        lon: -170,\n        type: StopByStop.PoiType.restaurants\n    };\n    var routeStopViewModel = routePlanViewModel.getOrCreateStop(poiOnJunctionViewModel);\n    routePlanViewModel.addStopToRoute(routeStopViewModel);\n    routeStopViewModel.add5MinutesToDuration();\n    assert.equal(routePlanViewModel.stops()[0].stopDurationHours(), \"00\");\n    assert.equal(routePlanViewModel.stops()[0].stopDurationMinutes(), \"10\");\n    assert.equal(myStorage.getData(StopByStop.ROUTE_PLAN_STORAGE_KEY),\n        \"{\\\"testrouteid\\\":{\\\"stops\\\":{\\\"id1\\\":{\\\"dfe\\\":1,\\\"dtefrs\\\":100,\\\"duration\\\":5,\\\"exitId\\\":\\\"exitid\\\",\\\"id\\\":\\\"id1\\\",\\\"lat\\\":42,\\\"lon\\\":-170,\\\"name\\\":\\\"name\\\",\\\"type\\\":2}}}}\");\n    routeStopViewModel.subtract5MinutesFromDuration();\n    assert.equal(routePlanViewModel.stops()[0].stopDurationHours(), \"00\");\n    assert.equal(routePlanViewModel.stops()[0].stopDurationMinutes(), \"05\");\n    assert.equal(myStorage.getData(StopByStop.ROUTE_PLAN_STORAGE_KEY),\n        \"{\\\"testrouteid\\\":{\\\"stops\\\":{\\\"id1\\\":{\\\"dfe\\\":1,\\\"dtefrs\\\":100,\\\"duration\\\":5,\\\"exitId\\\":\\\"exitid\\\",\\\"id\\\":\\\"id1\\\",\\\"lat\\\":42,\\\"lon\\\":-170,\\\"name\\\":\\\"name\\\",\\\"type\\\":2}}}}\");\n});\n\nQUnit.test(\"RoutePlanViewModel: remove stop test\", (assert) => {\n    var myStorage = new StopByStop.TestStorage();\n    var routePlanViewModel = new StopByStop.RoutePlanViewModel(\"testrouteid\", 1000, null, myStorage);\n    routePlanViewModel.loadStopsFromStorage();\n    var poiOnJunctionViewModel: StopByStop.IStopPlace = {\n        id: \"id1\",\n        name: \"name\",\n        dfe: 1,\n        dtefrs: 100,\n        duration: 5,\n        exitId: \"exitid\",\n        lat: 42,\n        lon: -170,\n        type: StopByStop.PoiType.restaurants\n    };\n    var routeStopViewModel = routePlanViewModel.getOrCreateStop(poiOnJunctionViewModel);\n    routePlanViewModel.addStopToRoute(routeStopViewModel);\n    assert.equal(routePlanViewModel.stops().length, 1);\n\n    routePlanViewModel.removeStop(routeStopViewModel);\n    assert.equal(routePlanViewModel.stops().length, 0);\n});\n\nQUnit.test(\"RoutePlanViewModel: restore stop data from storage test\", (assert) => {\n    var myStorage = new StopByStop.TestStorage();\n    var routePlanViewModel = new StopByStop.RoutePlanViewModel(\"testrouteid\", 1000, null, myStorage);\n    routePlanViewModel.loadStopsFromStorage();\n    var poiOnJunctionViewModel: StopByStop.IStopPlace = {\n        id: \"id1\",\n        name: \"name\",\n        dfe: 1,\n        dtefrs: 100,\n        duration: 5,\n        exitId: \"exitid\",\n        lat: 42,\n        lon: -170,\n        type: StopByStop.PoiType.restaurants\n    };\n\n    routePlanViewModel = new StopByStop.RoutePlanViewModel(\"testrouteid\", 1000, null, myStorage);\n    routePlanViewModel.loadStopsFromStorage();\n    var routeStopViewModel = routePlanViewModel.getOrCreateStop(poiOnJunctionViewModel);\n    routePlanViewModel.addStopToRoute(routeStopViewModel);\n    assert.equal(routePlanViewModel.stops().length, 1);\n    assert.equal(myStorage.getData(StopByStop.ROUTE_PLAN_STORAGE_KEY),\n        \"{\\\"testrouteid\\\":{\\\"stops\\\":{\\\"id1\\\":{\\\"dfe\\\":1,\\\"dtefrs\\\":100,\\\"duration\\\":5,\\\"exitId\\\":\\\"exitid\\\",\\\"id\\\":\\\"id1\\\",\\\"lat\\\":42,\\\"lon\\\":-170,\\\"name\\\":\\\"name\\\",\\\"type\\\":2}}}}\");\n});","/// <reference path=\"../../../src/client/scripts/tsdef/qunit.d.ts\"/>\n/// <reference path=\"../../../src/client/scripts/tsdef/jquery.d.ts\"/>\n/// <reference path=\"../../../src/client/scripts/tsdef/knockout-3.3.d.ts\"/>\n/// <reference path=\"../../../src/client/scripts/tsdef/google.maps.d.ts\"/>\n\n/// <reference path=\"../../../src/client/scripts/stopbystop-interfaces.ts\"/>\n/// <reference path=\"../../../src/client/scripts/Utils.ts\"/>\n\n\"use strict\";\nmodule StopByStop {\n\nQUnit.begin(()=>\n{\n    AppState.current.pageInfo = {\n                        pageName: \"TestPageName\",\n                        telemetryPageName: \"TestPageName\"\n                    };\n});\n\nQUnit.test(\"Utils: ParseUrlForNavigationLocation test\", (assert) => {\n  updateAndVerifyNavigationLocation(assert,\"#route\", {page:SBSPage.home}, {page:SBSPage.route});\n  updateAndVerifyNavigationLocation(assert,\"#route&routeId=route1\", {page:SBSPage.home}, {page:SBSPage.route, routeId:\"route1\", poiType:undefined});\n  updateAndVerifyNavigationLocation(assert,\"https://hostname.com/page\", {page:SBSPage.route, routeId:\"route1\"}, {page:SBSPage.home, routeId:\"route1\"});\n  updateAndVerifyNavigationLocation(assert, \"#exit&routeId=route1&exitId=exit1&poiType=gas\", { page: SBSPage.home }, { page: SBSPage.exit, routeId: \"route1\", exitId: \"exit1\", poiType: PoiType.gasstations });\n  updateAndVerifyNavigationLocation(assert, \"#exit&routeId=route1&exitId=exit1&poiType=factory\", { page: SBSPage.home }, { page: SBSPage.exit, routeId: \"route1\", exitId: \"exit1\", poiType: PoiType.all });\n});\n\n    QUnit.test(\"Utils: GetHashFromNavigationLocation test\", (assert) => {\n        assert.equal(Utils.getHashFromNavigationLocation({ page: SBSPage.exit, routeId: \"route1\", exitId: \"exit1\", poiType: PoiType.gasstations }), \"#exit&routeid=route1&exitid=exit1&poitype=gas\");\n        assert.equal(Utils.getHashFromNavigationLocation({ page: SBSPage.route, routeId: \"route1\", exitId: \"exit1\", poiType: PoiType.gasstations}), \"#route&routeid=route1\");\n});\n\n\nQUnit.test(\"Utils: GetShareUrl test\", (assert) => {\n    assert.equal(Utils.getShareUrl(\"https://www.host.com\", { page: SBSPage.exit, routeId: \"route1\", exitId: \"exit1\", poiType: PoiType.gasstations}), \"https://www.host.com/route/route1/exit/osm-exit1\");\n    assert.equal(Utils.getShareUrl(\"https://www.host.com/\", { page: SBSPage.exit, routeId: \"route1\", exitId: \"exit1\", poiType: PoiType.gasstations}), \"https://www.host.com/route/route1/exit/osm-exit1\");\n    assert.equal(Utils.getShareUrl(\"https://www.host.com\", { page: SBSPage.about, routeId: \"route1\", exitId: \"exit1\", poiType: PoiType.gasstations}), \"https://www.host.com/\");\n    assert.equal(Utils.getShareUrl(\"https://www.host.com\", { page: SBSPage.home, routeId: \"route1\", exitId: \"exit1\", poiType: PoiType.gasstations}), \"https://www.host.com/\");\n    assert.equal(Utils.getShareUrl(\"https://www.host.com\", { page: SBSPage.route, routeId: \"route1\", exitId: \"exit1\", poiType: PoiType.gasstations}), \"https://www.host.com/route/route1\");\n});\n\n\nQUnit.test(\"Utils: GetRouteTitleFromRouteId test\", (assert) => {\n  assert.equal(Utils.getRouteTitleFromRouteId(\"47.68950,-122.03859-to-new-york-city-ny-united-states\"), \"from your location to New York City, NY\");\n  assert.equal(Utils.getRouteTitleFromRouteId(\"tacoma-wa-united-states-to-new-york-city-ny-united-states\"), \"from Tacoma, WA to New York City, NY\");\n  assert.equal(Utils.getRouteTitleFromRouteId(\"\"), \"\");\n  assert.equal(Utils.getRouteTitleFromRouteId(\"10-to-10\"), \"\");\n });\nfunction updateAndVerifyNavigationLocation(assert:QUnitAssert, hash:string, inputLocation:ISBSNavigationLocation, expectedLocation:ISBSNavigationLocation):void\n{\n  Utils.updateNavigationLocation(hash, inputLocation);\n  assert.deepEqual(inputLocation, expectedLocation);\n}\n\n}\n\n","/// <reference path=\"RoutePlanViewModelTests.ts\" />\n/// <reference path=\"UtilsTests.ts\" />"]}
