{"version":3,"file":"testbundle.js","sourceRoot":"","sources":["../../../src/client/scripts/stopbystop-interfaces.ts","../../../src/client/scripts/Telemetry.ts","../../../src/client/scripts/ViewModels/PoiCategoryViewModel.ts","../../../src/client/scripts/ViewModels/FilterViewModel.ts","../../../src/client/scripts/Utils.ts","../../../src/client/scripts/ViewModels/PoiImageViewModel.ts","../../../src/client/scripts/ViewModels/LocationViewModel.ts","../../../src/client/scripts/ViewModels/ReviewGroupViewModel.ts","../../../src/client/scripts/ViewModels/PoiViewModel.ts","../../../src/client/scripts/ViewModels/IStopPlace.ts","../../../src/client/scripts/ViewModels/PoiOnJunctionViewModel.ts","../../../src/client/scripts/ViewModels/RouteStopViewModel.ts","../../../src/client/scripts/ViewModels/JunctionViewModel.ts","../../../src/client/scripts/AppState.ts","../../../src/client/scripts/ViewModels/RouteJunctionViewModel.ts","../../../src/client/scripts/ViewModels/RoutePlanViewModel.ts","../../../src/client/scripts/ViewModels/IAppViewModel.ts","../../../src/client/scripts/InitUrls.ts","../../../src/client/scripts/ViewModels/RouteSegmentViewModel.ts","../../../src/client/scripts/ViewModels/SideBarViewModel.ts","../../../src/client/scripts/ViewModels/RouteViewModel.ts","../../../src/client/scripts/ViewModels/AppViewModel.ts","../../../src/client/scripts/extensions.ts","../../../src/client/scripts/ViewModels/JunctionMapViewModel.ts","../../../src/client/scripts/ViewModels/JunctionAppViewModel.ts","../../../src/client/scripts/Init.ts","../scripts/RoutePlanViewModelTests.ts","../scripts/UtilsTests.ts","../scripts/main.ts"],"names":[],"mappings":"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","sourcesContent":["/// <reference path=\"tsdef/jquery.d.ts\"/>\r\n\r\n\"use strict\";\r\n\r\nmodule StopByStop {\r\n\r\n    export enum SBSApp {\r\n        Web = 0,\r\n        SPA = 1\r\n    }\r\n\r\n    export interface IInitUrls {\r\n        BaseUrl: string;\r\n        RouteUrl: string;\r\n        RouteDataUrl: string;\r\n        PlacesUrl: string;\r\n        PoiUrl: string;\r\n        MapExitIconUrl: string;\r\n        MapFoodIconUrl: string;\r\n        MapGasIconUrl: string;\r\n    }\r\n\r\n    export interface IAppState {\r\n        baseDataUrl: string;\r\n        baseImageUrl: string;\r\n        app: SBSApp;\r\n        urls?: IInitUrls;\r\n        pageInfo?: IPageInfo;\r\n        navigationLocation?: ISBSNavigationLocation;\r\n    }\r\n\r\n    export interface ILocation {\r\n        /** latitude */\r\n        a: number;\r\n        /** longitude */\r\n        o: number;\r\n        /** place description */\r\n        pd?: string;\r\n    };\r\n\r\n    export interface IRouteSegment {\r\n        /** highway name */\r\n        hn: string;\r\n        /* ref */\r\n        r: string;\r\n        /** start */\r\n        s: ILocation;\r\n        /** end */\r\n        e: ILocation;\r\n        /** distance */\r\n        d: number;\r\n        /** portion completed */\r\n        pc: number;\r\n        /** start index */\r\n        si: number;\r\n        /** end index */\r\n        ei: number;\r\n        /** maneuver */\r\n        m: string;\r\n        /** instructions */\r\n        i: string;\r\n        /** junction */\r\n        j: IRouteJunction[];\r\n    }\r\n\r\n    export interface IReviewGroup {\r\n        /** name */\r\n        n: string;\r\n        /** icon */\r\n        i: string;\r\n        /** review count */\r\n        rc: number;\r\n        /** review page url */\r\n        u: string;\r\n        /** rating image url */\r\n        riu: string;\r\n        /** rating */\r\n        r: number;\r\n    }\r\n\r\n    export interface IPoiImage {\r\n        /** image url */\r\n        u: string;\r\n    }\r\n\r\n\r\n    export interface IPoi {\r\n        /** sbsid */\r\n        id: string;\r\n        /** poi category ids */\r\n        c: string[];\r\n        /** poi type */\r\n        pt: PoiType;\r\n        /** name */\r\n        n: string;\r\n        /** description */\r\n        d: string;\r\n        /** poi location */\r\n        l: ILocation;\r\n        /** poi images */\r\n        i: IPoiImage[];\r\n        /** reviews */\r\n        rg: IReviewGroup[];\r\n    }\r\n\r\n    export interface IPoiCategory {\r\n        /** sbsid */\r\n        id: string;\r\n        /** type */\r\n        t: string;\r\n        /** yid */\r\n        yid: string;\r\n        /** parent IDs */\r\n        p: string[];\r\n        /** name */\r\n        n: string;\r\n    }\r\n\r\n    export interface IPoiCategoryOccurrence {\r\n        /** category */\r\n        cat: IPoiCategory;\r\n        /** count of occurrences */\r\n        c: number;\r\n    }\r\n\r\n    export interface IPoiOnJunction {\r\n        /** sbsid */\r\n        id: string;\r\n        /** distance from junction */\r\n        dfj: number;\r\n        /** poi */\r\n        p: IPoi;\r\n\r\n    }\r\n\r\n    export interface IJunction {\r\n        /** name */\r\n        n: string;\r\n        /** index */\r\n        i: number;\r\n        /** osmid */\r\n        oid: number;\r\n        /** highway name */\r\n        hn: string;\r\n        /** ref */\r\n        r: string;\r\n        /** location */\r\n        l: ILocation;\r\n        /** exit to */\r\n        et: string;\r\n        /** exit to left */\r\n        etl: string;\r\n        /** exit to right */\r\n        etr: string;\r\n        /** pois */\r\n        p: IPoiOnJunction[];\r\n        /** food poi categories */\r\n        fcat: IPoiCategoryOccurrence[];\r\n        /** top level food categories */\r\n        tfcat: string[];\r\n\r\n    }\r\n\r\n    export interface IRouteJunction {\r\n        /** distance from route start */\r\n        dfrs: number;\r\n        /** time from rout start */\r\n        tfrs: number;\r\n        /** junction */\r\n        j: IJunction;\r\n    }\r\n\r\n    export enum PoiType {\r\n        General = 0,\r\n        Gas = 1,\r\n        Food = 2\r\n    }\r\n\r\n    export interface IRoute {\r\n        /** from location */\r\n        fl: ILocation;\r\n        /** to location */\r\n        tl: ILocation;\r\n        /** current location */\r\n        cl: ILocation;\r\n        /** route id */\r\n        rid: string;\r\n        /** distance */\r\n        d: number;\r\n        /** time */\r\n        t: number;\r\n        /** route segments */\r\n        s: IRouteSegment[];\r\n        /** food poi categories */\r\n        fcat: IPoiCategoryOccurrence[];\r\n        /** top level food poi categories */\r\n        tfcat: string[];\r\n    }\r\n\r\n    export enum SBSPage {\r\n        home = 0,\r\n        route = 1,\r\n        exit = 2,\r\n        about = 3\r\n    }\r\n\r\n    export interface IPageInfo {\r\n        /** page name **/\r\n        pageName: string;\r\n        /** telemetry page name **/\r\n        telemetryPageName: string;\r\n    }\r\n\r\n    export interface ISBSNavigationLocation {\r\n        /** page **/\r\n        page: SBSPage,\r\n        /** route id **/\r\n        routeId?: string;\r\n        /** exit id **/\r\n        exitId?: string;\r\n        /** POI type **/\r\n        poiType?: PoiType;\r\n    }\r\n}","/// <reference path=\"tsdef/jquery.d.ts\"/>\r\n/// <reference path=\"tsdef/knockout-3.3.d.ts\"/>\r\n/// <reference path=\"tsdef/ai.d.ts\"/>\r\n\r\nmodule StopByStop {\r\n    export enum TelemetryEvent {\r\n        Add5MinToStop,\r\n        AddStopToRoute,\r\n        CityDropdownClick,\r\n        FilterButtonClick,\r\n        FilterMaxDistanceFromJunctionChanged,\r\n        FilterShowGasStationsChanged,\r\n        FilterShowRestaurantsChanged,\r\n        LocationIN,\r\n        LocationOUT,\r\n        LocationOUTPopupDisplayed,\r\n        POIGroupPageScroll,\r\n        POIGroupSwitchList,\r\n        POIGroupSwitchMap,\r\n        Remove5MinFromStop,\r\n        RemoveStopFromRoute,\r\n        RoutePageScroll,\r\n        RoutePlanNavigateClick,\r\n        RoutePlanNavigateBeforeDirect,\r\n        ShowStopSettingsPopup,\r\n        SideBarThumbTouch,\r\n        SocialButtonClick,\r\n        StopPopupNavigateClick,\r\n        StopPopupNavigateBeforeDirect,\r\n        TelLinkClick,\r\n        ViewTripButtonClick,\r\n        YelpLinkClick,\r\n    }\r\n\r\n    export enum TelemetryProperty {\r\n        FilterVisibility,\r\n        LoadStopsFromCache,\r\n        PageName,\r\n        StopCount,\r\n        NavigationUrl\r\n    }\r\n\r\n    export enum TelemetryMeasurement {\r\n    }\r\n\r\n    export class Telemetry {\r\n        public static _appInsights: Microsoft.ApplicationInsights.IAppInsights = window[\"appInsights\"];\r\n\r\n        public static trackPageView(\r\n            pageName: string,\r\n            url: string,\r\n            duration?: number,\r\n            telemetryProperties: [{ k: TelemetryProperty, v: string }] = null,\r\n            telemetryMeasurements: [{ k: TelemetryMeasurement, v: number }] = null,\r\n            flush: boolean = false\r\n        ): void {\r\n\r\n            try {\r\n                var aiProps = Telemetry.getAIProperties(telemetryProperties);\r\n                var aiMeasurements = Telemetry.getAIMeasurements(telemetryMeasurements);\r\n                Telemetry._appInsights.trackPageView(pageName, url, aiProps, aiMeasurements, duration);\r\n\r\n                if (flush) {\r\n                    Telemetry._appInsights.flush();\r\n                }\r\n            }\r\n            catch (ex) {\r\n                Telemetry.logFatal(ex);\r\n            }\r\n        }\r\n\r\n        public static trackEvent(\r\n            telemetryEvent: TelemetryEvent,\r\n            telemetryProperties: [{ k: TelemetryProperty, v: string }] = null,\r\n            telemetryMeasurements: [{ k: TelemetryMeasurement, v: number }] = null,\r\n            flush: boolean = false\r\n        ): void {\r\n\r\n            try {\r\n                var aiProps = Telemetry.getAIProperties(telemetryProperties);\r\n                var aiMeasurements = Telemetry.getAIMeasurements(telemetryMeasurements);\r\n                Telemetry._appInsights.trackEvent(TelemetryEvent[telemetryEvent], aiProps, aiMeasurements);\r\n\r\n                if (flush) {\r\n                    Telemetry._appInsights.flush();\r\n                }\r\n            }\r\n            catch (ex) {\r\n                Telemetry.logFatal(ex);\r\n            }\r\n        }\r\n\r\n        public static trackError(\r\n            error: Error,\r\n            telemetryProperties: [{ k: TelemetryProperty, v: string }] = null,\r\n            telemetryMeasurements: [{ k: TelemetryMeasurement, v: number }] = null,\r\n            flush: boolean = false\r\n        ): void {\r\n            try {\r\n                var aiProps = Telemetry.getAIProperties(telemetryProperties);\r\n                var aiMeasurements = Telemetry.getAIMeasurements(telemetryMeasurements);\r\n                Telemetry.logFatal(error);\r\n                Telemetry._appInsights.trackException(error, \"\", aiProps, aiMeasurements);\r\n                if (flush) {\r\n                    Telemetry._appInsights.flush();\r\n                }\r\n            }\r\n            catch (ex) {\r\n                Telemetry.logFatal(ex);\r\n            }\r\n        }\r\n\r\n        private static getAIProperties(telemetryProperties: [{ k: TelemetryProperty, v: string }]): { [name: string]: string; } {\r\n            var aiProps: { [name: string]: string; } = {\r\n            };\r\n            aiProps[TelemetryProperty[TelemetryProperty.PageName]] = AppState.current.pageInfo.telemetryPageName;\r\n            if (telemetryProperties) {\r\n                $.each(telemetryProperties, (i, v) => { aiProps[TelemetryProperty[v.k]] = v.v; });\r\n            }\r\n            return aiProps;\r\n        }\r\n\r\n        private static getAIMeasurements(telemetryMeasurements: [{ k: TelemetryMeasurement, v: number }]): { [name: string]: number; } {\r\n            var aiMeasurements: { [name: string]: number; } = {};\r\n            if (telemetryMeasurements) {\r\n                $.each(telemetryMeasurements, (i, v) => { aiMeasurements[TelemetryMeasurement[v.k]] = v.v; });\r\n            }\r\n            return aiMeasurements;\r\n        }\r\n\r\n        private static logFatal(message: any) {\r\n            if (window.console && window.console.error) {\r\n                window.console.error(\"ERROR-TO-TELEMETRY:\" + message);\r\n            }\r\n        }\r\n    }\r\n}","/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\r\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\r\n\r\n\"use strict\";\r\nmodule StopByStop {\r\n    export class PoiCategoryViewModel {\r\n        private _obj: IPoiCategory;\r\n        constructor(obj: IPoiCategory) {\r\n            this._obj = obj;\r\n            this.sbsid = this._obj.id;\r\n            this.type = this._obj.t;\r\n            this.yid = this._obj.yid;\r\n            this.parentIDs = this._obj.p;\r\n            this.name = this._obj.n;\r\n        }\r\n\r\n        public sbsid: string;\r\n        public type: string;\r\n        public yid: string;\r\n        public parentIDs: string[];\r\n        public name: string;\r\n    }\r\n}","/// <reference path=\"../tsdef/jquery.d.ts\"/>\r\n/// <reference path=\"../tsdef/jquerymobile.d.ts\"/>\r\n/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\r\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\r\n/// <reference path=\"../Telemetry.ts\"/>\r\n/// <reference path=\"PoiCategoryViewModel.ts\"/>\r\n\r\n\"use strict\";\r\nmodule StopByStop {\r\n    interface ICategoryEnablement {\r\n        category: PoiCategoryViewModel;\r\n        count: KnockoutObservable<number>;\r\n        visible: KnockoutObservable<boolean>;\r\n        tempCount: number;\r\n    };\r\n\r\n    class FilterCacheManager {\r\n        private itemKey: string = \"sbsfilters\";\r\n        private storage: Storage = sessionStorage;\r\n        private data: { d: string; g: boolean; r: boolean; drc: string[]; } = {\r\n            d: \"3\", g: true, r: true, drc: []\r\n        };\r\n\r\n        constructor(filterViewModel: FilterViewModel) {\r\n            this.itemKey = this.itemKey + filterViewModel.routeId;\r\n\r\n            var dataString = this.storage.getItem(this.itemKey);\r\n            if (dataString) {\r\n                try {\r\n                    this.data = JSON.parse(dataString);\r\n                }\r\n                catch (ex) {\r\n                    Telemetry.trackError(new Error(ex.toString()));\r\n                }\r\n            }\r\n\r\n            filterViewModel.maxDistanceFromJunction(this.data.d);\r\n            var mdarr = [\r\n                [filterViewModel.maxDistanceFromJunctionIs1, \"1\"],\r\n                [filterViewModel.maxDistanceFromJunctionIs2, \"2\"],\r\n                [filterViewModel.maxDistanceFromJunctionIs3, \"3\"],\r\n                [filterViewModel.maxDistanceFromJunctionIs4, \"4\"],\r\n                [filterViewModel.maxDistanceFromJunctionIs5, \"5\"]\r\n            ];\r\n\r\n            for (var i = 0; i < mdarr.length; i++) {\r\n                (<KnockoutObservable<boolean>>mdarr[i][0])(mdarr[i][1] === this.data.d);\r\n            }\r\n\r\n\r\n            filterViewModel.maxDistanceFromJunction.subscribe((newValue: string) => {\r\n                this.data.d = newValue;\r\n                this.saveData();\r\n\r\n\r\n                Telemetry.trackEvent(TelemetryEvent.FilterMaxDistanceFromJunctionChanged);\r\n            });\r\n\r\n            filterViewModel.showGasStations(this.data.g);\r\n            filterViewModel.showRestaurants(this.data.r);\r\n\r\n            if (filterViewModel.preserveShowAllSettings) {\r\n                filterViewModel.showGasStations.subscribe((newValue: boolean) => {\r\n                    this.data.g = newValue;\r\n                    this.saveData();\r\n                    if (AppState.current.pageInfo.pageName !== StopByStop.PAGENAME_POIGroup) {\r\n                        Telemetry.trackEvent(TelemetryEvent.FilterShowGasStationsChanged, [{ k: TelemetryProperty.FilterVisibility, v: newValue.toString() }]);\r\n                    }\r\n                });\r\n\r\n\r\n                filterViewModel.showRestaurants.subscribe((newValue: boolean) => {\r\n                    this.data.r = newValue;\r\n                    this.saveData();\r\n\r\n                    if (AppState.current.pageInfo.pageName !== StopByStop.PAGENAME_POIGroup) {\r\n                        Telemetry.trackEvent(TelemetryEvent.FilterShowRestaurantsChanged, [{ k: TelemetryProperty.FilterVisibility, v: newValue.toString() }]);\r\n                    }\r\n                });\r\n            }\r\n\r\n            $.each(filterViewModel.foodCategoriesEnablement(), (indexInArray: number, valueOfElement: ICategoryEnablement) => {\r\n                var category = valueOfElement;\r\n                if (this.data.drc.indexOf(valueOfElement.category.sbsid) > -1) {\r\n                    category.visible(false);\r\n                }\r\n\r\n                category.visible.subscribe((newValue: boolean) => {\r\n                    var catId = category.category.sbsid;\r\n                    var i = this.data.drc.indexOf(catId);\r\n                    if (newValue) {\r\n                        if (i > -1) {\r\n                            this.data.drc.splice(i, 1);\r\n                            this.saveData();\r\n                        }\r\n                    } else {\r\n                        if (i < 0) {\r\n                            this.data.drc.push(catId);\r\n                            this.saveData();\r\n                        }\r\n                    }\r\n                });\r\n            });\r\n        }\r\n\r\n        private saveData(): void {\r\n            this.storage.setItem(this.itemKey, JSON.stringify(this.data));\r\n        }\r\n    }\r\n\r\n    export class FilterViewModel {\r\n        private allCategories: { [id: string]: PoiCategoryViewModel } = {};\r\n        private foodCategoriesEnablementLookup: { [id: string]: ICategoryEnablement } = {}\r\n        private filterCacheManager: FilterCacheManager;\r\n        private routeJunctions: IRouteJunction[];\r\n\r\n        public routeId: string;\r\n\r\n        // this setting is necessary because for Exit page we are not preserving showRestaurants and showGasStations to storage, while for route page we are\r\n        public preserveShowAllSettings: boolean;\r\n\r\n        constructor(routeId: string, rjs: IRouteJunction[], foodPoiCategoryOccurrences: IPoiCategoryOccurrence[], topLevelFoodCategories: string[], preserveShowAllSettings: boolean = true) {\r\n            this.routeId = routeId;\r\n            this.routeJunctions = rjs;\r\n            this.preserveShowAllSettings = preserveShowAllSettings;\r\n\r\n            this.showGasStations = ko.observable(true);\r\n            this.showRestaurants = ko.observable(true);\r\n\r\n\r\n            this.foodCategoriesEnablement = ko.observableArray([]);\r\n            \r\n\r\n            foodPoiCategoryOccurrences.sort((a, b) => b.c - a.c);\r\n            for (var i = 0; i < foodPoiCategoryOccurrences.length; i++) {\r\n                var categoryOccurrence = foodPoiCategoryOccurrences[i];\r\n                var categoryViewModel = new PoiCategoryViewModel(categoryOccurrence.cat);\r\n                this.allCategories[categoryViewModel.sbsid] = categoryViewModel;\r\n\r\n                // if this category is in the list of top level categories, put it in the list of filters popup\r\n                if (topLevelFoodCategories.indexOf(categoryViewModel.sbsid) > -1) {\r\n                    var categoryEnablement = this.createCategoryEnablement(categoryOccurrence);\r\n                    this.foodCategoriesEnablement.push(categoryEnablement);\r\n                    this.foodCategoriesEnablementLookup[categoryEnablement.category.sbsid] = categoryEnablement;\r\n                }\r\n            }\r\n\r\n\r\n\r\n            this.maxDistanceFromJunction = ko.observable(\"3\");\r\n\r\n            this.maxDistanceFromJunctionIs1 = ko.observable(false);\r\n            this.maxDistanceFromJunctionIs2 = ko.observable(false);\r\n            this.maxDistanceFromJunctionIs3 = ko.observable(true);\r\n            this.maxDistanceFromJunctionIs4 = ko.observable(false);\r\n            this.maxDistanceFromJunctionIs5 = ko.observable(false);\r\n\r\n            var mdarr = [\r\n                [this.maxDistanceFromJunctionIs1, \"1\"],\r\n                [this.maxDistanceFromJunctionIs2, \"2\"],\r\n                [this.maxDistanceFromJunctionIs3, \"3\"],\r\n                [this.maxDistanceFromJunctionIs4, \"4\"],\r\n                [this.maxDistanceFromJunctionIs5, \"5\"]\r\n            ];\r\n\r\n            for (var i = 0; i < mdarr.length; i++) {\r\n\r\n                var selectedmdpair = mdarr[i];\r\n\r\n                (<KnockoutObservable<boolean>>selectedmdpair[0]).subscribe((function (newValue) {\r\n                    var pair = arguments[0];\r\n                    var val = arguments[1];\r\n                    if (val) {\r\n                        this.maxDistanceFromJunction(<string>pair[1]);\r\n                        for (var j = 0; j < mdarr.length; j++) {\r\n                            if (mdarr[j][1] !== pair[1]) {\r\n                                (<KnockoutObservable<boolean>>mdarr[j][0])(false);\r\n                            }\r\n                        }\r\n                    }\r\n                }).bind(this, selectedmdpair));\r\n            }\r\n\r\n            this.filteredFoodCount = ko.observable(1);\r\n            this.filteredGasStationCount = ko.observable(1);\r\n\r\n            // load filters for cache for Web App\r\n            // TBD SPA\r\n            if (AppState.current.app === SBSApp.Web) {\r\n                this.filterCacheManager = new FilterCacheManager(this);\r\n            }\r\n\r\n\r\n            var self = this;\r\n\r\n            this.selectAllFoodCategories = () => {               \r\n                $.each(this.foodCategoriesEnablement(), (i, item) => item.visible(true));\r\n                this.allRestaurantCategoriesSelected(true);\r\n            };\r\n\r\n            this.unselectAllFoodCategories = () => {\r\n                $.each(this.foodCategoriesEnablement(), (i, item) => item.visible(false));\r\n                this.allRestaurantCategoriesSelected(false);\r\n            };\r\n\r\n            this.updateFilteredCounts();\r\n            this.maxDistanceFromJunction.subscribe((newValue) => this.updateFilteredCounts());\r\n        }\r\n\r\n\r\n        public showGasStations: KnockoutObservable<boolean>;\r\n        public showRestaurants: KnockoutObservable<boolean>;\r\n        public foodCategoriesEnablement: KnockoutObservableArray<ICategoryEnablement>;\r\n        public maxDistanceFromJunction: KnockoutObservable<string>;\r\n\r\n        public maxDistanceFromJunctionIs1: KnockoutObservable<boolean>;\r\n        public maxDistanceFromJunctionIs2: KnockoutObservable<boolean>;\r\n        public maxDistanceFromJunctionIs3: KnockoutObservable<boolean>;\r\n        public maxDistanceFromJunctionIs4: KnockoutObservable<boolean>;\r\n        public maxDistanceFromJunctionIs5: KnockoutObservable<boolean>;\r\n        public filteredGasStationCount: KnockoutObservable<number>;\r\n        public filteredFoodCount: KnockoutObservable<number>;\r\n\r\n        public allRestaurantCategoriesSelected: KnockoutObservable<boolean> = ko.observable(false);\r\n\r\n        public selectAllFoodCategories(): void { }\r\n        public unselectAllFoodCategories(): void { }\r\n\r\n        public getCategoryName(sbsid: string): string {\r\n            if (this.allCategories[sbsid]) {\r\n                return this.allCategories[sbsid].name;\r\n            }\r\n\r\n            return \"\";\r\n        };\r\n\r\n        public isFoodCategoryVisible(sbsid: string): boolean {\r\n            if (this.foodCategoriesEnablementLookup[sbsid]) {\r\n                return this.foodCategoriesEnablementLookup[sbsid].visible();\r\n            }\r\n\r\n            if (this.allCategories[sbsid] && this.allCategories[sbsid].parentIDs.length > 0) {\r\n                for (var i = 0; i < this.allCategories[sbsid].parentIDs.length; i++) {\r\n                    var isParentVisible = this.isFoodCategoryVisible(this.allCategories[sbsid].parentIDs[i]);\r\n                    if (isParentVisible) {\r\n                        return true;\r\n                    }\r\n                }\r\n                // this category has parents and all of them are hidden\r\n                return false;\r\n            }\r\n            else {\r\n                // this category is not in allCategories list or it has no parents (top level category)\r\n                // if we reached top level category it means we haven't accounted for it in our filtering\r\n                return true;\r\n            }\r\n        }\r\n\r\n        private updateFilteredCounts() {\r\n            var fCount: number = 0;\r\n            var gsCount: number = 0;\r\n            var distance = parseInt(this.maxDistanceFromJunction());\r\n\r\n            $.each(this.foodCategoriesEnablement(), (i, item) => item.tempCount = 0);\r\n\r\n            for (var i = 0; i < this.routeJunctions.length; i++) {\r\n                var rj = this.routeJunctions[i];\r\n                for (var j = 0; j < rj.j.p.length; j++) {\r\n                    var poiOnJunction = rj.j.p[j];\r\n                    if (poiOnJunction.dfj <= distance) {\r\n                        if (poiOnJunction.p.pt === PoiType.Food) {\r\n                            fCount++;\r\n                            $.each(poiOnJunction.p.c, (i, categoryId) => {\r\n                                if (this.foodCategoriesEnablementLookup[categoryId]) {\r\n                                    this.foodCategoriesEnablementLookup[categoryId].tempCount++;\r\n                                }\r\n                            });\r\n\r\n\r\n                        } else if (poiOnJunction.p.pt === PoiType.Gas) {\r\n                            gsCount++;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            $.each(this.foodCategoriesEnablement(), (i, item) => {\r\n                \r\n                item.count(item.tempCount);\r\n            });\r\n\r\n            this.foodCategoriesEnablement.sort((a, b) => b.count() - a.count());\r\n\r\n            this.filteredFoodCount(fCount);\r\n            this.filteredGasStationCount(gsCount);\r\n\r\n        };\r\n\r\n        private createCategoryEnablement(categoryOccurrence: IPoiCategoryOccurrence): ICategoryEnablement {\r\n            var categoryEnablement: ICategoryEnablement =\r\n                {\r\n                    category: new PoiCategoryViewModel(categoryOccurrence.cat),\r\n                    count: ko.observable(categoryOccurrence.c),\r\n                    tempCount:0,\r\n                    visible: ko.observable(true)\r\n                };\r\n            return categoryEnablement;\r\n        };\r\n    }\r\n}","/// <reference path=\"tsdef/jquery.d.ts\"/>\r\n/// <reference path=\"tsdef/jquerymobile.d.ts\"/>\r\n/// <reference path=\"tsdef/knockout-3.3.d.ts\"/>\r\n\r\nmodule StopByStop {\r\n    export const PAGENAME_HOME = \"sbs-homePG\";\r\n    export const PAGENAME_Route = \"route-page\";\r\n    export const PAGENAME_POIGroup = \"poigroup-page\";\r\n    export const PAGENAME_Exit = \"exit-page\";\r\n    export const PAGENAME_About = \"about-page\";\r\n    export const N_LAT_BOUNDARY = 50.00;\r\n    export const S_LAT_BOUNDARY = 25.00;\r\n    export const W_LON_BOUNDARY = -125.00;\r\n    export const E_LON_BOUNDARY = -66.00;\r\n    export const ROUTE_PLAN_STORAGE_KEY = \"sbsroutes\";\r\n\r\n    export class Utils {\r\n        public static parseUrlForNavigationLocation(url: string): ISBSNavigationLocation {\r\n            url = url.toLowerCase();\r\n            var navigationLocation: ISBSNavigationLocation = { page: SBSPage.home, poiType: PoiType.General };\r\n            var hashIndex = url.indexOf(\"#\");\r\n            var queryStringPart:string = null;\r\n            if (hashIndex >= 0) {\r\n                var indexOfPageNameEnd = url.indexOf(\"&\", hashIndex) - 1;\r\n                if (indexOfPageNameEnd < 0) {\r\n                    indexOfPageNameEnd = url.length - 1;\r\n                }else{\r\n                    queryStringPart = url.substr(indexOfPageNameEnd+1);\r\n                }\r\n                var pageName = url.substr(hashIndex + 1, indexOfPageNameEnd - hashIndex);\r\n                if (SBSPage[pageName]) {\r\n                    navigationLocation.page = SBSPage[pageName];\r\n                }\r\n\r\n                if (queryStringPart){\r\n                    var queryStringParameterPairs:string[] = queryStringPart.split(\"&\");\r\n                    for (var i=0; i< queryStringParameterPairs.length; i++){\r\n                      var qsParts = queryStringParameterPairs[i].split(\"=\");\r\n                      if (qsParts.length === 2){\r\n                          var parameter = qsParts[0];\r\n                          var val = qsParts[1];\r\n                          switch (parameter){\r\n                              case \"routeid\":\r\n                                 navigationLocation.routeId = val;\r\n                                 break;\r\n                              case \"exitid\":\r\n                                navigationLocation.exitId = val;\r\n                                break;\r\n                              case \"poitype\":\r\n                                navigationLocation.poiType = PoiType.General;\r\n                                if (val === \"food\"){\r\n                                    navigationLocation.poiType = PoiType.Food;\r\n                                }else if (val === \"gas\"){\r\n                                    navigationLocation.poiType = PoiType.Gas;\r\n                                }\r\n                                break;\r\n                          }\r\n                      }\r\n                    }\r\n\r\n                }\r\n            }\r\n\r\n            return navigationLocation;\r\n        }\r\n\r\n        public static getMileString(distance: number): string {\r\n            if (distance < 0.1) {\r\n                return \"<0.1mi\";\r\n            }\r\n\r\n            return distance.toString() + \"mi\";\r\n        }\r\n\r\n        public static getTimeString(time: Date, msOffset: number = 0): string {\r\n            time = new Date(time.getTime() + msOffset);\r\n            return Utils.formatTime(time);\r\n        }\r\n\r\n        public static formatTime(date: Date) {\r\n            var hours = date.getHours();\r\n            var minutes = date.getMinutes();\r\n            var minutesString: string = minutes.toString();\r\n            var ampm = hours >= 12 ? \"pm\" : \"am\";\r\n            hours = hours % 12;\r\n            if (hours === 0) {\r\n                hours = 12;\r\n            }\r\n\r\n            if (minutes < 10) {\r\n                minutesString = \"0\" + minutesString;\r\n            }\r\n            return hours.toString() + \":\" + minutesString + \" \" + ampm;\r\n\r\n        }\r\n\r\n        // http://stackoverflow.com/questions/3219758/detect-changes-in-the-dom\r\n        public static observeDOM: (obj: Element, callback: () => void) => void = (() => {\r\n            var MutationObserver = (<any>window).MutationObserver || (<any>window).WebKitMutationObserver,\r\n                eventListenerSupported = window.addEventListener;\r\n\r\n            return function (obj, callback) {\r\n                if (MutationObserver) {\r\n                    // define a new observer\r\n                    var obs = new MutationObserver(function (mutations, observer) {\r\n                        if (mutations[0].addedNodes.length || mutations[0].removedNodes.length)\r\n                            callback();\r\n                    });\r\n                    // have the observer observe foo for changes in children\r\n                    obs.observe(obj, { childList: true, subtree: true });\r\n                }\r\n                else if (eventListenerSupported) {\r\n                    obj.addEventListener('DOMNodeInserted', callback, false);\r\n                    obj.addEventListener('DOMNodeRemoved', callback, false);\r\n                }\r\n            }\r\n        })();\r\n\r\n        public static hasAnyOwnProperties(obj: Object): boolean {\r\n            for (var prop in obj) {\r\n                if (obj.hasOwnProperty(prop)) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n\r\n        public static runOnce<T>(func: (...args: any[]) => T): (...args: any[]) => T {\r\n            var ran = false;\r\n            var memo: T;\r\n            return function (...args: any[]) {\r\n                if (!ran) {\r\n                    ran = true;\r\n                    memo = func.apply(this, arguments);\r\n                }\r\n                return memo;\r\n            };\r\n        };\r\n\r\n        public static spaPageNavigate(page: SBSPage, routeId?: string, exitId?: string, poiType?: PoiType): void {\r\n            var pageId = \"#home\";\r\n            switch (page) {\r\n                case SBSPage.about:\r\n                    pageId = \"#about\";\r\n                    break;\r\n                case SBSPage.exit:\r\n                    pageId = \"#exit\";\r\n                    break;\r\n                case SBSPage.route:\r\n                    pageId = \"#route\";\r\n                    break;\r\n            }\r\n\r\n            var dataUrl = pageId;\r\n            if (routeId) {\r\n                dataUrl += \"&routeid=\" + routeId;\r\n            }\r\n            if (exitId) {\r\n                dataUrl += \"&exitid=\" + exitId;\r\n            }\r\n            if (poiType) {\r\n                dataUrl += \"&poitype=\" + PoiType[poiType].toLowerCase();\r\n            }\r\n\r\n            $.mobile.pageContainer.pagecontainer(\r\n                \"change\",\r\n                pageId, { dataUrl: dataUrl });\r\n        }\r\n    }\r\n}","/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\r\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\r\n\r\n\"use strict\";\r\nmodule StopByStop {\r\n    export class PoiImageViewModel {\r\n        private _obj: IPoiImage;\r\n\r\n        constructor(obj: IPoiImage) {\r\n            this._obj = obj;\r\n            this.imageUrl = ko.observable(this._obj.u);\r\n        }\r\n\r\n        public imageUrl: KnockoutObservable<string>;\r\n    }\r\n}","/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\r\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\r\n\r\n\"use strict\";\r\nmodule StopByStop {\r\n    export class LocationViewModel {\r\n        constructor(obj: ILocation) {\r\n            this.lat = obj.a;\r\n            this.lon = obj.o;\r\n            this.placeDescription = obj.pd || \"\";\r\n        }\r\n\r\n        public lat: number;\r\n        public lon: number;\r\n        public placeDescription: string;\r\n\r\n        private static GRAIN: number = 0.1;\r\n        public static getGridLocations(location: ILocation): LocationViewModel[]\r\n        {\r\n            var mainLocation = new LocationViewModel(\r\n                {\r\n                    a: LocationViewModel.roundToNLat(location.a),\r\n                    o: LocationViewModel.roundToWLon(location.o)\r\n                });\r\n            \r\n\r\n            // n locations\r\n            var nwLocation = new LocationViewModel({\r\n                a: mainLocation.lat + LocationViewModel.GRAIN,\r\n                o: mainLocation.lon - LocationViewModel.GRAIN\r\n            });\r\n            var nLocation = new LocationViewModel({\r\n                a: mainLocation.lat + LocationViewModel.GRAIN,\r\n                o: mainLocation.lon\r\n            });\r\n            var neLocation = new LocationViewModel({\r\n                a: mainLocation.lat + LocationViewModel.GRAIN,\r\n                o: mainLocation.lon + LocationViewModel.GRAIN\r\n            });\r\n\r\n          \r\n\r\n            // e locations\r\n            var eLocation = new LocationViewModel({\r\n                a: mainLocation.lat,\r\n                o: mainLocation.lon + LocationViewModel.GRAIN\r\n            });\r\n            var seLocation = new LocationViewModel({\r\n                a: mainLocation.lat - LocationViewModel.GRAIN,\r\n                o: mainLocation.lon + LocationViewModel.GRAIN\r\n            });\r\n\r\n\r\n            // s locations\r\n            var sLocation = new LocationViewModel({\r\n                a: mainLocation.lat - LocationViewModel.GRAIN,\r\n                o: mainLocation.lon\r\n            });\r\n            var swLocation = new LocationViewModel({\r\n                a: mainLocation.lat - LocationViewModel.GRAIN,\r\n                o: mainLocation.lon - LocationViewModel.GRAIN\r\n            });\r\n            \r\n\r\n            // w location\r\n            var wLocation = new LocationViewModel({\r\n                a: mainLocation.lat,\r\n                o: mainLocation.lon - LocationViewModel.GRAIN\r\n            });\r\n\r\n            return [\r\n                mainLocation,\r\n                nwLocation,\r\n                nLocation,\r\n                neLocation,\r\n                eLocation,\r\n                seLocation,\r\n                sLocation,\r\n                swLocation,\r\n                wLocation\r\n            ];\r\n        }\r\n        private static roundToNLat(lat: number): number {\r\n\r\n            var roundedLat = LocationViewModel.round1DecimalDigit(lat);\r\n            if (roundedLat < lat) {\r\n                roundedLat += 0.1;\r\n            }\r\n            return roundedLat;\r\n        }\r\n        private static roundToWLon(lon: number): number {\r\n            var roundedLon = LocationViewModel.round1DecimalDigit(lon);\r\n            if (roundedLon > lon) {\r\n                roundedLon -= 0.1;\r\n            }\r\n            return roundedLon;\r\n        }\r\n        private static round1DecimalDigit(n: number): number {\r\n            return Math.round(n * 10) / 10\r\n        }\r\n    }\r\n}","/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\r\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\r\n\r\n\"use strict\";\r\nmodule StopByStop {\r\n    export class ReviewGroupViewModel {\r\n        private _obj: IReviewGroup;\r\n\r\n        constructor(obj: IReviewGroup) {\r\n            this._obj = obj;\r\n            this.name = ko.observable(this._obj.n);\r\n            this.icon = ko.observable(this._obj.i);\r\n            this.reviewCount = ko.observable(this._obj.rc);\r\n            this.reviewPageUrl = ko.observable(this._obj.u);\r\n            this.ratingImageUrl = ko.observable(this._obj.riu);\r\n            this.rating = ko.observable(this._obj.r);\r\n        }\r\n\r\n        public name: KnockoutObservable<string>;\r\n        public icon: KnockoutObservable<string>;\r\n        public reviewCount: KnockoutObservable<number>;\r\n        public reviewPageUrl: KnockoutObservable<string>;\r\n        public ratingImageUrl: KnockoutObservable<string>;\r\n        public rating: KnockoutObservable<number>;\r\n    }\r\n}","/// <reference path=\"../tsdef/jquery.d.ts\"/>\r\n/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\r\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\r\n/// <reference path=\"PoiImageViewModel.ts\"/>\r\n/// <reference path=\"LocationViewModel.ts\"/>\r\n/// <reference path=\"ReviewGroupViewModel.ts\"/>\r\n/// <reference path=\"FilterViewModel.ts\"/>\r\n\r\n\"use strict\";\r\nmodule StopByStop {\r\n    export class PoiViewModel {\r\n        private _obj: IPoi;\r\n\r\n        constructor(obj: IPoi) {\r\n            this._obj = obj;\r\n\r\n            this.sbsid = this._obj.id;\r\n            this.poiCategoryIDs = this._obj.c;\r\n            this.poiType = this._obj.pt;\r\n            this.name = this._obj.n;\r\n            this.description = ko.observable(this._obj.d);\r\n            this.location = new LocationViewModel(this._obj.l);\r\n            this.visible = ko.observable(true);\r\n\r\n            this.telPhoneString = \"\";\r\n            if (this.sbsid.indexOf(\"y_\") === 0) {\r\n                this.telPhoneString = this.sbsid.substr(2);\r\n            }\r\n\r\n            this.isYInfoLoading = ko.observable(true);\r\n            this.yUrl = ko.observable(\"#\");\r\n            this.yStarClass = ko.observable(\"stars_0\");\r\n            this.yReviewCountString = ko.observable(\"\");\r\n\r\n            /*\r\n            if (this._obj.i) {\r\n                this.images = ko.observableArray($.map(this._obj.i, (valueOfElement: IPoiImage, indexInArray: number) =>\r\n                    new PoiImageViewModel(valueOfElement)));\r\n            }\r\n            */\r\n\r\n            /*\r\n            if (this._obj.rg) {\r\n                this.reviewGroups = ko.observableArray($.map(this._obj.rg, (valueOfElement: IReviewGroup, indexInArray: number) =>\r\n                    new ReviewGroupViewModel(valueOfElement)));\r\n            }\r\n            */\r\n        }\r\n\r\n        public updateYInfo(poi: IPoi): void {\r\n            if (poi.rg && poi.rg.length > 0) {\r\n                this.yUrl(poi.rg[0].u);\r\n                this.yStarClass(PoiViewModel.getYStarClass(poi.rg[0].r));\r\n                this.yReviewCountString(PoiViewModel.getReviewsString(poi.rg[0].rc));\r\n                this.isYInfoLoading(false);\r\n            }\r\n        }\r\n\r\n        public sbsid: string;\r\n        public poiCategoryIDs: string[];\r\n        public poiType: PoiType;\r\n        public name: string;\r\n        public description: KnockoutObservable<string>;\r\n        public location: LocationViewModel;\r\n        public visible: KnockoutObservable<boolean>;\r\n        public telPhoneString: string;\r\n        public isYInfoLoading: KnockoutObservable<boolean>;\r\n\r\n        public yUrl: KnockoutObservable<string>;\r\n        public yStarClass: KnockoutObservable<string>;\r\n        public yReviewCountString: KnockoutObservable<string>;\r\n\r\n        /*\r\n        public images: KnockoutObservableArray<PoiImageViewModel>;  \r\n        public reviewGroups: KnockoutObservableArray<ReviewGroupViewModel>;\r\n        */\r\n\r\n        private static getReviewsString(reviewCount: number):string {\r\n            if (reviewCount === 0) {\r\n                return \"no reviews\";\r\n            } else if (reviewCount === 1) {\r\n                return \"1 review\";\r\n            }\r\n            return reviewCount.toString() + \" reviews\";\r\n        };\r\n\r\n        private static getYStarClass(rating: number): string {\r\n            var starClassName: string = null;\r\n            switch (rating.toString()) {\r\n                case \"5\":\r\n                    starClassName = \"stars_5\";\r\n                    break;\r\n                case \"4.5\":\r\n                    starClassName = \"stars_4_half\";\r\n                    break;\r\n                case \"4\":\r\n                    starClassName = \"stars_4\";\r\n                    break;\r\n                case \"3.5\":\r\n                    starClassName = \"stars_3_half\";\r\n                    break;\r\n                case \"3\":\r\n                    starClassName = \"stars_3\";\r\n                    break;\r\n                case \"2.5\":\r\n                    starClassName = \"stars_2_half\";\r\n                    break;\r\n                case \"2\":\r\n                    starClassName = \"stars_2\";\r\n                    break;\r\n                case \"1.5\":\r\n                    starClassName = \"stars_1_half\";\r\n                    break;\r\n                case \"1\":\r\n                    starClassName = \"stars_1\";\r\n                    break;\r\n                case \"0\":\r\n                    starClassName = \"stars_0\";\r\n                    break;\r\n            }\r\n\r\n            return starClassName;\r\n        }\r\n    }\r\n}   ","/// <reference path=\"../tsdef/jquery.d.ts\"/>\r\n/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\r\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\r\n\r\n\"use strict\";\r\nmodule StopByStop {\r\n    export interface IStopPlace {\r\n        id: string;\r\n        exitId: string;\r\n        name: string;\r\n        lat: number;\r\n        lon: number;\r\n        duration: number;\r\n        /** distance to exit from route start */\r\n        dtefrs: number;\r\n        /** distance from exit */\r\n        dfe: number;\r\n        type: PoiType;\r\n    }\r\n}","/// <reference path=\"../tsdef/jquery.d.ts\"/>\r\n/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\r\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\r\n/// <reference path=\"PoiImageViewModel.ts\"/>\r\n/// <reference path=\"LocationViewModel.ts\"/>\r\n/// <reference path=\"ReviewGroupViewModel.ts\"/>\r\n/// <reference path=\"PoiViewModel.ts\"/>\r\n/// <reference path=\"IStopPlace.ts\"/>\r\n/// <reference path=\"../Utils.ts\"/>\r\n\r\n\"use strict\";\r\nmodule StopByStop {\r\n    export class PoiOnJunctionViewModel implements IStopPlace {\r\n        private _obj: IPoiOnJunction;\r\n        private _app: IAppViewModel;\r\n\r\n        constructor(obj: IPoiOnJunction, exit: IRouteJunction, app: IAppViewModel) {\r\n            this._obj = obj;\r\n            this._app = app;\r\n            this.id = this._obj.id;\r\n            this.dfe = this._obj.dfj;\r\n            this.dtefrs = exit.dfrs;\r\n            this.exitId = exit.j.oid.toString();\r\n            this.distanceFromJunctionText = Utils.getMileString(this.dfe) + \" miles from exit\";\r\n            this.poi = new PoiViewModel(this._obj.p);\r\n            this.name = this.poi.name;\r\n            this.lat = this.poi.location.lat;\r\n            this.lon = this.poi.location.lon;\r\n            this.type = obj.p.pt;  \r\n        }\r\n\r\n        public id: string;\r\n        public exitId: string;\r\n        public name: string;\r\n        public location: LocationViewModel;\r\n        public dfe: number;\r\n        public dtefrs: number;\r\n        public distanceFromJunctionText: string;\r\n        public poi: PoiViewModel;\r\n        public duration: number;\r\n        public lat: number;\r\n        public lon: number;\r\n        public type: PoiType;\r\n\r\n\r\n        public addToRouteOptionsClick(): void {\r\n            var plannedStop = this._app.routePlan.getOrCreateStop(this);\r\n            this._app.routePlan.showStopSettings(plannedStop);\r\n        }\r\n    }\r\n}   ","/// <reference path=\"../tsdef/jquery.d.ts\"/>\r\n/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\r\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\r\n/// <reference path=\"../Utils.ts\"/>\r\n/// <reference path=\"../Telemetry.ts\"/>\r\n\r\n/// <reference path=\"PoiOnJunctionViewModel.ts\"/>\r\n\r\n\r\n\"use strict\";\r\nmodule StopByStop {\r\n    export class RouteStopViewModel {\r\n\r\n        constructor(stopPlace: IStopPlace) {\r\n            this.stopPlace = stopPlace;\r\n            this.sbsid = stopPlace.id;\r\n            this.location = new LocationViewModel({ a: stopPlace.lat, o: stopPlace.lon });\r\n            this.name = stopPlace.name;\r\n\r\n            this.stopDurationFastUpdate = ko.observable(stopPlace.duration || 15); //default stop time is 15 minutes\r\n\r\n            this.stopDuration = ko.observable(stopPlace.duration || 15); //default stop time is 15 minutes\r\n            \r\n            this.stopDuration.extend({ rateLimit: { timeout: 1000, method: \"notifyWhenChangesStop\" } });\r\n\r\n\r\n            this.exitEta = ko.observable(new Date());\r\n            this.etaString = ko.computed(() => {\r\n                var drivingTimeToPlaceInSeconds = this.getDrivingTimeToPlaceInSeconds();\r\n                var stopEta = new Date(this.exitEta().getTime() + drivingTimeToPlaceInSeconds * 1000);\r\n                var stopEtd = new Date(stopEta.getTime() + this.stopDuration() * 60 * 1000);\r\n                return Utils.getTimeString(stopEta) + \"-\" + Utils.getTimeString(stopEtd);\r\n            });\r\n            this.stopDurationHours = ko.computed(() => {\r\n                var n = (Math.floor(this.stopDurationFastUpdate() / 60)).toString();\r\n                if (n.length === 1) {\r\n                    n = \"0\" + n;\r\n                }\r\n                return n;\r\n            });\r\n\r\n            this.stopDurationMinutes = ko.computed(() => {\r\n                var n = (this.stopDurationFastUpdate() % 60).toString();\r\n                if (n.length === 1) {\r\n                    n = \"0\" + n;\r\n                }\r\n                return n;\r\n            });\r\n\r\n            this.detourDuration = ko.computed(() => {\r\n                var drivigTimeToPlaceInSeconds = this.getDrivingTimeToPlaceInSeconds() * 2;\r\n                var stopDurationInSeconds = this.stopDuration() * 60;\r\n                return drivigTimeToPlaceInSeconds + stopDurationInSeconds;\r\n            });\r\n        }\r\n\r\n        private getDrivingTimeToPlaceInSeconds(): number {\r\n            // for now let's assume 20mph non-highway speed\r\n            return this.stopPlace.dfe / 20 * 3600;\r\n        }\r\n\r\n        public add5MinutesToDuration(): void {\r\n            Telemetry.trackEvent(TelemetryEvent.Add5MinToStop);\r\n            this.stopDurationFastUpdate(this.stopDurationFastUpdate() + 5);\r\n            this.stopDuration(this.stopDurationFastUpdate());\r\n        }\r\n\r\n        public subtract5MinutesFromDuration(): void {\r\n            Telemetry.trackEvent(TelemetryEvent.Remove5MinFromStop);\r\n            this.stopDurationFastUpdate(Math.max(0, this.stopDurationFastUpdate() - 5));\r\n            this.stopDuration(this.stopDurationFastUpdate());\r\n        }\r\n\r\n        public navigate(): void {\r\n            Telemetry.trackEvent(TelemetryEvent.StopPopupNavigateClick, null, null, true);\r\n            if (navigator && navigator.geolocation) {\r\n                navigator.geolocation.getCurrentPosition(\r\n                    (position: Position) => {\r\n\r\n                        var srcLat = position.coords.latitude;\r\n                        var srcLon = position.coords.longitude;\r\n                        var navigationUrl = \"http://maps.google.com/maps?saddr=\"\r\n                            + srcLat + \",\"\r\n                            + srcLon + \"&daddr=\"\r\n                            + this.location.lat.toString() + \",\"\r\n                            + this.location.lon.toString();\r\n\r\n\r\n                        Telemetry.trackEvent(\r\n                            TelemetryEvent.StopPopupNavigateBeforeDirect,\r\n                            [\r\n                                { k: TelemetryProperty.NavigationUrl, v: navigationUrl }\r\n                            ],\r\n                            null,\r\n                            true);\r\n\r\n                        window.location.assign(navigationUrl);\r\n                    },\r\n                    (positionError: PositionError) => {\r\n                        try {\r\n                            Telemetry.trackError(new Error(\"getCurrentPositionError\"));\r\n                        }\r\n                        catch (ex) { }\r\n                        window.alert(\"Please allow StopByStop.com to share your location.\");\r\n                    });\r\n            }\r\n        };\r\n\r\n        public stopDuration: KnockoutObservable<number>;\r\n        public stopDurationFastUpdate: KnockoutObservable<number>;\r\n        public stopDurationHours: KnockoutComputed<string>;\r\n        public stopDurationMinutes: KnockoutComputed<string>;\r\n        public visible: KnockoutComputed<boolean>;\r\n        public roadlineTopOffsetPart: KnockoutComputed<number>;\r\n\r\n\r\n        /** total detour duration in seconds */\r\n        public detourDuration: KnockoutComputed<number>;\r\n        public exitEta: KnockoutObservable<Date>;\r\n        public etaString: KnockoutComputed<string>;\r\n        public sbsid: string;\r\n        public location: LocationViewModel;\r\n        public name: string;\r\n        public stopPlace: IStopPlace;\r\n\r\n    }\r\n}","/// <reference path=\"../tsdef/jquery.d.ts\"/>\r\n/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\r\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\r\n/// <reference path=\"LocationViewModel.ts\"/>\r\n/// <reference path=\"PoiOnJunctionViewModel.ts\"/>\r\n\r\n\"use strict\";\r\nmodule StopByStop {\r\n    export class JunctionViewModel {\r\n        private _obj: IJunction;\r\n        private _app: IAppViewModel;\r\n\r\n        constructor(robj: IRouteJunction, app: IAppViewModel) {\r\n            this._obj = robj.j;\r\n            this._app = app;\r\n\r\n            this.name = this._obj.n;\r\n            this.index = this._obj.i;\r\n            this.osmid = this._obj.oid;\r\n            this.highwayName = this._obj.hn;\r\n            this.ref = this._obj.r;\r\n            this.location = new LocationViewModel(this._obj.l);\r\n            this.exitTo = this._obj.et;\r\n            this.exitToLeft = this._obj.etl;\r\n            this.exitToRight = this._obj.etr;\r\n\r\n            if (this._obj.p) {\r\n                this.pois = ko.observableArray<PoiOnJunctionViewModel>();\r\n\r\n                for (var i = 0; i < this._obj.p.length; i++) {\r\n                    var poiOnJunctionViewModel = new PoiOnJunctionViewModel(this._obj.p[i], robj, this._app);\r\n                    this.pois.push(poiOnJunctionViewModel);\r\n                    this.poiLookup[poiOnJunctionViewModel.id] = poiOnJunctionViewModel;\r\n                }\r\n            }\r\n\r\n            this.pois.sort((l, r) => l.dfe - r.dfe);\r\n\r\n            \r\n        }\r\n\r\n        public name: string;\r\n        public index: number;\r\n        public osmid: number;\r\n        public highwayName: string;\r\n        public ref: string;\r\n        public location: LocationViewModel;\r\n        public exitTo: string;\r\n        public exitToLeft: string;\r\n        public exitToRight: string;\r\n        public pois: KnockoutObservableArray<PoiOnJunctionViewModel>;\r\n        public exitName: KnockoutComputed<string>;\r\n        public poiLookup: { [id: string]: PoiOnJunctionViewModel } = {};\r\n    }\r\n}","/// <reference path=\"tsdef/jquery.d.ts\"/>\r\n/// <reference path=\"tsdef/jquerymobile.d.ts\"/>\r\n/// <reference path=\"tsdef/knockout-3.3.d.ts\"/>\r\n/// <reference path=\"Telemetry.ts\"/>\r\n/// <reference path=\"Utils.ts\"/>\r\n/// <reference path=\"stopbystop-interfaces.ts\"/>\r\n\r\nmodule StopByStop {\r\n\r\n    export class AppState {\r\n        public static current: IAppState = {\r\n            baseDataUrl: null,\r\n            baseImageUrl: null,\r\n            app: null\r\n        };\r\n    }\r\n}","/// <reference path=\"../tsdef/jquery.d.ts\"/>\r\n/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\r\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\r\n/// <reference path=\"JunctionViewModel.ts\"/>\r\n/// <reference path=\"FilterViewModel.ts\"/>\r\n/// <reference path=\"../Utils.ts\"/>\r\n/// <reference path=\"../AppState.ts\"/>\r\n\r\n\"use strict\";\r\nmodule StopByStop {\r\n    export class RouteJunctionViewModel {\r\n\r\n        private _obj: IRouteJunction;\r\n\r\n        constructor(obj: IRouteJunction, routeStartTime: Date, app: IAppViewModel) {\r\n            this._obj = obj;\r\n            this.distanceFromRouteStartText = ko.observable(Utils.getMileString(this._obj.dfrs));\r\n\r\n\r\n\r\n            this.junction = new JunctionViewModel(this._obj, app);\r\n            this.visible = ko.observable(true);\r\n            this.top = ko.observable(\"\");\r\n\r\n            this.visibleGasPois = ko.observableArray([]);\r\n            this.visibleFoodPois = ko.observableArray([]);\r\n            this.closestFoodPoiDistance = ko.observable(\"\");\r\n            this.closestGasPoiDistance = ko.observable(\"\");\r\n            this.gasPoiCountString = ko.observable(\"\");\r\n            this.foodPoiCountString = ko.observable(\"\");\r\n            this.stops = ko.observableArray<RouteStopViewModel>();\r\n\r\n            this.etaWithoutStops = new Date(routeStartTime.getTime() + this._obj.tfrs * 1000);\r\n            this.eta = ko.observable(this.etaWithoutStops);\r\n            this.hasStops = ko.computed(() => this.stops().length > 0);\r\n\r\n            this.description = ko.computed(() => this.junction.name +\r\n                \". \" + this.gasPoiCountString() + \" gas stations, \" +\r\n                this.foodPoiCountString() + \" restaurants within 5 mile travel distance.\");\r\n\r\n            this.etaString = ko.computed(() => {\r\n                var s = Utils.getTimeString(this.eta());\r\n                if (this.hasStops()) {\r\n                    s = Utils.getTimeString(this.eta()) + \"-\" + Utils.getTimeString(this.etd());\r\n                }\r\n                return s;\r\n            });\r\n\r\n            this.etd = ko.computed(() => {\r\n                var totalDetourTime = 0;\r\n                for (var i = 0; i < this.stops().length; i++) {\r\n                    totalDetourTime += this.stops()[i].detourDuration();\r\n                }\r\n                return new Date(this.eta().getTime() + totalDetourTime * 1000);\r\n            });\r\n        }\r\n\r\n        public distanceFromRouteStartText: KnockoutObservable<string>;\r\n        public junction: JunctionViewModel;\r\n        public visible: KnockoutObservable<boolean>;\r\n        public top: KnockoutObservable<string>;\r\n\r\n        public visibleGasPois: KnockoutObservableArray<PoiOnJunctionViewModel>;\r\n        public visibleFoodPois: KnockoutObservableArray<PoiOnJunctionViewModel>;\r\n        public closestGasPoiDistance: KnockoutObservable<string>;\r\n        public closestFoodPoiDistance: KnockoutObservable<string>;\r\n        public gasPoiCountString: KnockoutObservable<string>;\r\n        public foodPoiCountString: KnockoutObservable<string>;\r\n        public stops: KnockoutObservableArray<RouteStopViewModel>;\r\n\r\n        public etaWithoutStops: Date;\r\n        public eta: KnockoutObservable<Date>;\r\n        public etaString: KnockoutComputed<string>;\r\n        public etd: KnockoutComputed<Date>;\r\n        public hasStops: KnockoutComputed<boolean>;\r\n        public description: KnockoutComputed<string>;\r\n\r\n        public applyFilter(filter: FilterViewModel): void {\r\n            this.visibleGasPois.removeAll();\r\n            this.visibleFoodPois.removeAll();\r\n\r\n            for (var i = 0; i < this.junction.pois().length; i++) {\r\n                var poi = this.junction.pois()[i];\r\n                poi.poi.visible(false);\r\n                var maxDistanceFromJunction = parseInt(filter.maxDistanceFromJunction(), 10);\r\n                if (poi.poi.poiType === PoiType.Food && filter.showRestaurants() &&\r\n                    poi.dfe <= maxDistanceFromJunction) {\r\n                    var poiFoodCategories = poi.poi.poiCategoryIDs;\r\n\r\n                    // in some cases as was discovered poiFoodCategories can be null\r\n                    // see if categories are specified and if not then add poi anyway\r\n                    if (poiFoodCategories && poiFoodCategories.length > 0) {\r\n                        for (var k = 0; k < poiFoodCategories.length; k++) {\r\n                            if (filter.isFoodCategoryVisible(poiFoodCategories[k])) {\r\n                                this.visibleFoodPois().push(poi);\r\n                                poi.poi.visible(true);\r\n                                break;\r\n                            }\r\n                        }\r\n                    } else {\r\n                        this.visibleFoodPois().push(poi);\r\n                        poi.poi.visible(true);\r\n                    }\r\n                } else if (poi.poi.poiType === PoiType.Gas && filter.showGasStations() &&\r\n                    poi.dfe <= maxDistanceFromJunction) {\r\n                    // TODO: understand why it we may ever end up in this situation\r\n                    this.visibleGasPois().push(poi);\r\n                    poi.poi.visible(true);\r\n                }\r\n            }\r\n\r\n            this.visible((this.visibleFoodPois().length > 0 || this.visibleGasPois().length > 0));\r\n\r\n            this.closestFoodPoiDistance(this.visibleFoodPois().length > 0 ? Utils.getMileString(this.visibleFoodPois()[0].dfe) : \"\");\r\n            this.closestGasPoiDistance(this.visibleGasPois().length > 0 ? Utils.getMileString(this.visibleGasPois()[0].dfe) : \"\");\r\n\r\n            this.gasPoiCountString(this.visibleGasPois().length > 9 ? \"9+\" : this.visibleGasPois().length.toString());\r\n            this.foodPoiCountString(this.visibleFoodPois().length > 9 ? \"9+\" : this.visibleFoodPois().length.toString());\r\n        }\r\n\r\n        public navigateToExitPage(): void {\r\n            Utils.spaPageNavigate(SBSPage.exit, AppState.current.navigationLocation.routeId, this.junction.osmid.toString());\r\n        }\r\n\r\n        public navigateToExitFoodPage(): void {\r\n            Utils.spaPageNavigate(SBSPage.exit, AppState.current.navigationLocation.routeId, this.junction.osmid.toString(), PoiType.Food);\r\n        }\r\n\r\n\r\n        public navigateToExitGasPage(): void {\r\n            Utils.spaPageNavigate(SBSPage.exit, AppState.current.navigationLocation.routeId, this.junction.osmid.toString(), PoiType.Gas);\r\n        }\r\n\r\n\r\n\r\n    }\r\n}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ","/// <reference path=\"../tsdef/jquery.d.ts\"/>\r\n/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\r\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\r\n/// <reference path=\"../Utils.ts\"/>\r\n/// <reference path=\"../Telemetry.ts\"/>\r\n\r\n/// <reference path=\"RouteStopViewModel.ts\"/>\r\n/// <reference path=\"RouteJunctionViewModel.ts\"/>\r\n\r\n\r\n\"use strict\";\r\nmodule StopByStop {\r\n\r\n    export interface IRoutePlan {\r\n        stops: { [id: string]: IStopPlace };\r\n    };\r\n\r\n    export class RoutePlanViewModel {\r\n        private _stopDictionary: { [id: string]: RouteStopViewModel } = {};\r\n        private _storage: Storage = window.sessionStorage;\r\n        private _storageItem: { [id: string]: IRoutePlan } = {};\r\n        private _routeId: string;\r\n        private _destination: LocationViewModel;\r\n\r\n        constructor(routeId: string, routeDistance: number, destination: LocationViewModel, storageOverride: Storage = null) {\r\n            this.routeDistance = routeDistance;\r\n            this._storage = storageOverride || window.sessionStorage;\r\n            this._routeId = routeId;\r\n            this.stops = ko.observableArray([]);\r\n            this.editedStop = ko.observable<RouteStopViewModel>();\r\n            this._stopDictionary = {};\r\n            this._destination = destination;\r\n        }\r\n\r\n        public loadStopsFromStorage(): void {\r\n            this.stops([]);\r\n            this._stopDictionary = {};\r\n            if (this._storage.getItem(ROUTE_PLAN_STORAGE_KEY)) {\r\n                this._storageItem = JSON.parse(this._storage.getItem(ROUTE_PLAN_STORAGE_KEY));\r\n            } else {\r\n                this._storageItem = {};\r\n            }\r\n\r\n            if (!this._storageItem[this._routeId]) {\r\n                this._storageItem[this._routeId] = { stops: {} };\r\n            } else {\r\n                var stops = this._storageItem[this._routeId].stops;\r\n\r\n                for (var id in stops) {\r\n                    var routeStopViewModel = this.getOrCreateStop(stops[id]);\r\n                    this.addStopToRoute(routeStopViewModel, true);\r\n                }\r\n            }\r\n\r\n            this.saveRouteToStorage();\r\n        }\r\n\r\n        public junctionMap: { [id: string]: RouteJunctionViewModel } = {};\r\n        public routeDistance: number;\r\n        public stops: KnockoutObservableArray<RouteStopViewModel>;\r\n        public editedStop: KnockoutObservable<RouteStopViewModel>;\r\n\r\n        public getOrCreateStop(placeObj: IStopPlace, reloadFromCache: boolean = false): RouteStopViewModel {\r\n            /* Ensure that object only contains members that are part of IStopPlace interface,\r\n               as this is about to be serialized. Is there a better way to do it? */\r\n            var place: IStopPlace = {\r\n                dfe: placeObj.dfe,\r\n                dtefrs: placeObj.dtefrs,\r\n                duration: placeObj.duration,\r\n                exitId: placeObj.exitId,\r\n                id: placeObj.id,\r\n                lat: placeObj.lat,\r\n                lon: placeObj.lon,\r\n                name: placeObj.name,\r\n                type: placeObj.type || PoiType.Food\r\n            };\r\n\r\n            var sbsid = place.id;\r\n\r\n            if (!this._stopDictionary[sbsid]) {\r\n                var routeStopViewModel = new RouteStopViewModel(place);\r\n                this._stopDictionary[sbsid] = routeStopViewModel;\r\n            }\r\n\r\n            var stop = this._stopDictionary[sbsid];\r\n            return stop;\r\n        }\r\n\r\n        public addStopToRoute(routeStopViewModel: RouteStopViewModel, reloadFromCache: boolean = false): void {\r\n            Telemetry.trackEvent(TelemetryEvent.AddStopToRoute, [{ k: TelemetryProperty.LoadStopsFromCache, v: reloadFromCache.toString() }]);\r\n\r\n\r\n            var place = routeStopViewModel.stopPlace;\r\n\r\n            // only add it to stops if it is not already in the collection\r\n            var alreadyAdded = false;\r\n            $.each(this.stops(), (index: number, value: RouteStopViewModel) => {\r\n                if (value.sbsid === place.id) {\r\n                    alreadyAdded = true;\r\n                }\r\n            });\r\n\r\n            if (!alreadyAdded) {\r\n                this.stops.push(this._stopDictionary[place.id]);   \r\n\r\n                // add to stop collection bound to UI\r\n                if (AppState.current.pageInfo.pageName === \"route-page\") {\r\n                    var routeJunctionViewModel = this.junctionMap[place.exitId];\r\n                    if (routeJunctionViewModel) {\r\n                        routeJunctionViewModel.stops.push(routeStopViewModel);\r\n                    }\r\n                    else {\r\n                        alert(\"Couldn't find routeJunctionViewModel\");\r\n                    }\r\n                }\r\n\r\n                // update storage item for persistence\r\n                place.duration = routeStopViewModel.stopDuration();\r\n                this._storageItem[this._routeId].stops[place.id] = place;\r\n\r\n                // subscribe for duration updates\r\n                routeStopViewModel.stopDuration.subscribe((newValue: number) => {\r\n                    this._storageItem[this._routeId].stops[place.id].duration = newValue;\r\n                    this.saveRouteToStorage();\r\n                });\r\n\r\n                this.saveRouteToStorage();\r\n            }\r\n        }\r\n\r\n        public removeStop(stop: RouteStopViewModel) {\r\n            Telemetry.trackEvent(TelemetryEvent.RemoveStopFromRoute);\r\n            var sbsid = stop.sbsid;\r\n\r\n            if (this._stopDictionary[sbsid]) {\r\n                var stop = this._stopDictionary[sbsid];\r\n                this.stops.remove(stop);\r\n\r\n                var routeJunctionViewModel = this.junctionMap[stop.stopPlace.exitId];\r\n                if (routeJunctionViewModel) {\r\n                    routeJunctionViewModel.stops.remove(stop);\r\n                }\r\n\r\n                delete this._stopDictionary[sbsid];\r\n                delete this._storageItem[this._routeId].stops[sbsid];\r\n                this.saveRouteToStorage();\r\n            }\r\n        }\r\n\r\n        public showStopSettings(plannedStop: RouteStopViewModel): void {\r\n            Telemetry.trackEvent(TelemetryEvent.ShowStopSettingsPopup);\r\n            this.editedStop(plannedStop);\r\n\r\n            $(\"#stopSettingsDialog\").popup({\r\n                transition: \"slidedown\",\r\n                corners: true\r\n            });\r\n\r\n            $(\"#stopSettingsDialog\").popup(\"open\");\r\n        }\r\n\r\n        public navigate(): void {\r\n            Telemetry.trackEvent(TelemetryEvent.RoutePlanNavigateClick, null, null, true);\r\n            if (this._destination && navigator && navigator.geolocation) {\r\n                navigator.geolocation.getCurrentPosition(\r\n                    (position: Position) => {\r\n\r\n                        var srcLat = position.coords.latitude;\r\n                        var srcLon = position.coords.longitude;\r\n\r\n                        var daddrStr = \"\";\r\n                        for (var i = 0; i < this.stops().length; i++) {\r\n                            if (i > 0) {\r\n                                daddrStr += \"+to:\";\r\n                            }\r\n                            daddrStr += (this.stops()[i].location.lat + \",\" + this.stops()[i].location.lon);\r\n                        }\r\n\r\n                        if (daddrStr !== \"\") {\r\n                            daddrStr += \"+to:\";\r\n                        }\r\n\r\n                        daddrStr += this._destination.lat + \",\" + this._destination.lon;\r\n                        var navigationUrl = \"http://maps.google.com/maps?saddr=\"\r\n                            + srcLat + \",\"\r\n                            + srcLon + \"&daddr=\"\r\n                            + daddrStr;\r\n\r\n                        Telemetry.trackEvent(\r\n                            TelemetryEvent.RoutePlanNavigateBeforeDirect,\r\n                            [\r\n                                { k: TelemetryProperty.StopCount, v: this.stops().length.toString() },\r\n                                { k: TelemetryProperty.NavigationUrl, v: navigationUrl }\r\n                            ],\r\n                            null,\r\n                            true);\r\n\r\n                        window.location.assign(navigationUrl);\r\n\r\n                    },\r\n                    (positionError: PositionError) => {\r\n                        Telemetry.trackError(new Error(\"getCurrentPositionError\"));\r\n                        window.alert(\"Please allow StopByStop.com to share your location.\");\r\n                    });\r\n            }\r\n        };\r\n\r\n        private saveRouteToStorage(): void {\r\n            this._storage.setItem(ROUTE_PLAN_STORAGE_KEY, JSON.stringify(this._storageItem));\r\n        }\r\n    }\r\n}","/// <reference path=\"../tsdef/jquery.d.ts\"/>\r\n/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\r\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\r\n\r\n/// <reference path=\"FilterViewModel.ts\"/>\r\n/// <reference path=\"RouteStopViewModel.ts\"/>\r\n/// <reference path=\"RoutePlanViewModel.ts\"/>\r\n\r\n\"use strict\";\r\nmodule StopByStop {\r\n    export interface IAppViewModel {\r\n        filter: FilterViewModel;\r\n        routePlan: RoutePlanViewModel;\r\n    }\r\n}","/// <reference path=\"stopbystop-interfaces.ts\"/>\r\n\r\nmodule StopByStop {\r\n    export class InitUrls implements IInitUrls {\r\n        constructor(baseUrl: string, baseImageUrl:string) {\r\n            if (typeof baseUrl !== \"string\") {\r\n                baseUrl = \"/\";\r\n            } else if (!/\\/$/.test(baseUrl)) {\r\n                baseUrl += \"/\";\r\n            }\r\n\r\n            this.MapExitIconUrl = baseImageUrl + \"exit_map.png\";\r\n            this.MapFoodIconUrl = baseImageUrl + \"food_map2.png\";\r\n            this.MapGasIconUrl = baseImageUrl + \"gas_map.png\";\r\n            this.BaseUrl = baseUrl;\r\n            this.RouteUrl = baseUrl + \"route/\";\r\n            this.PlacesUrl = baseUrl + \"place/\";\r\n            this.RouteDataUrl = baseUrl + \"routedata/\";\r\n            this.PoiUrl = baseUrl + \"poi/\";\r\n           \r\n        }\r\n\r\n        public BaseUrl: string;\r\n        public RouteUrl: string;\r\n        public RouteDataUrl: string;\r\n        public PlacesUrl: string;\r\n        public PoiUrl: string;\r\n        public MapExitIconUrl: string;\r\n        public MapFoodIconUrl: string;\r\n        public MapGasIconUrl: string;\r\n    }\r\n}","/// <reference path=\"../tsdef/jquery.d.ts\"/>\r\n/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\r\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\r\n/// <reference path=\"JunctionViewModel.ts\"/>\r\n/// <reference path=\"LocationViewModel.ts\"/>\r\n/// <reference path=\"FilterViewModel.ts\"/>\r\n/// <reference path=\"../Utils.ts\"/>\r\n\r\n\"use strict\";\r\nmodule StopByStop {\r\n    export class RouteSegmentViewModel {\r\n        private static SEGMENT_INITIAL_SPACE = 7;\r\n        private static SPACE_FOR_JUNCTION = 8;\r\n\r\n        private _obj: IRouteSegment;\r\n        private _app: IAppViewModel;\r\n\r\n        constructor(obj: IRouteSegment, routeStartTime: Date, app: IAppViewModel) {\r\n            this._obj = obj;\r\n            this._app = app;\r\n\r\n            this.highwayNameText = ko.observable(\"\");\r\n\r\n            if (this._obj.r) {\r\n                this.highwayNameText(this._obj.r);\r\n                if (this._obj.hn && this._obj.hn !== this._obj.r) {\r\n                    this.highwayNameText(this._obj.r + \" - \" + this._obj.hn);\r\n                }\r\n            }\r\n            else {\r\n                if (this._obj.hn) {\r\n                    this.highwayNameText(this._obj.hn);\r\n                } else {\r\n                    /* this was setting it to \"unnamed highway\" before */\r\n                    this.highwayNameText(\"\");\r\n                }\r\n            }\r\n\r\n            this.start = ko.observable(new LocationViewModel(this._obj.s));\r\n            this.end = ko.observable(new LocationViewModel(this._obj.e));\r\n            this.distance = ko.observable(this._obj.d);\r\n            this.routeJunctions = [];\r\n\r\n            if (this._obj.j) {\r\n                for (var i = 0; i < this._obj.j.length; i++) {\r\n                    var routeJunctionViewModel = new RouteJunctionViewModel(this._obj.j[i], routeStartTime, this._app);\r\n                    this._app.routePlan.junctionMap[routeJunctionViewModel.junction.osmid.toString()] = routeJunctionViewModel;\r\n                    this.routeJunctions.push(routeJunctionViewModel);\r\n                }\r\n            }\r\n\r\n            this.routeVisibleJunctions = ko.observableArray([]);\r\n            this.portionCompleted = ko.observable(this._obj.pc);\r\n            this.startIndex = ko.observable(this._obj.si);\r\n            this.endIndex = ko.observable(this._obj.ei);\r\n\r\n\r\n            this.height = ko.computed(() => {\r\n                return (this.routeVisibleJunctions().length *\r\n                    RouteSegmentViewModel.SPACE_FOR_JUNCTION +\r\n                    RouteSegmentViewModel.SEGMENT_INITIAL_SPACE).toString() + \"em\";\r\n            });\r\n\r\n            this.distanceText = ko.computed(() => {\r\n                return Utils.getMileString(this.distance());\r\n            });\r\n\r\n            this.maneuver = this._obj.m;\r\n            this.instructions = this._obj.i || \"\";\r\n            this.instructionsTip = this.instructions.replace(/(<([^>]+)>)/ig, \"\");\r\n            \r\n\r\n            this.layoutJunctions();\r\n        }\r\n\r\n\r\n\r\n        public highwayName: KnockoutObservable<string>;\r\n        public ref: KnockoutObservable<string>;\r\n        public start: KnockoutObservable<LocationViewModel>;\r\n        public end: KnockoutObservable<LocationViewModel>;\r\n        public distance: KnockoutObservable<number>;\r\n        public routeJunctions: RouteJunctionViewModel[];\r\n        public routeVisibleJunctions: KnockoutObservableArray<RouteJunctionViewModel>;\r\n        public portionCompleted: KnockoutObservable<number>;\r\n        public startIndex: KnockoutObservable<number>;\r\n        public endIndex: KnockoutObservable<number>;\r\n        public height: KnockoutComputed<string>;\r\n        public distanceText: KnockoutComputed<string>;\r\n        public highwayNameText: KnockoutObservable<string>;\r\n        public maneuver: string;\r\n        public instructions: string;\r\n        public instructionsTip: string;\r\n\r\n        public applyFilter(filter: FilterViewModel): void {\r\n            this.layoutJunctions(filter);\r\n        }\r\n\r\n        private layoutJunctions(filter: FilterViewModel = null): void {\r\n            this.routeVisibleJunctions.removeAll();\r\n            var visibleJunctionIndex = 0;\r\n            for (var i = 0; i < this.routeJunctions.length; i++) {\r\n                var junction = this.routeJunctions[i];\r\n\r\n                if (filter) {\r\n                    junction.applyFilter(filter);\r\n                }\r\n\r\n                if (junction.visible()) {\r\n                    this.routeVisibleJunctions.push(junction);\r\n                    junction.top((RouteSegmentViewModel.SEGMENT_INITIAL_SPACE + visibleJunctionIndex\r\n                        * RouteSegmentViewModel.SPACE_FOR_JUNCTION).toString() + \"em\");\r\n                    visibleJunctionIndex++;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}","/// <reference path=\"../tsdef/jquery.d.ts\"/>\r\n/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\r\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\r\n/// <reference path=\"../Telemetry.ts\"/>\r\n\r\n/// <reference path=\"LocationViewModel.ts\"/>\r\n/// <reference path=\"RouteSegmentViewModel.ts\" />\r\n/// <reference path=\"FilterViewModel.ts\" />\r\n/// <reference path=\"RoutePlanViewModel.ts\" />\r\n\r\n\r\n\"use strict\";\r\n\r\nmodule StopByStop {\r\n    export class SideBarStopViewModel {\r\n        public stop: RouteStopViewModel;\r\n        public top: KnockoutObservable<string>;\r\n        public left: KnockoutObservable<string>;\r\n        public poiTypeClass: string;\r\n        public routePlan: RoutePlanViewModel;\r\n\r\n        constructor(stop: RouteStopViewModel, routePlan: RoutePlanViewModel) {\r\n            this.stop = stop;\r\n            this.routePlan = routePlan;\r\n            this.poiTypeClass = stop.stopPlace.type === PoiType.Food ? \"food\" : \"gas\";\r\n            this.top = ko.observable(\"\");\r\n            this.left = ko.observable(\"\");\r\n        }\r\n\r\n        public click(): void {\r\n            this.routePlan.showStopSettings(this.stop);\r\n        }\r\n    }\r\n\r\n    export class SideBarViewModel {\r\n        private _headerHeight: number = 0;\r\n        private _footerHeight: number = 0;\r\n        private _thumbHeight: number = 0;\r\n        private _scrollProcessingScheduled: boolean = false;\r\n        private _thumbPageY: number = null;\r\n        private _thumbTopAtDragStart = 0;\r\n        private _self: SideBarViewModel;\r\n        private _routePlanViewModel: RoutePlanViewModel;\r\n        private _portionOfRouteScrolled: number;\r\n        private _routeViewModel: RouteViewModel;\r\n        private _routeContentSelector = \".route-page .ui-content\";\r\n\r\n        private _sideBarInit = Utils.runOnce(() => {\r\n            $(\"#sidebar-thumb\").unbind();\r\n            $(this._routeContentSelector).unbind();\r\n\r\n            $(\"#sidebar-thumb\").bind(\"touchstart mousedown\", (e) => {\r\n                this.onTouchStart(e);\r\n            });\r\n\r\n            $(\"#sidebar-thumb\").bind(\"touchend mouseup\", (e) => {\r\n                this.onTouchEnd(e);\r\n            });\r\n\r\n            $(this._routeContentSelector).bind(\"mousemove\", (e) => {\r\n                this.onTouchMove(e, e.pageY);\r\n            });\r\n\r\n            $(this._routeContentSelector).bind(\"touchmove\", (e) => {\r\n                this.onTouchMove(e, e.originalEvent[\"touches\"][0].pageY);\r\n            });\r\n        });\r\n\r\n        private _sideBarFirstScrollInit = Utils.runOnce(this.sideBarFirstScrollInit.bind(this));\r\n        private static _recalcOnWindowResize;\r\n\r\n        public sideBarHeight: KnockoutObservable<number> = ko.observable(0);\r\n        public sideBarInnerHeight: KnockoutObservable<number> = ko.observable(0);\r\n        public sideBarInnerTop: KnockoutObservable<number> = ko.observable(0);\r\n        public sideBarPosition: KnockoutObservable<string> = ko.observable(\"absolute\");\r\n        public sideBarTop: KnockoutObservable<string> = ko.observable(\"40px\");\r\n        public sideBarBottom: KnockoutObservable<string> = ko.observable(\"\");\r\n        public sideBarThumbTop: KnockoutObservable<string> = ko.observable(\"0px\");\r\n        public isDraggingThumb: KnockoutObservable<boolean> = ko.observable(false);\r\n        public stops: KnockoutObservableArray<SideBarStopViewModel>;\r\n\r\n\r\n\r\n        constructor(routePlan: RoutePlanViewModel, routeViewModel: RouteViewModel, initSettings: IAppState) {\r\n            this.stops = ko.observableArray<SideBarStopViewModel>([]);\r\n            this._routePlanViewModel = routePlan;\r\n            this._routeViewModel = routeViewModel;\r\n\r\n\r\n            $(document).scroll(() => {\r\n\r\n                if (!this._scrollProcessingScheduled) {\r\n                    window.setTimeout(() => {\r\n                        this.onScroll();\r\n                        this._scrollProcessingScheduled = false;\r\n                    }, 20);\r\n                    this._scrollProcessingScheduled = true;\r\n                }\r\n\r\n            });\r\n\r\n            // in web app, run postInit, right away\r\n            // in Cordova app it will be called in postRender\r\n            if (initSettings.app === SBSApp.Web) {\r\n                this.postInit();\r\n            }\r\n        }\r\n\r\n        public postInit() {\r\n            this._sideBarInit();\r\n        }\r\n\r\n        private onTouchStart(eventObject: JQueryMouseEventObject) {\r\n            Telemetry.trackEvent(TelemetryEvent.SideBarThumbTouch);\r\n            this.isDraggingThumb(true);\r\n            this._thumbTopAtDragStart = parseInt(this.sideBarThumbTop());;\r\n            eventObject.preventDefault();\r\n        };\r\n\r\n        private onTouchEnd(eventObject: JQueryMouseEventObject): void {\r\n            if (this.isDraggingThumb()) {\r\n                this._thumbPageY = null;\r\n                this.isDraggingThumb(false);\r\n                var thumbTop = parseInt(this.sideBarThumbTop());\r\n                var pixelsScrolled = thumbTop - this._thumbTopAtDragStart;\r\n                var routePixelsScrolled = ($(\".route\").innerHeight() / (this.sideBarInnerHeight() - this._thumbHeight)) * pixelsScrolled;\r\n\r\n                window.scrollBy(0, routePixelsScrolled);\r\n                eventObject.preventDefault();\r\n            }\r\n        };\r\n\r\n        private onTouchMove(e: JQueryMouseEventObject, pageY: number): void {\r\n            if (this.isDraggingThumb()) {\r\n                if (this._thumbPageY) {\r\n                    var oldThumbTop = parseInt(this.sideBarThumbTop());\r\n                    var newThumbTop = oldThumbTop + (pageY - this._thumbPageY);\r\n                    newThumbTop = Math.max(0, newThumbTop);\r\n                    newThumbTop = Math.min(this.sideBarInnerHeight() - this._thumbHeight, newThumbTop);\r\n\r\n                    this.sideBarThumbTop(newThumbTop.toString() + \"px\");\r\n\r\n                }\r\n                this._thumbPageY = pageY;\r\n                e.preventDefault();\r\n\r\n            }\r\n        }\r\n\r\n        private onScroll(): void {\r\n            this._sideBarFirstScrollInit();\r\n            var documentScrollTop = $(document).scrollTop();\r\n            var routeOffsetTop = $(this._routeContentSelector).offset().top;\r\n\r\n            if (documentScrollTop > routeOffsetTop) {\r\n                this.sideBarPosition(\"fixed\");\r\n                // this.sideBarTop((this._headerHeight + 41).toString() + \"px\");\r\n\r\n                this.sideBarTop(\"\");\r\n                this.sideBarBottom((this._footerHeight).toString() + \"px\");\r\n\r\n                this._portionOfRouteScrolled = Math.min(1.0, (documentScrollTop - routeOffsetTop) /\r\n                    ($(\".route\").innerHeight() - $(window).height() - this._footerHeight));\r\n\r\n                this.recalcThumbPosition();\r\n\r\n            } else {\r\n                this.sideBarPosition(\"absolute\");\r\n                this.sideBarTop(\"40px\");\r\n                this.sideBarBottom(\"\");\r\n                this.sideBarThumbTop(\"0px\");\r\n            }\r\n        }\r\n\r\n        private recalcThumbPosition(): void {\r\n            this.sideBarThumbTop(((this.sideBarInnerHeight() - this._thumbHeight) * this._portionOfRouteScrolled).toString() + \"px\");\r\n        }\r\n\r\n        private sideBarFirstScrollInit(): void {\r\n            Telemetry.trackEvent(TelemetryEvent.RoutePageScroll);\r\n            SideBarViewModel.recalculateSideBarPosition(this);\r\n\r\n            // check if there's already a resize handle attached from the previous instance of SideBarViewModel\r\n            // if so, detach it\r\n            if (SideBarViewModel._recalcOnWindowResize) {\r\n                $(window).off(\"resize\", SideBarViewModel._recalcOnWindowResize);\r\n            }\r\n\r\n            SideBarViewModel._recalcOnWindowResize = SideBarViewModel.recalculateSideBarPosition.bind(this);\r\n            $(window).on(\"resize\", SideBarViewModel._recalcOnWindowResize);\r\n\r\n            this._routePlanViewModel.stops.subscribe(() => this.updateStopsOnSidebar());\r\n            this._routeViewModel.roadLineHeight.subscribe(() => this.updateStopsOnSidebar());\r\n        }\r\n\r\n\r\n\r\n        private updateStopsOnSidebar(): void {\r\n            this.stops.removeAll();\r\n\r\n            var sideBarStopItems = $.map(this._routePlanViewModel.stops(),\r\n                (elementOfArray: RouteStopViewModel, indexInArray: number) => new SideBarStopViewModel(elementOfArray, this._routePlanViewModel));\r\n\r\n            if (sideBarStopItems.length > 0 && Utils.hasAnyOwnProperties(this._routeViewModel.routeJunctionElementLookup)) {\r\n                // sort by distance to exit from route start. This is so that we can render exits belonging to the same exit\r\n                // next to each other\r\n                sideBarStopItems.sort((a, b) => a.stop.stopPlace.dtefrs - b.stop.stopPlace.dtefrs);\r\n\r\n                var currentExitId = \"\";\r\n                var currentIndexOnThisExit = 0;\r\n\r\n                for (var i = 0; i < sideBarStopItems.length; i++) {\r\n                    var sideBarStopViewModel = sideBarStopItems[i];\r\n                    var poiExitId = sideBarStopViewModel.stop.stopPlace.exitId;\r\n\r\n                    if (!this._routeViewModel.routeJunctionElementLookup[poiExitId]) {\r\n                        continue;\r\n                    }\r\n\r\n                    if (poiExitId === currentExitId) {\r\n                        currentIndexOnThisExit++;\r\n                    }\r\n                    else {\r\n                        currentIndexOnThisExit = 0;\r\n                        currentExitId = poiExitId;\r\n                    }\r\n\r\n                    /*\r\n                    routeDistance    sideBarInnerHeight\r\n                    -------------- = ---------------------  =>\r\n                    distanceToExit          x\r\n                          sideBarInnerHeight*distanceToExit\r\n                    x = --------------------------------------------\r\n                          routeDistance\r\n                    */\r\n\r\n\r\n                    /* available height is slightly smaller because we don't want POI to overlap with ETA time */\r\n                    /* this is to address Bug 126: Sidebar - location of chosen POIs on the sidebar */\r\n                    var sideBarAvailableHeight = this.sideBarInnerHeight() - 32;\r\n\r\n                    var distanceToExitInPixels =\r\n                        (sideBarAvailableHeight * this._routeViewModel.routeJunctionElementLookup[poiExitId].top /\r\n                            this._routeViewModel.roadLineHeight());\r\n\r\n                    /* this 5 is another magic constant - to help fix bug 128: Sidebar - POI on the side bar is covering the time at destination*/\r\n                    sideBarStopViewModel.top((distanceToExitInPixels + 5).toString() + \"px\");\r\n\r\n\r\n\r\n                    sideBarStopViewModel.left((-28 + currentIndexOnThisExit * 8).toString() + \"px\"); /* 28 is another magic constant */\r\n                    this.stops.push(sideBarStopViewModel);\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        private static recalculateSideBarPosition(sbvm: SideBarViewModel): void {\r\n            sbvm._headerHeight = $(\".ui-header\").outerHeight();\r\n            sbvm._footerHeight = $(\".ui-footer\").outerHeight();\r\n            sbvm._thumbHeight = $(\"#sidebar-thumb\").outerHeight();\r\n\r\n            var sidebarTopInfoHeight = $(\".sidebar-top\").outerHeight();\r\n            var sidebarBottomInfoHeight = $(\".sidebar-bottom\").outerHeight();\r\n\r\n            var windowHeight = window.innerHeight ? window.innerHeight : $(window).height();;\r\n            var sideBarHeightPixels = windowHeight - sbvm._headerHeight - sbvm._footerHeight;\r\n            var sideBarInnerHeightPixels = sideBarHeightPixels - sidebarBottomInfoHeight - sidebarTopInfoHeight;\r\n\r\n            sbvm.sideBarHeight(sideBarHeightPixels);\r\n            sbvm.sideBarInnerHeight(sideBarInnerHeightPixels);\r\n            sbvm.sideBarInnerTop(sidebarTopInfoHeight);\r\n            sbvm.recalcThumbPosition();\r\n            sbvm.updateStopsOnSidebar();\r\n        }\r\n    }\r\n}","/// <reference path=\"../tsdef/jquery.d.ts\"/>\r\n/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\r\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\r\n\r\n/// <reference path=\"LocationViewModel.ts\"/>\r\n/// <reference path=\"RouteSegmentViewModel.ts\" />\r\n/// <reference path=\"FilterViewModel.ts\" />\r\n/// <reference path=\"SideBarViewModel.ts\" />\r\n\r\n\"use strict\";\r\nmodule StopByStop {\r\n    export class RouteViewModel {\r\n        private _route: IRoute;\r\n        private _app: IAppViewModel;\r\n        private _routeStartTime: Date;\r\n        private _stopDurationSubscriptions: KnockoutSubscription[] = [];\r\n        private _routeInitializationComplete: () => void;\r\n        private _filter: FilterViewModel;\r\n        private _junctionElementCount: number = 0;\r\n        private _subscribedForBoundElement: boolean = false;\r\n\r\n        public routeJunctionElementLookup: { [id: string]: { top: number } } = {};\r\n        public roadLineHeight: KnockoutObservable<number> = ko.observable(0);\r\n\r\n\r\n        constructor(route: IRoute, app: IAppViewModel, filter: FilterViewModel, initSettings: IAppState, routeInitializationComplete: () => void) {\r\n            this._route = route;\r\n            this._app = app;\r\n            this._routeInitializationComplete = routeInitializationComplete;\r\n            this._filter = filter;\r\n\r\n\r\n            this.sideBar = new SideBarViewModel(app.routePlan, this, initSettings);\r\n            this.fromLocation = new LocationViewModel(this._route.fl);\r\n            this.toLocation = new LocationViewModel(this._route.tl);\r\n\r\n\r\n            this.currentLocation = ko.observable(new LocationViewModel(this._route.cl));\r\n            this._routeStartTime = new Date();\r\n\r\n            this.startTimeString = ko.observable(Utils.getTimeString(this._routeStartTime));\r\n            this.etaString = ko.observable(Utils.getTimeString(this._routeStartTime, this._route.t * 1000));\r\n            this.routeId = this._route.rid;\r\n            this.distance = this._route.d;\r\n            this.title = this.fromLocation.placeDescription + \" to \" + this.toLocation.placeDescription;\r\n\r\n            var exitCount = 0;\r\n            $.each(route.s, (i, v: IRouteSegment) => exitCount += v.j.length);\r\n\r\n            this.description =\r\n                \"Traveling by car from \"\r\n                + this.fromLocation.placeDescription.toString()\r\n                + \" to \"\r\n                + this.toLocation.placeDescription.toString()\r\n                + \" and looking for best place to stop for food or gas? This route is \"\r\n                + this.distance.toString()\r\n                + \" miles and has \"\r\n                + exitCount.toString()\r\n                + \" exits.Check this out. \";\r\n\r\n            this.shortDescription = \"Distance \" + this.distance.toString() + \". \" + exitCount.toString() + \" exits\";\r\n\r\n            this.routeSegments = ko.observableArray([]);\r\n\r\n            this.createSegmentFirstTime(0);\r\n\r\n            this.boundElement = ko.observable(null);\r\n\r\n\r\n            this.boundElement.subscribe((newElement: Element) => {\r\n                if (newElement && !this._subscribedForBoundElement) {\r\n                    this._subscribedForBoundElement = true;\r\n\r\n                    this.recalcRoadLine(newElement);\r\n\r\n                    Utils.observeDOM(newElement, () => {\r\n                        this.recalcRoadLine(newElement);\r\n                    });\r\n                }\r\n            });\r\n        }\r\n\r\n       \r\n\r\n        private recalcRoadLine(roadLineElement: Element): void {\r\n            var junctionElements = $(roadLineElement).find(\".junction-wrapper\");\r\n            var junctionCount = junctionElements.length;\r\n\r\n            if (junctionCount != this._junctionElementCount) {\r\n                this._junctionElementCount = junctionCount;\r\n\r\n                this.routeJunctionElementLookup = {};\r\n                junctionElements.each((index: number, elem: Element) => {\r\n                    this.routeJunctionElementLookup[elem.getAttribute(\"osmid\")] = { top: $(elem).offset().top - $(roadLineElement).offset().top };\r\n                });\r\n            }\r\n\r\n            this.roadLineHeight($(this.boundElement()).height());\r\n        }\r\n\r\n\r\n\r\n\r\n        public fromLocation: LocationViewModel;\r\n        public toLocation: LocationViewModel;\r\n        public currentLocation: KnockoutObservable<LocationViewModel>;\r\n        public routeSegments: KnockoutObservableArray<RouteSegmentViewModel>;\r\n        public routeId: string;\r\n        public title: string;\r\n        public description: string;\r\n        public shortDescription: string;\r\n        public distance: number;\r\n        public etaString: KnockoutObservable<string>;\r\n        public startTimeString: KnockoutObservable<string>;\r\n\r\n        public sideBar: SideBarViewModel;\r\n        public routeHeightPx: KnockoutObservable<number> = ko.observable(0);\r\n        public boundElement: KnockoutObservable<Element> = ko.observable(null);\r\n\r\n        public applyFilter(filter: FilterViewModel): void {\r\n            $.each(this.routeSegments(), (indexInArray: number, valueOfElement: RouteSegmentViewModel) => valueOfElement.applyFilter(filter));\r\n        }\r\n\r\n        private createSegmentFirstTime(segmentIndex: number) {\r\n\r\n            var segmentViewModel = new RouteSegmentViewModel(this._route.s[segmentIndex], this._routeStartTime, this._app);\r\n            segmentViewModel.applyFilter(this._filter);\r\n            this.routeSegments.push(segmentViewModel);\r\n\r\n\r\n            segmentIndex++;\r\n\r\n            if (this._route.s.length > segmentIndex) {\r\n                window.setTimeout(() => this.createSegmentFirstTime(segmentIndex), 100);\r\n            }\r\n            else {\r\n                this._routeInitializationComplete();\r\n                this.initializeEtaTimes();\r\n            }\r\n        }\r\n\r\n        private initializeEtaTimes(): void {\r\n            this.updateEtaTimes();\r\n            this.updateStopDurationChangeSubscriptions();\r\n\r\n            this._app.routePlan.stops.subscribe(() => {\r\n                this.updateEtaTimes();\r\n                this.updateStopDurationChangeSubscriptions();\r\n\r\n            });\r\n        }\r\n\r\n\r\n\r\n        private updateStopDurationChangeSubscriptions(): void {\r\n            $.each(this._stopDurationSubscriptions, (i, s: KnockoutSubscription) => {\r\n                s.dispose();\r\n            });\r\n\r\n            $.each(this._app.routePlan.stops(), (i, stop: RouteStopViewModel) => {\r\n                this._stopDurationSubscriptions.push(stop.stopDuration.subscribe(() => this.updateEtaTimes()));\r\n            });\r\n        }\r\n\r\n        private updateEtaTimes(): void {\r\n            var t = this._routeStartTime;\r\n            var totalDelaysSoFarInMs = 0;\r\n            for (var i = 0; i < this.routeSegments().length; i++) {\r\n                for (var k = 0; k < this.routeSegments()[i].routeJunctions.length; k++) {\r\n                    var routeJunction = this.routeSegments()[i].routeJunctions[k];\r\n                    routeJunction.eta(new Date(routeJunction.etaWithoutStops.getTime() + totalDelaysSoFarInMs));\r\n                    var delaysForThisJunctionMs = 0;\r\n\r\n                    for (var l = 0; l < routeJunction.stops().length; l++) {\r\n                        var stop = routeJunction.stops()[l];\r\n                        delaysForThisJunctionMs += (stop.detourDuration() * 1000);\r\n                        stop.exitEta(routeJunction.eta());\r\n                    }\r\n\r\n                    totalDelaysSoFarInMs += delaysForThisJunctionMs;\r\n                }\r\n            }\r\n\r\n            this.etaString(Utils.getTimeString(this._routeStartTime, this._route.t * 1000 + totalDelaysSoFarInMs));\r\n        }\r\n    }\r\n}","/// <reference path=\"../tsdef/jquery.d.ts\"/>\r\n/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\r\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\r\n/// <reference path=\"RouteViewModel.ts\"/>\r\n/// <reference path=\"FilterViewModel.ts\"/>\r\n/// <reference path=\"IAppViewModel.ts\"/>\r\n\r\n\"use strict\";\r\nmodule StopByStop {\r\n    export class AppViewModel implements IAppViewModel {\r\n\r\n   \r\n        private _route: IRoute;\r\n\r\n        constructor(route: IRoute, initSettings: IAppState = null) {\r\n            if (route) {\r\n                this._route = route;\r\n                var rjs: IRouteJunction[] = [];\r\n\r\n                $.each(route.s, (i, v: IRouteSegment) => rjs.push(...v.j));\r\n\r\n                this.filter = new FilterViewModel(route.rid, rjs, route.fcat, route.tfcat);\r\n                this.routePlan = new RoutePlanViewModel(this._route.rid, this._route.d, new LocationViewModel(route.tl));\r\n\r\n                this.route = new RouteViewModel(this._route, this, this.filter, initSettings, () => {\r\n                    this.routePlan.loadStopsFromStorage();\r\n                });\r\n\r\n\r\n                ko.computed(() => ko.toJS(this.filter)).subscribe(() => {\r\n                    this.route.applyFilter(this.filter);\r\n                });\r\n            }\r\n\r\n        }\r\n\r\n        public route: RouteViewModel = null;\r\n\r\n        // initialize filter to an empty object, so that it doesn't require IFs which would require delayed jqm initialization\r\n        public filter: FilterViewModel = <FilterViewModel>{};\r\n        public routePlan: RoutePlanViewModel;\r\n        public selectedJunction: KnockoutObservable<JunctionAppBaseViewModel> = ko.observable(null);\r\n\r\n        public initSideBar(): void {\r\n            if (this.route && this.route.sideBar) {\r\n                this.route.sideBar.postInit();\r\n            }\r\n        }\r\n    }\r\n}","\"use strict\";\r\n\r\ninterface String {\r\n    f(...args: string[]);\r\n}\r\n\r\nString.prototype.f = function (...args) {\r\n    var s = this,\r\n        i = args.length;\r\n\r\n    while (i--) {\r\n        s = s.replace(new RegExp('\\\\{' + i + '\\\\}', 'gm'), args[i]);\r\n    }\r\n    return s;\r\n};","/// <reference path=\"../tsdef/jquery.d.ts\"/>\r\n/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\r\n/// <reference path=\"../tsdef/google.maps.d.ts\"/>\r\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\r\n/// <reference path=\"JunctionViewModel.ts\"/>\r\n\r\n\"use strict\";\r\nmodule StopByStop {\r\n    export class JunctionMapViewModel {\r\n        private mapDiv: Element;\r\n        private mapContainerDiv: Element;\r\n        private junction: RouteJunctionViewModel;\r\n        private poiInfoWindow: google.maps.InfoWindow;\r\n        private map: google.maps.Map;\r\n        private urls: IInitUrls;\r\n\r\n        constructor(mapDiv: Element, mapContainerDiv: Element, junction: RouteJunctionViewModel, urls: IInitUrls) {\r\n\r\n            this.junction = junction;\r\n            this.mapDiv = mapDiv;\r\n            this.mapContainerDiv = mapContainerDiv;\r\n            this.urls = urls;\r\n\r\n            if (this.mapDiv && this.mapContainerDiv) {\r\n                window.setTimeout(() => {\r\n                    $(this.mapDiv).css({ 'height': $(this.mapDiv).width() + 'px' });\r\n\r\n                    this.onMapReady();\r\n\r\n                    window.setTimeout(() => {\r\n                        $(this.mapContainerDiv).hide();\r\n                    }, 500);\r\n                }, 300);\r\n            }\r\n\r\n        }\r\n\r\n        private onMapReady(): void {\r\n            var junctionPoint = new google.maps.LatLng(this.junction.junction.location.lat, this.junction.junction.location.lon);\r\n            this.map = new google.maps.Map(this.mapDiv,\r\n                {\r\n                    zoom: 14,\r\n                    center: junctionPoint,\r\n                    disableDefaultUI: false\r\n                });\r\n\r\n            var junctionMarker = new google.maps.Marker({\r\n                position: junctionPoint,\r\n                map: this.map,\r\n                icon: this.urls.MapExitIconUrl\r\n            });\r\n\r\n            window[\"map\"] = this.map;\r\n            this.createPois();\r\n        };\r\n\r\n        private createPois(): void {\r\n\r\n            var pois = this.junction.junction.pois();\r\n\r\n\r\n            $.each(pois, (indexInArray: any, valueOfElement: any) => {\r\n                var poi = <PoiOnJunctionViewModel>valueOfElement;\r\n                var poiPoint = new google.maps.LatLng(poi.poi.location.lat, poi.poi.location.lon);\r\n\r\n                var poiMarker = new google.maps.Marker(\r\n                    {\r\n                        position: poiPoint,\r\n                        icon: poi.poi.poiType === PoiType.Food ? this.urls.MapFoodIconUrl : this.urls.MapGasIconUrl,\r\n                        map: this.map\r\n                    });\r\n\r\n                poiMarker.setVisible(poi.poi.visible());\r\n\r\n\r\n                poiMarker.addListener('click', () => {\r\n                    if (this.poiInfoWindow) {\r\n                        this.poiInfoWindow.close();\r\n                    }\r\n\r\n                    ko.cleanNode($(\"#poiPopupTemplate\")[0]);\r\n                    ko.applyBindings(poi, $(\"#poiPopupTemplate\")[0]);\r\n\r\n\r\n                    if (!poiMarker[\"iw\"]) {\r\n                        var gmapsInfoWindow = new google.maps.InfoWindow({\r\n                            content: $(\"#poiPopupTemplate\").html()\r\n                        });\r\n                        poiMarker[\"iw\"] = gmapsInfoWindow;\r\n\r\n\r\n                        poi.poi.isYInfoLoading.subscribe(() => {\r\n                            ko.cleanNode($(\"#poiPopupTemplate\")[0]);\r\n                            ko.applyBindings(poi, $(\"#poiPopupTemplate\")[0]);\r\n                            gmapsInfoWindow.setContent($(\"#poiPopupTemplate\").html());\r\n                        });\r\n                    }\r\n\r\n                    this.poiInfoWindow = (<google.maps.InfoWindow>poiMarker[\"iw\"]);\r\n                    (<any>window).showPoiOptionsForMapPopup = () => {\r\n                        poi.addToRouteOptionsClick();\r\n                    };\r\n                    this.poiInfoWindow.open(this.map, poiMarker);\r\n\r\n                });\r\n                poi.poi.visible.subscribe((newValue) => {\r\n                    poiMarker.setVisible(newValue);\r\n                    if (!newValue && poiMarker[\"iw\"]) {\r\n                        (<google.maps.InfoWindow>poiMarker[\"iw\"]).close();\r\n                    }\r\n                });\r\n            });\r\n        };\r\n    }\r\n}","/// <reference path=\"../tsdef/jquery.d.ts\"/>\r\n/// <reference path=\"../tsdef/knockout-3.3.d.ts\"/>\r\n/// <reference path=\"../tsdef/google.maps.d.ts\"/>\r\n/// <reference path=\"../extensions.ts\"/>\r\n/// <reference path=\"../stopbystop-interfaces.ts\"/>\r\n/// <reference path=\"../Init.ts\"/>\r\n/// <reference path=\"RouteViewModel.ts\"/>\r\n/// <reference path=\"JunctionMapViewModel.ts\"/>\r\n/// <reference path=\"IAppViewModel.ts\"/>\r\n\r\n\"use strict\";\r\nmodule StopByStop {\r\n\r\n    export abstract class JunctionAppBaseViewModel implements IAppViewModel {\r\n        protected _poiLocations: LocationViewModel[];\r\n        protected _locationToLoadIndex: number = 0;\r\n\r\n        public filter: FilterViewModel;\r\n        public routePlan: RoutePlanViewModel;\r\n        public routeJunction: RouteJunctionViewModel;\r\n        public junctionMapViewModel: JunctionMapViewModel;\r\n\r\n        protected loadFullPoiData() {\r\n            if (this._locationToLoadIndex < this._poiLocations.length) {\r\n                var locationToLoad = this._poiLocations[this._locationToLoadIndex++];\r\n\r\n                var latStr = locationToLoad.lat.toFixed(1);\r\n                var lonStr = locationToLoad.lon.toFixed(1);\r\n\r\n                $.ajax(AppState.current.urls.PoiUrl + latStr + \",\" + lonStr)\r\n                    .done((data: IPoi[]) => {\r\n\r\n                        for (var i = 0; i < data.length; i++) {\r\n                            var p = data[i];\r\n                            if (this.routeJunction.junction.poiLookup[p.id]) {\r\n                                this.routeJunction.junction.poiLookup[p.id].poi.updateYInfo(p);\r\n                            }\r\n                        }\r\n\r\n                        this.loadFullPoiData();\r\n                    });\r\n            }\r\n        }\r\n\r\n    };\r\n\r\n    export class JunctionSPAAppViewModel extends JunctionAppBaseViewModel {\r\n        constructor(\r\n            routeJunctionViewModel: RouteJunctionViewModel,\r\n            filter: FilterViewModel,\r\n            routePlan: RoutePlanViewModel,\r\n            poiTypeToShow: PoiType = PoiType.General\r\n        ) {\r\n            super();\r\n            this.filter = filter;\r\n            this.routePlan = routePlan;\r\n            this.routeJunction = routeJunctionViewModel;\r\n\r\n            \r\n            var junctionLocationViewModel = this.routeJunction.junction.location;\r\n\r\n            this._poiLocations = LocationViewModel.getGridLocations({\r\n                a: junctionLocationViewModel.lat,\r\n                o: junctionLocationViewModel.lon\r\n            });\r\n\r\n            if (poiTypeToShow === PoiType.Food) {\r\n                this.filter.showGasStations(false);\r\n            } else if (poiTypeToShow === PoiType.Gas) {\r\n                this.filter.showRestaurants(false);\r\n            }\r\n\r\n            this.loadFullPoiData();\r\n            \r\n        };\r\n\r\n        public initMap(mapDiv: Element, mapContainerDiv: Element) {\r\n            this.junctionMapViewModel = new JunctionMapViewModel(mapDiv, mapContainerDiv, this.routeJunction, AppState.current.urls);\r\n        }\r\n    }\r\n\r\n    export class JunctionAppViewModel extends JunctionAppBaseViewModel {\r\n        private _routeJunction: IRouteJunction;\r\n        \r\n\r\n        constructor(\r\n            routeJunction: IRouteJunction,\r\n            poiTypeToShow: PoiType,\r\n            routeId: string,\r\n            mapDiv: Element,\r\n            mapContainerDiv: Element) {\r\n\r\n            super();\r\n\r\n            var routeStartTime = new Date();\r\n            this._routeJunction = routeJunction;\r\n\r\n            this.routePlan = new RoutePlanViewModel(\r\n                routeId,\r\n                0, /* not needed here */\r\n                null);\r\n\r\n            this.routePlan.loadStopsFromStorage();\r\n            this.filter = new FilterViewModel(routeId, [routeJunction], routeJunction.j.fcat, routeJunction.j.tfcat, false);\r\n\r\n            this.filter.showRestaurants(true);\r\n            this.filter.showGasStations(true);\r\n\r\n            if (poiTypeToShow === PoiType.Food) {\r\n                this.filter.showGasStations(false);\r\n            } else if (poiTypeToShow === PoiType.Gas) {\r\n                this.filter.showRestaurants(false);\r\n            }\r\n\r\n            this.routeJunction = new RouteJunctionViewModel(this._routeJunction, routeStartTime, this);\r\n            this.routeJunction.applyFilter(this.filter);\r\n\r\n            ko.computed(() => ko.toJS(this.filter)).subscribe(() => {\r\n                this.routeJunction.applyFilter(this.filter);\r\n            });\r\n\r\n            this.junctionMapViewModel = new JunctionMapViewModel(mapDiv, mapContainerDiv, this.routeJunction, AppState.current.urls);\r\n            this._poiLocations = LocationViewModel.getGridLocations(routeJunction.j.l);\r\n            this.loadFullPoiData();\r\n        }\r\n    }\r\n}","/// <reference path=\"tsdef/jquery.d.ts\"/>\r\n/// <reference path=\"tsdef/jquerymobile.d.ts\"/>\r\n/// <reference path=\"tsdef/knockout-3.3.d.ts\"/>\r\n/// <reference path=\"AppState.ts\" />\r\n/// <reference path=\"Telemetry.ts\"/>\r\n/// <reference path=\"Utils.ts\"/>\r\n/// <reference path=\"stopbystop-interfaces.ts\"/>\r\n/// <reference path=\"InitUrls.ts\"/>\r\n/// <reference path=\"ViewModels/IAppViewModel.ts\" />\r\n/// <reference path=\"ViewModels/AppViewModel.ts\" />\r\n/// <reference path=\"ViewModels/RouteViewModel.ts\" />\r\n/// <reference path=\"ViewModels/JunctionAppViewModel.ts\" />\r\n\r\n\r\nmodule StopByStop {\r\n\r\n    export class Init {\r\n        private static _app: KnockoutObservable<AppViewModel>;\r\n        private static _currentRouteId: string;\r\n        private static _initDone: boolean = false;\r\n\r\n        public static initialize(settings: IAppState): void {\r\n            AppState.current = settings;\r\n            AppState.current.urls = new InitUrls(settings.baseDataUrl, settings.baseImageUrl);\r\n            Init._app = ko.observable<AppViewModel>(new AppViewModel(null));\r\n\r\n            (<any>ko).options.deferUpdates = true;\r\n            Init.enableUAMatch();\r\n\r\n            /* common initialization for all pages */\r\n            $(document).on(\"pageinit\", \".jqm-demos\", (event) => {\r\n                var page = $(this);\r\n\r\n                if (AppState.current.app === SBSApp.SPA) {\r\n                    Init.initSPA();\r\n                }\r\n\r\n\r\n                /* For Web app initialize menu programmatically*/\r\n                if (AppState.current.app === SBSApp.Web) {\r\n                    $(\".jqm-navmenu-panel ul\").listview();\r\n                    $(\".jqm-navmenu-link\").on(\"click\", () => {\r\n                        (<any>page.find(\".jqm-navmenu-panel:not(.jqm-panel-page-nav)\")).panel().panel(\"open\");\r\n                    });\r\n                }\r\n\r\n                // Initialize breadcrumb on applicable pages\r\n                jQuery(document).ready(() => {\r\n                    (<any>jQuery(\"#breadCrumb0\")).jBreadCrumb();\r\n                })\r\n\r\n                // wire up click on the social button\r\n                $(\".social-btn\").click(() => {\r\n                    Telemetry.trackEvent(TelemetryEvent.SocialButtonClick);\r\n                });\r\n\r\n                $(\".filter-btn\").click(() => {\r\n                    Telemetry.trackEvent(TelemetryEvent.FilterButtonClick);\r\n                });\r\n\r\n            });\r\n            /* end of common initialiazation for all pages */\r\n\r\n            /* home page initialization */\r\n            $(document).on(\"pageinit\", \".sbs-homePG\", function (event) {\r\n                var currentLocationString = \"Current location\";\r\n                // populate from with 'current location'\r\n                var currentLocationData = null;\r\n                var setCurrentLocation = function () {\r\n                    if (navigator && navigator.geolocation) {\r\n                        navigator.geolocation.getCurrentPosition(\r\n                            (position: Position) => {\r\n                                var srcLat = position.coords.latitude;\r\n                                var srcLon = position.coords.longitude;\r\n\r\n                                if (srcLat > S_LAT_BOUNDARY && srcLat < N_LAT_BOUNDARY && srcLon > W_LON_BOUNDARY && srcLon < E_LON_BOUNDARY) {\r\n                                    currentLocationData = { n: currentLocationString, i: srcLat.toFixed(5) + \",\" + srcLon.toFixed(5) };\r\n\r\n                                    $(\"#from\").val(currentLocationString);\r\n                                    $(\"#from\").data({ place: currentLocationData });\r\n\r\n                                    Telemetry.trackEvent(TelemetryEvent.LocationIN);\r\n                                }\r\n                                else {\r\n                                    Telemetry.trackEvent(TelemetryEvent.LocationOUT);\r\n                                }\r\n                            },\r\n                            (positionError: PositionError) => {\r\n                                var positionErrorReason = \"UNAVAILABLE\";\r\n                                switch (positionError.code) {\r\n                                    case positionError.PERMISSION_DENIED:\r\n                                        positionErrorReason = \"PERMISSION_DENIED\";\r\n                                        break;\r\n                                    case positionError.POSITION_UNAVAILABLE:\r\n                                        positionErrorReason = \"POSITION_UNAVAILABLE\";\r\n                                        break;\r\n                                    case positionError.TIMEOUT:\r\n                                        positionErrorReason = \"TIMEOUT\";\r\n                                        break;\r\n                                }\r\n\r\n                                Telemetry.trackError(new Error(\"getCurrentPositionErrorHomePage-\" + positionErrorReason));\r\n                            },\r\n                            {\r\n                                maximumAge: 60000,\r\n                                timeout: 5000,\r\n                                enableHighAccuracy: true,\r\n                            }\r\n                        );\r\n                    }\r\n                };\r\n                setCurrentLocation();\r\n\r\n                $(\".input-wrapper input\").on(\"keyup\", function (e, data) {\r\n                    var $wrapper = $(this).closest('.input-wrapper');\r\n                    var that = this;\r\n                    var $ul = $wrapper.find('ul'),\r\n                        $input = $(this),\r\n                        value = $input.val();\r\n                    //html = \"\";\r\n                    //$ul.html(\"\");\r\n                    if (value) {\r\n                        //$.mobile.loading('show');\r\n                        $wrapper.append(\"<div class='ui-loader'><span class='ui-icon ui-icon-loading'></span></div>\");\r\n                        //$ul.listview(\"refresh\");\r\n\r\n\r\n                        $.ajax({\r\n                            url: AppState.current.urls.PlacesUrl + value,\r\n                            dataType: 'json',\r\n                            method: 'GET',\r\n                            success: function (data) {\r\n                                $wrapper.find('.ui-loader').remove();\r\n                                //$.mobile.loading('hide');\r\n                                $ul.empty();\r\n                                var otherDropDown = $(that).attr('id') === 'from' ? $('#to') : $('#from');\r\n                                var otherDropDownSelectedID = null;\r\n                                if (otherDropDown.data('place')) {\r\n                                    otherDropDownSelectedID = otherDropDown.data('place').i;\r\n                                }\r\n\r\n                                if ($(that).attr('id') === 'from' && currentLocationData) {\r\n                                    var $li = $('<li data-icon=\"false\"><a href=\"#\">' + currentLocationString + '</a></li>');\r\n                                    $li.data('place', currentLocationData);\r\n                                    $ul.append($li);\r\n                                }\r\n\r\n                                for (var i = 0; i < data.length; i++) {\r\n                                    if (data[i].i !== otherDropDownSelectedID) {\r\n                                        var $li = $('<li data-icon=\"false\"><a href=\"#\">' + data[i].n + '</a></li>');\r\n                                        $li.data('place', data[i]);\r\n                                        $ul.append($li);\r\n                                    }\r\n                                }\r\n                                $ul.listview(\"refresh\");\r\n                                $ul.trigger(\"updatelayout\");\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n\r\n                $(\".autocomplete\").on('click', 'li', function (event) {\r\n\r\n                    var $input = $(this).closest('div').find('input');\r\n                    var place = $(this).data('place');\r\n                    if (place) {\r\n                        $input.val(place.n).data('place', place);\r\n                        $(this).closest('ul').empty();\r\n\r\n                        if ($(\"#from\").data('place') && $(\"#to\").data('place')) {\r\n                            $(\"#view_trip\").removeClass(\"ui-disabled\");\r\n                        }\r\n                    }\r\n\r\n                    Telemetry.trackEvent(TelemetryEvent.CityDropdownClick);\r\n                });\r\n\r\n                $('.input-wrapper input').on('focus', function (event) {\r\n\r\n                    var that = $(this);\r\n                    window.setTimeout(function () {\r\n                        that.select();\r\n                    }, 100);\r\n\r\n                    var $wrapper = $(this).closest('.input-wrapper');\r\n                    $wrapper.find('ul').show();\r\n                    $wrapper.find('.input-tip').hide();\r\n                });\r\n\r\n                $('.view-trip').on('click', function (event) {\r\n                    Telemetry.trackEvent(TelemetryEvent.ViewTripButtonClick, null, null, true);\r\n\r\n\r\n                    var $from = $('#from');\r\n                    var $to = $('#to');\r\n                    var startlocation = $from.data('place');\r\n                    var endlocation = $to.data('place');\r\n                    if (startlocation != undefined && endlocation != undefined) {\r\n                        if (AppState.current.app === SBSApp.Web) {\r\n                            var url = AppState.current.urls.RouteUrl + startlocation.i + '-to-' + endlocation.i;\r\n                            $(\"#view_trip\").addClass(\"ui-disabled\");\r\n                            /* navigate without using AJAX navigation */\r\n                            window.location.assign(url);\r\n                        } else {\r\n                            Utils.spaPageNavigate(SBSPage.route, startlocation.i + '-to-' + endlocation.i);\r\n                        }\r\n                    }\r\n                });\r\n\r\n                if ($(\"#from\").data('place') && $(\"#to\").data('place')) {\r\n                    $(\"#view_trip\").removeClass(\"ui-disabled\");\r\n                }\r\n            });\r\n            /* end of home page initialization */\r\n\r\n\r\n            /* route page initialization */\r\n            $(document).on(\"pageinit\", \".route-page\", function (event) {\r\n\r\n\r\n            });\r\n            /* end of route page initialization */\r\n\r\n            /* exit page initialization */\r\n            $(document).on(\"pageinit\", \".exit-page\", function (event) {\r\n                Init.wireupPOIGroup();\r\n            });\r\n            /* end of exit page initialization */\r\n\r\n            /* poi group page initialization */\r\n            $(document).on(\"pageinit\", \".poigroup-page\", function (event) {\r\n                Init.wireupPOIGroup();\r\n                var poiGroupInitialized = false;\r\n                $(document).scroll(function () {\r\n                    if (!poiGroupInitialized) {\r\n                        poiGroupInitialized = true;\r\n                        Telemetry.trackEvent(TelemetryEvent.POIGroupPageScroll);\r\n                    }\r\n                });\r\n            });\r\n            /* end of poi group page initialization */\r\n        }\r\n\r\n        private static loadRoute(routeId: string): JQueryPromise<any> {\r\n            return $.ajax({\r\n                url: AppState.current.urls.RouteDataUrl + routeId,\r\n                dataType: 'json',\r\n                method: 'GET',\r\n                success: function (data) {\r\n                    var route = <IRoute>data;\r\n                    var app = new AppViewModel(route, AppState.current);\r\n                    Init._app(app);\r\n\r\n                }\r\n            });\r\n        }\r\n\r\n        private static completeExitPageInit(): void {\r\n            var selectedRouteJunction = Init._app().routePlan.junctionMap[AppState.current.navigationLocation.exitId];\r\n            var poiType = AppState.current.navigationLocation.poiType;\r\n\r\n            var appViewModel = Init._app();\r\n\r\n            var junctionAppViewModel = new JunctionSPAAppViewModel(\r\n                selectedRouteJunction,\r\n                appViewModel.filter,\r\n                appViewModel.routePlan,\r\n                poiType);\r\n\r\n            appViewModel.selectedJunction(junctionAppViewModel);\r\n        }\r\n\r\n        private static initSPA(): void {\r\n\r\n            if (!Init._initDone) {\r\n                /* apply root bindings for Cordova app */\r\n                var sbsRootNode = $(\"#sbsRoot\")[0];\r\n                ko.applyBindings(Init._app, sbsRootNode);\r\n\r\n                /* initialize UI */\r\n                $(\".filter-btn\").click(() => Init.openFilterPopup());\r\n\r\n                Init._initDone = true;\r\n            }\r\n\r\n            var pageBeforeShowTime: number;\r\n\r\n            $.mobile.pageContainer.pagecontainer({\r\n\r\n                beforeshow: function (event, ui) {\r\n                    pageBeforeShowTime = new Date().getTime();\r\n                    var pageIdSelector: string = \"#\" + ui.toPage.attr(\"id\");\r\n\r\n                    AppState.current.pageInfo = {\r\n                        pageName: ui.toPage.data(\"page-name\"),\r\n                        telemetryPageName: ui.toPage.data(\"telemetry-page-name\"),\r\n                    };\r\n\r\n                    (<any>$(\"#sbsheader\")\r\n                        .prependTo(pageIdSelector))\r\n                        .toolbar({ position: \"fixed\" });\r\n\r\n                    (<any>$(\"#menupanel\")\r\n                        .appendTo(pageIdSelector))\r\n                        .panel();\r\n\r\n                    $(\"#menupanel-list\").listview();\r\n                    $(\"#menupanel-list>li a\").removeClass(\"ui-btn-active\");\r\n\r\n                    (<any>$(\"#sbsfooter\")\r\n                        .appendTo(pageIdSelector))\r\n                        .toolbar({ position: \"fixed\" });\r\n\r\n                    (<any>$.mobile).resetActivePageHeight();\r\n\r\n                    <any>$(pageIdSelector).css(\r\n                        {\r\n                            paddingTop: \"51px\",\r\n                            paddingBottom: \"50px\"\r\n                        });\r\n\r\n\r\n                    var sbsNavigationLocation = Utils.parseUrlForNavigationLocation(location.hash);\r\n                    AppState.current.navigationLocation = sbsNavigationLocation;\r\n\r\n                    switch (AppState.current.navigationLocation.page) {\r\n                        case SBSPage.route:\r\n                        case SBSPage.exit:\r\n                            if (Init._currentRouteId !== AppState.current.navigationLocation.routeId) {\r\n                                Init._currentRouteId = AppState.current.navigationLocation.routeId;\r\n                                Init.loadRoute(AppState.current.navigationLocation.routeId).done(() => {\r\n                                    if (AppState.current.navigationLocation.page === SBSPage.exit) {\r\n                                        Init.completeExitPageInit();\r\n                                    }\r\n                                });\r\n                            } else {\r\n                                if (AppState.current.navigationLocation.page === SBSPage.exit) {\r\n                                    Init.completeExitPageInit();\r\n                                }\r\n                            }\r\n                            break;\r\n                    }\r\n\r\n                },\r\n                show: function (event, ui) {\r\n\r\n                    // this is a hack. But I am not sure why this class is added despite the fact that\r\n                    // sbsheader is added with {position:fixed}\r\n                    $(\"#sbsheader\").removeClass(\"ui-fixed-hidden\");\r\n\r\n                    switch (AppState.current.pageInfo.pageName) {\r\n                        case \"exit-page\":\r\n                            $(\".filter-btn\").show();\r\n\r\n                            // to ensure the switch between map and list view is initialized\r\n                            $(\"#exit\").trigger(\"create\");\r\n\r\n                            Init.wireupPOIGroup();\r\n                            Init.initJunctionMap(<JunctionSPAAppViewModel>Init._app().selectedJunction());\r\n                            break;\r\n                        case \"route-page\":\r\n                            $(\".filter-btn\").show();\r\n                            break;\r\n                        default:\r\n                            $(\".filter-btn\").hide();\r\n                            break;\r\n                    }\r\n\r\n                    Telemetry.trackPageView(\r\n                        AppState.current.pageInfo.telemetryPageName,\r\n                        \"#\" + AppState.current.pageInfo.pageName,\r\n                        (new Date()).getTime() - pageBeforeShowTime);\r\n                }\r\n            });\r\n        }\r\n\r\n        private static initJunctionMap(junctionAppViewModel: JunctionSPAAppViewModel) {\r\n            var mapElement = $(\"#map\")[0];\r\n            var mapContainerElement = $(\".poi-map\")[0];\r\n            if (mapElement && mapContainerElement) {\r\n                junctionAppViewModel.initMap(mapElement, mapContainerElement);\r\n            } else {\r\n                window.setTimeout(() => Init.initJunctionMap(junctionAppViewModel), 200);\r\n            }\r\n        }\r\n\r\n        private static wireupPOIGroup(): void {\r\n            $(\".view-mode-switch\").on(\"change\", function () {\r\n                var modeVal = $(\".view-mode-switch :radio:checked\").val();\r\n                if (modeVal === \"list\") {\r\n                    $(\".poi-table\").show();\r\n                    $(\".poi-map\").hide();\r\n                    Telemetry.trackEvent(TelemetryEvent.POIGroupSwitchList);\r\n                }\r\n                else {\r\n                    $(\".poi-table\").hide();\r\n                    $(\".poi-map\").show();\r\n                    //TODO: refactor this to not expose map object globally\r\n                    window[\"map\"].setZoom(13);\r\n                    Telemetry.trackEvent(TelemetryEvent.POIGroupSwitchMap);\r\n                }\r\n            });\r\n\r\n            $(\".yelp-btn\").on(\"click\", function () {\r\n                Telemetry.trackEvent(TelemetryEvent.YelpLinkClick, null, null, true);\r\n            });\r\n\r\n            $(\".tel-btn\").on(\"click\", function () {\r\n                Telemetry.trackEvent(TelemetryEvent.TelLinkClick);\r\n            });\r\n        };\r\n\r\n        private static enableUAMatch(): void {\r\n\r\n            /* UA MATCH */\r\n            var matched, browser;\r\n            jQuery[\"uaMatch\"] = function (ua) {\r\n                ua = ua.toLowerCase();\r\n\r\n                var match = /(chrome)[ \\/]([\\w.]+)/.exec(ua) ||\r\n                    /(webkit)[ \\/]([\\w.]+)/.exec(ua) ||\r\n                    /(opera)(?:.*version|)[ \\/]([\\w.]+)/.exec(ua) ||\r\n                    /(msie) ([\\w.]+)/.exec(ua) ||\r\n                    ua.indexOf(\"compatible\") < 0 && /(mozilla)(?:.*? rv:([\\w.]+)|)/.exec(ua) ||\r\n                    [];\r\n\r\n                return {\r\n                    browser: match[1] || \"\",\r\n                    version: match[2] || \"0\"\r\n                };\r\n            };\r\n\r\n            matched = jQuery[\"uaMatch\"](navigator.userAgent);\r\n            browser = {};\r\n\r\n            if (matched.browser) {\r\n                browser[matched.browser] = true;\r\n                browser.version = matched.version;\r\n            }\r\n\r\n            // Chrome is Webkit, but Webkit is also Safari.\r\n            if (browser.chrome) {\r\n                browser.webkit = true;\r\n            } else if (browser.webkit) {\r\n                browser.safari = true;\r\n            }\r\n\r\n            jQuery[\"browser\"] = browser;\r\n\r\n            /* END OF UA_MATCH */\r\n        }\r\n\r\n        public static openFilterPopup(): void {\r\n            var fd = $(\".\" + AppState.current.pageInfo.pageName + \" .filter-dlg\")\r\n            if (fd.length > 0) {\r\n                fd.popup();\r\n                fd.trigger(\"create\");\r\n                fd.popup(\"open\", {\r\n                    positionTo: \"origin\",\r\n                    transition: \"slidedown\"\r\n                });\r\n            }\r\n        }\r\n    }\r\n}","/// <reference path=\"../../../src/client/scripts/tsdef/qunit.d.ts\"/>\r\n/// <reference path=\"../../../src/client/scripts/tsdef/jquery.d.ts\"/>\r\n/// <reference path=\"../../../src/client/scripts/tsdef/knockout-3.3.d.ts\"/>\r\n/// <reference path=\"../../../src/client/scripts/tsdef/google.maps.d.ts\"/>\r\n\r\n/// <reference path=\"../../../src/client/scripts/stopbystop-interfaces.ts\"/>\r\n/// <reference path=\"../../../src/client/scripts/ViewModels/IAppViewModel.ts\"/>\r\n/// <reference path=\"../../../src/client/scripts/ViewModels/IStopPlace.ts\"/>\r\n/// <reference path=\"../../../src/client/scripts/ViewModels/RoutePlanViewModel.ts\"/>\r\n/// <reference path=\"../../../src/client/scripts/Init.ts\"/>\r\n\r\n\"use strict\";\r\nmodule StopByStop {\r\n    export class TestStorage implements Storage {\r\n        public _obj: any = {};\r\n        public length: number = 0;\r\n\r\n        public clear(): void {\r\n            this._obj = {};\r\n        }\r\n        public getItem(key: string): any {\r\n            return this._obj[key];\r\n        }\r\n\r\n        public key(index: number): string {\r\n            throw \"not implemented\";\r\n        }\r\n\r\n        public removeItem(key: string): void {\r\n            delete this._obj[key];\r\n        }\r\n\r\n        public setItem(key: string, data: string): void {\r\n            this._obj[key] = data;\r\n        }\r\n\r\n        [key: string]: any;\r\n\r\n        [index: number]: string;\r\n\r\n        public getData(key: string): string {\r\n            return this._obj[key];\r\n        }\r\n\r\n    }\r\n};\r\n\r\nQUnit.begin(()=>\r\n{\r\n    StopByStop.AppState.current.pageInfo = {\r\n                        pageName: \"TestPageName\",\r\n                        telemetryPageName: \"TestPageName\"\r\n                    };\r\n});\r\n\r\nQUnit.test(\"RoutePlanViewModel: constructor test\", (assert) => {\r\n    var myStorage = new StopByStop.TestStorage();\r\n    var routePlanViewModel = new StopByStop.RoutePlanViewModel(\"testrouteid\", 1000, null, myStorage);\r\n    routePlanViewModel.loadStopsFromStorage();\r\n    assert.equal(myStorage.getData(StopByStop.ROUTE_PLAN_STORAGE_KEY), \"{\\\"testrouteid\\\":{\\\"stops\\\":{}}}\");\r\n});\r\n\r\nQUnit.test(\"RoutePlanViewModel: add stop test\", (assert) => {\r\n    var myStorage = new StopByStop.TestStorage();\r\n    var routePlanViewModel = new StopByStop.RoutePlanViewModel(\"testrouteid\", 1000, null, myStorage);\r\n    routePlanViewModel.loadStopsFromStorage();\r\n    assert.equal(routePlanViewModel.stops().length, 0);\r\n    var poiOnJunctionViewModel: StopByStop.IStopPlace = {\r\n        id: \"id1\",\r\n        name: \"name\",\r\n        dfe: 1,\r\n        dtefrs: 100,\r\n        duration: 5,\r\n        exitId: \"exitid\",\r\n        lat: 42,\r\n        lon: -170,\r\n        type: StopByStop.PoiType.Food\r\n    };\r\n    var routeStopViewModel = routePlanViewModel.getOrCreateStop(poiOnJunctionViewModel);\r\n    assert.ok(routeStopViewModel);\r\n    \r\n    routePlanViewModel.addStopToRoute(routeStopViewModel);\r\n    assert.equal(routePlanViewModel.stops().length, 1);\r\n    assert.equal(routePlanViewModel.stops()[0].stopDuration(), 5);\r\n    assert.equal(myStorage.getData(StopByStop.ROUTE_PLAN_STORAGE_KEY),\r\n        \"{\\\"testrouteid\\\":{\\\"stops\\\":{\\\"id1\\\":{\\\"dfe\\\":1,\\\"dtefrs\\\":100,\\\"duration\\\":5,\\\"exitId\\\":\\\"exitid\\\",\\\"id\\\":\\\"id1\\\",\\\"lat\\\":42,\\\"lon\\\":-170,\\\"name\\\":\\\"name\\\",\\\"type\\\":2}}}}\");\r\n});\r\n\r\nQUnit.test(\"RoutePlanViewModel: change stop duration time test\", (assert) => {\r\n    var myStorage = new StopByStop.TestStorage();\r\n    var routePlanViewModel = new StopByStop.RoutePlanViewModel(\"testrouteid\", 1000, null, myStorage);\r\n    routePlanViewModel.loadStopsFromStorage();\r\n    var poiOnJunctionViewModel: StopByStop.IStopPlace = {\r\n        id: \"id1\",\r\n        name: \"name\",\r\n        dfe: 1,\r\n        dtefrs: 100,\r\n        duration: 5,\r\n        exitId: \"exitid\",\r\n        lat: 42,\r\n        lon: -170,\r\n        type: StopByStop.PoiType.Food\r\n    };\r\n    var routeStopViewModel = routePlanViewModel.getOrCreateStop(poiOnJunctionViewModel);\r\n    routePlanViewModel.addStopToRoute(routeStopViewModel);\r\n    routeStopViewModel.add5MinutesToDuration();\r\n    assert.equal(routePlanViewModel.stops()[0].stopDurationHours(), \"00\");\r\n    assert.equal(routePlanViewModel.stops()[0].stopDurationMinutes(), \"10\");\r\n    assert.equal(myStorage.getData(StopByStop.ROUTE_PLAN_STORAGE_KEY),\r\n        \"{\\\"testrouteid\\\":{\\\"stops\\\":{\\\"id1\\\":{\\\"dfe\\\":1,\\\"dtefrs\\\":100,\\\"duration\\\":5,\\\"exitId\\\":\\\"exitid\\\",\\\"id\\\":\\\"id1\\\",\\\"lat\\\":42,\\\"lon\\\":-170,\\\"name\\\":\\\"name\\\",\\\"type\\\":2}}}}\");\r\n    routeStopViewModel.subtract5MinutesFromDuration();\r\n    assert.equal(routePlanViewModel.stops()[0].stopDurationHours(), \"00\");\r\n    assert.equal(routePlanViewModel.stops()[0].stopDurationMinutes(), \"05\");\r\n    assert.equal(myStorage.getData(StopByStop.ROUTE_PLAN_STORAGE_KEY),      \t\r\n         \"{\\\"testrouteid\\\":{\\\"stops\\\":{\\\"id1\\\":{\\\"dfe\\\":1,\\\"dtefrs\\\":100,\\\"duration\\\":5,\\\"exitId\\\":\\\"exitid\\\",\\\"id\\\":\\\"id1\\\",\\\"lat\\\":42,\\\"lon\\\":-170,\\\"name\\\":\\\"name\\\",\\\"type\\\":2}}}}\");\r\n});\r\n\r\nQUnit.test(\"RoutePlanViewModel: remove stop test\", (assert) => {\r\n    var myStorage = new StopByStop.TestStorage();\r\n    var routePlanViewModel = new StopByStop.RoutePlanViewModel(\"testrouteid\", 1000, null, myStorage);\r\n    routePlanViewModel.loadStopsFromStorage();\r\n    var poiOnJunctionViewModel: StopByStop.IStopPlace = {\r\n        id: \"id1\",\r\n        name: \"name\",\r\n        dfe: 1,\r\n        dtefrs: 100,\r\n        duration: 5,\r\n        exitId: \"exitid\",\r\n        lat: 42,\r\n        lon: -170,\r\n        type: StopByStop.PoiType.Food\r\n    };\r\n    var routeStopViewModel = routePlanViewModel.getOrCreateStop(poiOnJunctionViewModel);\r\n    routePlanViewModel.addStopToRoute(routeStopViewModel);\r\n    assert.equal(routePlanViewModel.stops().length, 1);\r\n\r\n    routePlanViewModel.removeStop(routeStopViewModel);\r\n    assert.equal(routePlanViewModel.stops().length, 0);\r\n});\r\n\r\nQUnit.test(\"RoutePlanViewModel: restore stop data from storage test\", (assert) => {\r\n    var myStorage = new StopByStop.TestStorage();\r\n    var routePlanViewModel = new StopByStop.RoutePlanViewModel(\"testrouteid\", 1000, null, myStorage);\r\n    routePlanViewModel.loadStopsFromStorage();\r\n    var poiOnJunctionViewModel: StopByStop.IStopPlace = {\r\n        id: \"id1\",\r\n        name: \"name\",\r\n        dfe: 1,\r\n        dtefrs: 100,\r\n        duration: 5,\r\n        exitId: \"exitid\",\r\n        lat: 42,\r\n        lon: -170,\r\n        type: StopByStop.PoiType.Food\r\n    };\r\n\r\n    routePlanViewModel = new StopByStop.RoutePlanViewModel(\"testrouteid\", 1000, null, myStorage);\r\n    routePlanViewModel.loadStopsFromStorage();\r\n    var routeStopViewModel = routePlanViewModel.getOrCreateStop(poiOnJunctionViewModel);\r\n    routePlanViewModel.addStopToRoute(routeStopViewModel);\r\n    assert.equal(routePlanViewModel.stops().length, 1);\r\n    assert.equal(myStorage.getData(StopByStop.ROUTE_PLAN_STORAGE_KEY),\r\n        \"{\\\"testrouteid\\\":{\\\"stops\\\":{\\\"id1\\\":{\\\"dfe\\\":1,\\\"dtefrs\\\":100,\\\"duration\\\":5,\\\"exitId\\\":\\\"exitid\\\",\\\"id\\\":\\\"id1\\\",\\\"lat\\\":42,\\\"lon\\\":-170,\\\"name\\\":\\\"name\\\",\\\"type\\\":2}}}}\");\r\n});","/// <reference path=\"../../../src/client/scripts/tsdef/qunit.d.ts\"/>\r\n/// <reference path=\"../../../src/client/scripts/tsdef/jquery.d.ts\"/>\r\n/// <reference path=\"../../../src/client/scripts/tsdef/knockout-3.3.d.ts\"/>\r\n/// <reference path=\"../../../src/client/scripts/tsdef/google.maps.d.ts\"/>\r\n\r\n/// <reference path=\"../../../src/client/scripts/stopbystop-interfaces.ts\"/>\r\n/// <reference path=\"../../../src/client/scripts/Utils.ts\"/>\r\n\r\n\"use strict\";\r\nmodule StopByStop {\r\n\r\nQUnit.begin(()=>\r\n{\r\n    AppState.current.pageInfo = {\r\n                        pageName: \"TestPageName\",\r\n                        telemetryPageName: \"TestPageName\"\r\n                    };\r\n});\r\n\r\nQUnit.test(\"Utils: ParseUrlForNavigationLocation test\", (assert) => {\r\n  assert.equal(Utils.parseUrlForNavigationLocation(\"https://hostname.com/page#route\").page, SBSPage.route);\r\n  assert.equal(Utils.parseUrlForNavigationLocation(\"https://hostname.com/page#exit\").page, SBSPage.exit);\r\n  assert.equal(Utils.parseUrlForNavigationLocation(\"https://hostname.com/page\").page, SBSPage.home);\r\n\r\n  assert.equal(Utils.parseUrlForNavigationLocation(\"https://hostname.com/page#route&routeId=route1\").routeId, \"route1\");\r\n  assert.equal(Utils.parseUrlForNavigationLocation(\"https://hostname.com/page#exit&routeId=route1&exitId=exit1\").exitId, \"exit1\");\r\n  assert.equal(Utils.parseUrlForNavigationLocation(\"https://hostname.com/page#exit&routeId=route1&exitId=exit1&poiType=gas\").poiType, PoiType.Gas);\r\n});\r\n\r\n}","/// <reference path=\"RoutePlanViewModelTests.ts\" />\r\n/// <reference path=\"UtilsTests.ts\" />"]}